import{r as p,c as ue,u as D,a as L,s as te,m as oe,b as ce,l as P,p as he,d as q,P as B,h as ge,e as fe,f as xe,g as M,i as Z,j as be,k as je,n as ye,o as ve,q as G,t as r,v as K,w as le,x as ie,C as we,y as ke,z as Oe,A as Ce,B as Ee,N as z,D as Te,E as Q,F as Fe,G as Ae,H as Se,I as U,J as ze,K as Le}from"./CoxeterDiagram-7697005a.js";class Ne extends p.Component{componentDidCatch(a,s){this.props.onError(a,s)}render(){return this.props.error?null:this.props.children}}const H=.95,He=.95,Y=10,J=10,de=(e,a,s,o,c,t)=>{const{combinations:n}=s,d=[[],[]],f=(l,m)=>{te(o,oe(ce(l,m,c,t),o))},u=2*a+1>n.length-1?[a*2]:[a*2+1,a*2];for(let l=0;l<u.length;l++){const m=u[l];if(d[l].push(m),s.lock&&n[m][0]>=0&&n[m][1]>=0)for(let j=0;j<n.length;j++)n[j][0]<0||n[j][1]<0||!n[m].some(O=>n[j].includes(O))&&(!(l>0)||j!==u[1-l])&&d[l].push(j)}for(let l=0;l<d.length;l++){const m=d[l];for(let j=0;j<m.length;j++){const O=m[j];f(e[l],n[O])}}return d},Ie=(e,a,s,o,c,t)=>{const{code:n}=e,d=.1;if(e.altKey||e.ctrlKey||e.metaKey)return;const f=(u,l,m)=>de([u,l],m,a,s,o,c);if(n==="ArrowLeft"||n==="KeyA")f(d,0,0);else if(n==="ArrowRight"||n==="KeyD")f(-d,0,0);else if(n==="ArrowUp"||n==="KeyW")f(0,d,0);else if(n==="ArrowDown"||n==="KeyS")f(0,-d,0);else if(n==="PageUp"||n==="KeyQ")f(d,0,1);else if(n==="PageDown"||n==="KeyE")f(-d,0,1);else if(n==="Digit1")f(0,d,1);else if(n==="Digit3")f(0,-d,1);else if(n==="KeyZ")f(d,0,2);else if(n==="KeyC")f(-d,0,2);else if(n==="ControlLeft")t("shift",(a.shift+1)%a.maxShift);else return;return!0},Ve=(e,a,s,o)=>{const c=p.useRef(null),t=p.useRef({pause:new Set,speed:null,zoom:null}),n=p.useRef({matrix:e.matrix.map(l=>l.slice()),zoom:e.zoom});p.useEffect(()=>{n.current.matrix=e.matrix.map(l=>l.slice())},[e.matrix]),p.useEffect(()=>{n.current.zoom=e.zoom},[e.zoom]);const d=p.useCallback(()=>{if(e.matrix._reset)return;const l=["vertex","edge","face"];for(let m=0;m<l.length;m++)e.meshes[l[m]].uniforms.matrix.update(ue(n.current.matrix))},[e.ambiance,e.camera,e.centered,e.coxeter,e.curve,e.dimensions,e.easing,e.edgeThickness,e.error,e.fov3,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.grouper,e.msaa,e.msaaSamples,e.projection,e.renderError,e.segments,e.showEdges,e.showFaces,e.showVertices,e.spaceType,e.stellation,e.subsampling,e.vertexThickness,e.zoom]),f=p.useCallback(()=>{e.matrix._reset||D(e,n.current.zoom)},[e.ambiance,e.camera,e.centered,e.coxeter,e.curve,e.dimensions,e.easing,e.edgeThickness,e.error,e.fov3,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.grouper,e.msaa,e.msaaSamples,e.projection,e.renderError,e.segments,e.showEdges,e.showFaces,e.showVertices,e.spaceType,e.stellation,e.subsampling,e.vertexThickness,e.zoom]);p.useEffect(()=>{t.current.speed=new Array(a.combinations.length).fill(0)},[a.combinations.length]),p.useEffect(()=>{e.matrix._reset&&(delete e.matrix._reset,t.current.speed=new Array(a.combinations.length).fill(0))},[a.combinations.length,e.matrix]);const u=p.useCallback(()=>{const{pause:l,speed:m,zoom:j}=t.current;let O=!1;for(let C=0;C<m.length;C++)m[C]!==0&&(O=!0,a.auto==="damp"&&(m[C]*=He,L(m[C])<1e-4&&(m[C]=0)),l.has(C)||te(n.current.matrix,oe(ce(m[C],a.combinations[C],e.dimensions,e.spaceType.metric),n.current.matrix)));if(O&&d(),j){const C=P(n.current.zoom)/P(H),A=P(j)/P(H);n.current.zoom*=he(H,(A-C)*.05),L(j-n.current.zoom)<j*.001&&(n.current.zoom=j,t.current.zoom=null),O=!0,f()}if(m.reduce((C,A)=>L(C)+L(A),0)===0&&t.current.zoom===null&&!e.matrix._reset){o({matrix:n.current.matrix,zoom:n.current.zoom}),c.current=null;return}O&&q(e),c.current=requestAnimationFrame(u)},[d,a.auto,a.combinations,e.dimensions,e.spaceType]);p.useEffect(()=>{t.current.speed.reduce((w,g)=>L(w)+L(g),0)>0&&(c.current=requestAnimationFrame(u));const l=new Map;let m=null,j=[],O=[];const C=()=>{const w=l.values(),g=w.next().value,v=w.next().value;return ge(g[0]-v[0],g[1]-v[1])},A=w=>{w.button!==0||w.target.tagName!=="CANVAS"||(a.auto&&(j.push(performance.now()),l.size===1?(t.current.pause.delete(a.shift*2),t.current.pause.delete(a.shift*2+1)):(t.current.pause.add(a.shift*2),t.current.pause.add(a.shift*2+1))),l.set(w.pointerId,[w.clientX,w.clientY]))},I=w=>{if(!l.has(w.pointerId))return;let g=l.get(w.pointerId);const v=[-(w.clientX-g[0])/window.innerHeight,-(w.clientY-g[1])/window.innerHeight];if(l.set(w.pointerId,[w.clientX,w.clientY]),l.size===2){if(m===null){m=C(),t.current.zoom=n.current.zoom;return}const S=C();n.current.zoom*=m/S,t.current.zoom=n.current.zoom,m=S,D(e,n.current.zoom),q(e);return}let E=a.shift;!E&&w.shiftKey?E=1:!E&&w.altKey?E=2:!E&&w.ctrKey?E=3:!E&&w.metaKey&&(E=4);const $=de([B*v[0],B*v[1]],E,a,n.current.matrix,e.dimensions,e.spaceType.metric);if(a.auto){j.push(performance.now()),j.length>J&&j.shift(),O.push([Y*B*v[0],Y*B*v[1]]),O.length>J&&O.shift();const S=j.slice(-1)[0]-j[0],F=O.reduce((T,N)=>[T[0]+N[0],T[1]+N[1]],[0,0]);for(let T=0;T<2;T++)for(let N=0;N<$[T].length;N++)t.current.speed[$[T][N]]=F[T]/S;c.current||(c.current=requestAnimationFrame(u))}d()},V=w=>{l.has(w.pointerId)&&(a.auto&&(l.size===1?(O=[],j=[],t.current.pause.delete(a.shift*2),t.current.pause.delete(a.shift*2+1)):(t.current.pause.add(a.shift*2),t.current.pause.add(a.shift*2+1))),m=null,l.delete(w.pointerId))};return document.addEventListener("pointerdown",A),document.addEventListener("pointermove",I),document.addEventListener("pointerup",V),()=>{document.removeEventListener("pointerdown",A),document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",V),c.current&&(cancelAnimationFrame(c.current),c.current=null)}},[a,e.dimensions,e.spaceType,e.camera,u,d]),p.useEffect(()=>{const l=m=>{m.target===document.body&&Ie(m,a,n.current.matrix,e.dimensions,e.spaceType.metric,s)&&(d(),q(e))};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[d,a,e.spaceType,e.dimensions,s]),p.useEffect(()=>{const l=m=>{if(m.target.tagName!=="CANVAS")return;const j=t.current.zoom===null?n.current.zoom:t.current.zoom;t.current.zoom=j*(m.deltaY<0?H:1/H),c.current||(c.current=requestAnimationFrame(u))};return document.addEventListener("wheel",l),()=>{document.removeEventListener("wheel",l)}},[u]),p.useEffect(()=>{const l=m=>{if(m.button!==0||m.target.tagName!=="CANVAS")return;const j=t.current.zoom===null?n.current.zoom:t.current.zoom,O=j<.5?5:j<2?.25:1;t.current.zoom=O,c.current||(c.current=requestAnimationFrame(u))};return document.addEventListener("dblclick",l),()=>{document.removeEventListener("dblclick",l)}},[u])};function Pe({runtime:e,rotations:a,updateRotations:s,updateParams:o}){return Ve(e,a,s,o),null}const Be=(e,a)=>{p.useEffect(()=>{a(s=>(D(s),s))},[e.fov3,e.camera,e.zoom,a]),p.useEffect(()=>{a(s=>(s.meshes.updateGeometries(s),s))},[e.spaceType,e.curve,e.segments,a]),p.useEffect(()=>{a(s=>(s.meshes.changeArity(s.dimensions),s))},[e.dimensions,a]),p.useEffect(()=>{a(s=>(fe(s),s))},[e.ambiance,e.msaa,e.msaaSamples,a]),p.useEffect(()=>{a(s=>(xe(s),s))},[e.ambiance,e.msaa,e.msaaSamples,a]),p.useEffect(()=>{a(s=>(M(s,"vertex"),M(s,"edge"),M(s,"face"),s))},[e.showVertices,e.showEdges,e.showFaces,a]),p.useEffect(()=>{a(s=>{if(!(s.currentOrder<0))try{return Z(s,s.currentOrder-1),s}catch(o){return console.error(o),{...s,error:o.message}}})},[e.currentOrder,e.edge,e.face,e.ranges,e.showEdges,e.showFaces,e.showVertices,e.vertex,a]),p.useEffect(()=>{a(s=>(s.meshes.recompilePrograms(s),s))},[e.ambiance,e.dimensions,e.easing,e.projection3,e.projection4,e.projection5,e.projection6,e.projection7,e.projection8,e.projection9,e.spaceType,a]),p.useEffect(()=>{a(s=>{try{return Z(s),s}catch(o){return console.error(o),{...s,error:o.message}}})},[e.ambiance,e.showEdges,e.showFaces,e.showVertices,a]),p.useEffect(()=>{a(s=>(s.meshes.updateUniforms(s),s))},[e.ambiance,e.ambiance,e.curve,e.dimensions,e.easing,e.edgeThickness,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.matrix,e.projection3,e.projection4,e.projection5,e.projection6,e.projection7,e.projection8,e.projection9,e.segments,e.spaceType,e.vertexThickness,a]),p.useEffect(()=>{const s=new ResizeObserver(()=>{q(e)});return s.observe(e.gl.canvas,{box:"content-box"}),()=>s.disconnect()},[e.ambiance,e.camera,e.centered,e.coxeter,e.currentOrder,e.curve,e.dimensions,e.easing,e.edge,e.edgeThickness,e.error,e.face,e.fov3,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.grouper,e.matrix,e.msaa,e.msaaSamples,e.projection3,e.projection4,e.projection5,e.projection6,e.projection7,e.projection8,e.projection9,e.ranges,e.renderError,e.segments,e.showEdges,e.showFaces,e.showVertices,e.spaceType,e.stellation,e.subsampling,e.vertexThickness,e.vertex,e.zoom])};function qe({runtime:e,setRuntime:a}){return Be(e,a),null}function $e(){return new Worker(""+new URL("knuthbendix-tiling.worker-16eb0b1e.js",import.meta.url).href)}function Me(){return new Worker(""+new URL("toddcoxeter-tiling.worker-6a40176f.js",import.meta.url).href)}function _e(){return new Worker(""+new URL("fundamental.worker-12def406.js",import.meta.url).href)}let _=class pe{constructor(a,s){this.workerClass=s,this.name=a,this.init(),this.times={}}static uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const s=Math.random()*16|0;return(a==="x"?s:s&3|8).toString(16)})}init(){this.processing=0,this.worker=new this.workerClass}kill(){this.processing>0&&(console.debug(`Killing worker ${this.name} (${this.processing})`),this.worker.terminate(),this.init())}process(a){return a.uuid=pe.uuid4(),this.processing++,this.times[a.uuid]=performance.now(),this.worker.postMessage(a),new Promise((s,o)=>{const c=n=>{if(n.data.uuid!==a.uuid)return;const d=performance.now()-this.times[a.uuid];if(delete this.times[a.uuid],console.debug(`Worker ${this.name} took ${d}ms`),this.processing--,this.worker.removeEventListener("message",c),this.worker.removeEventListener("error",t),n.data.error){o(n.data.error);return}s(n.data)},t=n=>{this.worker.removeEventListener("message",c),this.worker.removeEventListener("error",t),!(this.processing<=0)&&(delete this.times[a.uuid],this.processing--,this.processing=be(0,this.processing),console.error(`Can't call web worker ${this.name}`,n))};this.worker.addEventListener("message",c),this.worker.addEventListener("error",t)})}};const De=()=>Object.values(me).filter(e=>e.processing>0).forEach(e=>e.kill()),me={knuthbendix:new _("knuthbendix",$e),toddcoxeter:new _("toddcoxeter",Me),fundamental:new _("fundamental",_e)},X=async(e,a,s)=>{const o=me[e.grouper.replace(/^auto-/,"")];if(e.currentOrder===0&&(De(),a.current=!1),a.current===e.currentOrder){console.log("already processing at ",e.currentOrder);return}try{a.current=e.currentOrder;const{vertices:c,edges:t,faces:n,partials:d,order:f}=await o.process({order:e.currentOrder,coxeter:e.coxeter,stellation:e.stellation,metric:e.spaceType.metric,curvature:e.spaceType.curvature,mirrors:e.mirrors,rootNormals:e.rootNormals,rootVertices:e.rootVertices,dimensions:e.dimensions});a.current=!1,s(u=>u.currentOrder!==f?(console.warn("Mismatched order, ignoring",u.currentOrder,f),{...u,currentOrder:0,vertex:[],edge:[],face:[],partial:[],ranges:[],renderError:null,processing:!0,error:"Mismatch Order"}):{...u,ranges:[...u.ranges,{vertex:[u.vertex.length,u.vertex.length+c.length],edge:[u.edge.length,u.edge.length+t.length],face:[u.face.length,u.face.length+n.length]}],vertex:u.vertex.concat(c),edge:u.edge.concat(t),face:u.face.concat(n),partial:d,currentOrder:f+1,processing:!1,error:null})}catch(c){a.current=!1,console.error(c);const t={...e,currentOrder:e.order,error:c.message,processing:!1};s(t)}},Ue=(e,a)=>{const s=p.useRef(!1);p.useEffect(()=>{a(o=>o.order<o.currentOrder?{...o,currentOrder:o.order}:o)},[e.order,e.currentOrder,a]),p.useEffect(()=>{a(o=>{const c=je(o.coxeter,o.stellation),t=ye(c);if(!t)return{...o,spaceType:t};const{vertices:n,normals:d}=ve(t,o.centered),f={...o,currentOrder:0,vertex:[],edge:[],face:[],partial:[],ranges:[],spaceType:t,rootNormals:d,rootVertices:n,renderError:null,processing:!0,error:null};return X(f,s,a),f})},[e.dimensions,e.coxeter,e.mirrors,e.stellation,e.centered,e.grouper,a]),p.useEffect(()=>{a(o=>{var c;return o.order<=o.currentOrder?o:(c=o.ranges)!=null&&c[o.order]?{...o,currentOrder:o.order,askedOrder:null}:(X(o,s,a),{...o,error:null,processing:!0})})},[a,e.order,e.currentOrder])};function Re({runtime:e,setRuntime:a}){return Ue(e,a),null}function We({runtime:e,setRuntime:a,rotations:s,updateRotations:o,updateParams:c}){var n;window.rt=e,window.ro=s;const t=p.useCallback(d=>{a(f=>({...f,renderError:d.message}))},[a]);return p.useEffect(()=>()=>{if(e.spaceType&&e.spaceType.curvature!==null){const d=G(e.dimensions);d._reset=!0,c({matrix:d})}},[(n=e.spaceType)==null?void 0:n.curvature]),r.jsx(r.Fragment,{children:r.jsxs(Ne,{error:e.renderError,onError:t,children:[r.jsx(Re,{runtime:e,setRuntime:a}),e.spaceType?r.jsxs(r.Fragment,{children:[r.jsx(qe,{runtime:e,setRuntime:a}),r.jsx(Pe,{runtime:e,rotations:s,updateRotations:o,updateParams:c})]}):null]})})}const Ge="modulepreload",Ke=function(e,a){return new URL(e,a).href},ee={},Ze=function(a,s,o){if(!s||s.length===0)return a();const c=document.getElementsByTagName("link");return Promise.all(s.map(t=>{if(t=Ke(t,o),t in ee)return;ee[t]=!0;const n=t.endsWith(".css"),d=n?'[rel="stylesheet"]':"";if(!!o)for(let l=c.length-1;l>=0;l--){const m=c[l];if(m.href===t&&(!n||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${t}"]${d}`))return;const u=document.createElement("link");if(u.rel=n?"stylesheet":Ge,n||(u.as="script",u.crossOrigin=""),u.href=t,document.head.appendChild(u),n)return new Promise((l,m)=>{u.addEventListener("load",l),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>a()).catch(t=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=t,window.dispatchEvent(n),!n.defaultPrevented)throw t})},Qe=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("g",{id:"feTarget0",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:r.jsx("g",{id:"feTarget1",fill:"currentColor",fillRule:"nonzero",children:r.jsx("path",{id:"feTarget2",d:"M19.938 13A8.004 8.004 0 0 1 13 19.938V22h-2v-2.062A8.004 8.004 0 0 1 4.062 13H2v-2h2.062A8.004 8.004 0 0 1 11 4.062V2h2v2.062A8.004 8.004 0 0 1 19.938 11H22v2h-2.062ZM12 18a6 6 0 1 0 0-12a6 6 0 0 0 0 12Zm0-3a3 3 0 1 0 0-6a3 3 0 0 0 0 6Z"})})})}),Ye=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.56 3.69a9 9 0 0 0-2.92 1.95M3.69 8.56A9 9 0 0 0 3 12m.69 3.44a9 9 0 0 0 1.95 2.92m2.92 1.95A9 9 0 0 0 12 21m3.44-.69a9 9 0 0 0 2.92-1.95m1.95-2.92A9 9 0 0 0 21 12m-.69-3.44a9 9 0 0 0-1.95-2.92m-2.92-1.95A9 9 0 0 0 12 3"})}),Je=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 20.777a8.942 8.942 0 0 1-2.48-.969M14 3.223a9.003 9.003 0 0 1 0 17.554m-9.421-3.684a8.961 8.961 0 0 1-1.227-2.592M3.124 10.5c.16-.95.468-1.85.9-2.675l.169-.305m2.714-2.941A8.954 8.954 0 0 1 10 3.223"})}),Xe=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",children:r.jsxs("g",{fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",d:"M13.326 8.5a6.5 6.5 0 1 1-.558-4.5"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 2v2.5H11"})]})}),er=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:r.jsx("path",{fill:"currentColor",d:"M8.065 2.016A.13.13 0 0 0 8.002 2v11.983l6.856.017a.12.12 0 0 0 .066-.017a.162.162 0 0 0 .054-.06a.176.176 0 0 0-.002-.183L8.12 2.073a.146.146 0 0 0-.054-.057zm-1.043-.45a1.13 1.13 0 0 1 1.96 0l6.856 11.667c.458.778-.091 1.767-.98 1.767H1.146c-.889 0-1.437-.99-.98-1.767L7.022 1.566z"})}),rr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M16 6v1h.75A3.25 3.25 0 0 1 20 10.25v7.5A3.25 3.25 0 0 1 16.75 21h-9.5A3.25 3.25 0 0 1 4 17.75v-7.5A3.25 3.25 0 0 1 7.25 7H8V6a4 4 0 1 1 8 0ZM9.5 6v1h5V6a2.5 2.5 0 0 0-5 0Zm2.5 9.5a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3Z"})}),ar=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M16 5a2.5 2.5 0 0 1 5 0v.25a.75.75 0 0 0 1.5 0V5a4 4 0 0 0-8 0v2H7.25A3.25 3.25 0 0 0 4 10.25v7.5A3.25 3.25 0 0 0 7.25 21h9.5A3.25 3.25 0 0 0 20 17.75v-7.5A3.25 3.25 0 0 0 16.75 7H16V5Zm-4 10.5a1.5 1.5 0 1 1 0-3a1.5 1.5 0 0 1 0 3Z"})});function re({allowNull:e,name:a,value:s,onChange:o,...c}){const t=p.useCallback(d=>{let{name:f,checked:u}=d.target,l;e?l=s===!1?!0:s?null:!1:l=u,o(f,l)},[e,o,s]),n=p.useRef(null);return p.useLayoutEffect(()=>{e&&n.current&&(s===null?n.current.indeterminate=!0:n.current.indeterminate=!1)},[s,e]),r.jsx("input",{type:"checkbox",ref:n,name:a,checked:s||!1,onChange:t})}function b({type:e,subtype:a,level:s,dimensions:o}){return r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"space",children:e===null||e==="indefinite"?"𝕏":e==="affine"?"𝔼":e==="finite"?"𝕊":"ℍ"}),o?r.jsx("sup",{children:o-1}):null,e==="hyperbolic"?r.jsxs("sub",{children:[{compact:" ",paracompact:"*",lorentzian:"L",superhyperbolic:"**"}[a],s]}):null]})}const sr=(...e)=>{if(Array.isArray(e[0]))return{coxeter:e,dimensions:e.length,extended:!0};const a=e.length+1;return{coxeter:new Array(a).fill().map((o,c)=>new Array(a).fill().map((t,n)=>c===n?1:c===n+1||n===c+1?e[ie(c,n)]:2)),dimensions:a}},nr=(...e)=>{const a=e.length+1;return{stellation:new Array(a).fill().map((o,c)=>new Array(a).fill().map((t,n)=>c===n?1:c===n+1||n===c+1?e[ie(c,n)]:1))}},i=(e,a,s,o)=>{const c=sr(...e),{dimensions:t}=c,n={...K,...c,showVertices:t<=3,showFaces:t<=4,curve:t>3,grouper:"toddcoxeter",ambiance:"colorful",segments:32,matrix:G(t),zoom:t<=3?2:t>4?3:5,centered:!0,...Object.fromEntries(le(3,t+1).map(d=>[`projection${d}`,d===t?"stereographic":"perspective"])),...o||{}};return a?n.mirrors=a:n.mirrors=new Array(t).fill().map((d,f)=>f===0?1:0),s?n.stellation=nr(...s).stellation:n.stellation=new Array(t).fill().map((d,f)=>new Array(t).fill(1)),n},k=e=>({...e,subforms:Object.entries(tr(e.params.dimensions)).map(([a,s])=>({name:`${a} ${e.name}`,params:{...e.params,mirrors:s}}))}),x=(e,a,s,o)=>({...i(e,a,s),ambiance:"plain",showVertices:!1,curve:!0,zoom:1,segments:32,...o}),y=(e,a,s,o)=>({...i(e,a,s),ambiance:"neon",showFaces:!1,showVertices:!1,grouper:"toddcoxeter",centered:!1,edgeThickness:10,segments:16,zoom:2,...o}),h=(e,a,s,o)=>{const c=i(e,a,s),t=c.matrix.length;return{...c,ambiance:"neon",showFaces:!1,showVertices:!1,curve:!0,grouper:"toddcoxeter",centered:!1,edgeThickness:t>4?10:25,segments:16,order:t>4?15:25,zoom:1.5,...o}},tr=e=>{if(e===4)return{Rectified:[0,1,0,0],Truncated:[1,1,0,0],Cantellated:[1,0,1,0],Cantitruncated:[1,1,1,0],Runcitruncated:[1,1,0,1],Runcinated:[1,0,0,1],Bitruncated:[0,1,1,0],Omnitruncated:[1,1,1,1]};if(e===5)return{Rectified:[0,1,0,0,0],Birectified:[0,0,1,0,0],Truncated:[1,1,0,0,0],Cantellated:[1,0,1,0,0],Runcinated:[1,0,0,1,0],Stericated:[1,0,0,0,1],Omnitruncated:[1,1,1,1,1]};if(e===6)return{Rectified:[0,1,0,0,0,0],Birectified:[0,0,1,0,0,0],Truncated:[1,1,0,0,0,0],Bitruncated:[0,1,1,0,0,0],Tritruncated:[0,0,1,1,0,0],Cantellated:[1,0,1,0,0,0],Bicantellated:[0,1,0,1,0,0],Runcinated:[1,0,0,1,0,0],Biruncinated:[0,1,0,0,1,0],Stericated:[1,0,0,0,1,0],Pentellated:[1,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1]};if(e===7)return{Rectified:[0,1,0,0,0,0,0],Birectified:[0,0,1,0,0,0,0],Truncated:[1,1,0,0,0,0,0],Bitruncated:[0,1,1,0,0,0,0],Tritruncated:[0,0,1,1,0,0,0],Cantellated:[1,0,1,0,0,0,0],Bicantellated:[0,1,0,1,0,0,0],Runcinated:[1,0,0,1,0,0,0],Biruncinated:[0,1,0,0,1,0,0],Stericated:[1,0,0,0,1,0,0],Pentellated:[1,0,0,0,0,1,0],Hexicated:[1,0,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1,1]};if(e===8)return{Rectified:[0,1,0,0,0,0,0,0],Birectified:[0,0,1,0,0,0,0,0],Truncated:[1,1,0,0,0,0,0,0],Bitruncated:[0,1,1,0,0,0,0,0],Tritruncated:[0,0,1,1,0,0,0,0],Quadritruncated:[0,0,0,1,1,0,0,0],Cantellated:[1,0,1,0,0,0,0,0],Bicantellated:[0,1,0,1,0,0,0,0],Tricantellated:[0,0,1,0,1,0,0,0],Runcinated:[1,0,0,1,0,0,0,0],Biruncinated:[0,1,0,0,1,0,0,0],Triruncinated:[0,0,1,0,0,1,0,0],Stericated:[1,0,0,0,1,0,0,0],Pentellated:[1,0,0,0,0,1,0,0],Hexicated:[1,0,0,0,0,0,1,0],Heptellated:[1,0,0,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1,1,1]};if(e===9)return{Rectified:[0,1,0,0,0,0,0,0,0],Birectified:[0,0,1,0,0,0,0,0,0],Truncated:[1,1,0,0,0,0,0,0,0],Bitruncated:[0,1,1,0,0,0,0,0,0],Tritruncated:[0,0,1,1,0,0,0,0,0],Quadritruncated:[0,0,0,1,1,0,0,0,0],Cantellated:[1,0,1,0,0,0,0,0,0],Bicantellated:[0,1,0,1,0,0,0,0,0],Tricantellated:[0,0,1,0,1,0,0,0,0],Runcinated:[1,0,0,1,0,0,0,0,0],Biruncinated:[0,1,0,0,1,0,0,0,0],Triruncinated:[0,0,1,0,0,1,0,0,0],Stericated:[1,0,0,0,1,0,0,0,0],Pentellated:[1,0,0,0,0,1,0,0,0],Hexicated:[1,0,0,0,0,0,1,0,0],Heptellated:[1,0,0,0,0,0,0,1,0],Octellated:[1,0,0,0,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1,1,1,1]}},or=[{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx("span",{style:{color:"orange"},children:"★"})," Highlights"]})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:4})," Tesseract"]}),params:i([4,3,3],[1,0,0,0],null,{showVertices:!0,vertexThickness:150,showFaces:!0,curve:!0,ambiance:"neon",zoom:4.2})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",dimensions:3})," 7-3-2 tiling"]}),params:x([7,3],[1,0,0],null,{showVertices:!1,showFaces:!0,curve:!0,ambiance:"neon"})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:3})," Ideal triangles"]}),params:x([[1,0,0],[0,1,0],[0,0,1]],[1,1,1],null,{grouper:"fundamental",showVertices:!1,showFaces:!0,curve:!0,segments:64,easing:"quintic",ambiance:"neon",centered:!0})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:8})," E6 (1",r.jsx("sub",{children:"22"}),")"]}),params:i([[1,3,2,2,2,2],[3,1,3,2,2,2],[2,3,1,3,3,2],[2,2,3,1,2,2],[2,2,3,2,1,3],[2,2,2,2,3,1]],[0,0,0,1,0,0],null,{vertexThickness:40,edgeThickness:10,ambiance:"colorful",showVertices:!0,projection3:"orthographic",projection4:"orthographic",projection5:"orthographic",projection6:"orthographic",zoom:1,centered:!1})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:8})," E8 (4",r.jsx("sub",{children:"21"}),")"]}),params:i([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[0,0,0,0,0,0,0,1],null,{vertexThickness:30,edgeThickness:1,curve:!1,ambiance:"neon",showVertices:!0,projection3:"orthographic",projection4:"orthographic",projection5:"orthographic",projection6:"orthographic",projection7:"orthographic",projection8:"orthographic",order:14,zoom:1,centered:!1})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," Ideal tetrahedron"]}),params:x([3,3,6],[1,0,0,""],null,{showVertices:!1,showFaces:!0,curve:!0,order:1,centered:!0,segments:64,easing:"quartic",ambiance:"pure"})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," ","Horoball"]}),params:x([6,3,4],[1,0,0,""],null,{showVertices:!1,showFaces:!0,curve:!0,order:20,centered:!1,ambiance:"colorful"})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",dimensions:4})," 5-3-4 honeycomb"]}),params:h([5,3,4],[1,0,0,0],null,{zoom:1.5})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"lorentzian",level:2,dimensions:4})," ","7-3-3 paracompact honeycomb"]}),params:h([7,3,3],[1,0,0,0],null,{zoom:1.5,showFaces:!0,showVertices:!0})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," Ideal Pentahedron"]}),params:x([5,3,6],[1,0,0,""],null,{showVertices:!1,showFaces:!0,curve:!0,order:1,centered:!0,segments:32,easing:"quartic",ambiance:"pure",zoom:1.5})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:4})," Flat Torus"]}),params:i([32,2,32],[1,0,0,1],null,{showVertices:!1,showFaces:!1,curve:!0,ambiance:"neon",zoom:3,edgeThickness:5})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:5})," Tesseract stack"]}),params:i([[1,2,2,2,0],[2,1,2,2,2],[2,2,1,2,2],[2,2,2,1,2],[0,2,2,2,1]],[1,1,1,1,0],null,{showVertices:!1,showFaces:!0,ambiance:"neon",edgeThickness:35})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"superhyperbolic",dimensions:4})," ","Ultrahyperbolic surface (Anti-de Sitter Ads3)"]}),params:i([-1,2,-1],[1,0,0,1],null,{showVertices:!1,showFaces:!1,curve:!0,ambiance:"neon",centered:!1,edgeThickness:10,zoom:1})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"superhyperbolic",dimensions:5})," ","Ultrahyperbolic honeycomb (Anti-de Sitter Ads4)"]}),params:i([-1,3,3,-1],[1,0,0,0,1],null,{showVertices:!1,showFaces:!1,curve:!0,ambiance:"neon",centered:!1,edgeThickness:10,zoom:2})},{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite"})," Spherical space"]})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:3})," Polyedra"]})},{name:"Tetrahedron",params:i([3,3]),subforms:[{name:"Truncated Tetrahedron",params:i([3,3],[1,1,0])}]},{name:"Cube",params:i([4,3]),subforms:[{name:"Cuboctahedron",params:i([4,3],[0,1,0])},{name:"Truncated Cube",params:i([4,3],[1,1,0])},{name:"Rhombicuboctahedron",params:i([4,3],[1,0,1])},{name:"Truncated Octahedron",params:i([3,4],[1,1,0])},{name:"Truncated Cuboctahedron",params:i([4,3],[1,1,1])},{name:"Octahedron",params:i([3,4])}]},{name:"Dodecahedron",params:i([5,3]),subforms:[{name:"Icosidodecahedron",params:i([5,3],[0,1,0])},{name:"Truncate Dodecahedron",params:i([5,3],[1,1,0])},{name:"Rhombicosidodecahedron",params:i([5,3],[1,0,1])},{name:"Truncate Icosahedron",params:i([3,5],[1,1,0])},{name:"Truncated Icosidodecahedron",params:i([5,3],[1,1,1])},{name:"Icosahedron",params:i([3,5])}]},{name:"Snub Cube",params:i([4,3],["s","s","s"])},{name:"Snub Dodecahedron",params:i([5,3],["s","s","s"])},{name:"Great Dodecahedron",params:i([5,5],[1,0,0],[1,2])},{name:"Great Icosahedron",params:i([3,5],[1,0,0],[1,2])},{name:"Small Stellated Dodecahedron",params:i([5,5],[1,0,0],[2,1])},{name:"Great Stellated Dodecahedron",params:i([5,3],[1,0,0],[2,1])},{name:"Stellated Octahedron",params:i([2,2],["ß","ß","ß"])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:4})," Polychora"]})},k({name:"5-cell",params:i([3,3,3])}),k({name:"8-cell",params:i([4,3,3])}),k({name:"16-cell",params:i([3,3,4])}),k({name:"24-cell",params:i([3,4,3])}),k({name:"120-cell",params:i([5,3,3])}),k({name:"600-cell",params:i([3,3,5])}),{name:"Snub 24-cell",params:i([3,4,3],["s","s",0,0])},{name:"Icosahedral 120-cell",params:i([3,5,5],[1,0,0,0],[1,1,2],{curve:!1}),subforms:[{name:"Small stellated 120-cell",params:i([3,5,5],[0,0,0,1],[1,1,2],{curve:!1})},{name:"Great 120-cell",params:i([5,5,5],[1,0,0,0],[1,2,1],{curve:!1})},{name:"Grand 120-cell",params:i([5,3,5],[1,0,0,0],[1,1,2],{curve:!1})},{name:"Great stellated 120-cell",params:i([5,3,5],[0,0,0,1],[1,1,2],{curve:!1})},{name:"Grand stellated 120-cell",params:i([5,5,5],[1,0,0,0],[2,1,2],{curve:!1})},{name:"Great grand 120-cell",params:i([5,5,3],[1,0,0,0],[1,2,1],{curve:!1})},{name:"Great icosahedral 120-cell",params:i([5,5,3],[0,0,0,1],[1,2,1],{curve:!1})},{name:"Great grand stellated 120-cell",params:i([5,3,3],[1,0,0,0],[2,1,1],{curve:!1})}]},{name:"Grand 600-cell",params:i([3,3,5],[1,0,0,0],[1,1,2],{curve:!1})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:5})," Polytera"]})},k({name:"5-simplex",params:i([3,3,3,3])}),k({name:"5-cube",params:i([4,3,3,3])}),k({name:"5-orthoplex",params:i([3,3,3,4])}),k({name:"5-demicube",params:i([[1,2,3,2,2],[2,1,3,2,2],[3,3,1,3,2],[2,2,3,1,3],[2,2,2,3,1]])}),{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:6})," Polypeta"]})},k({name:"6-simplex",params:i([3,3,3,3,3])}),k({name:"6-cube",params:i([4,3,3,3,3])}),k({name:"6-orthoplex",params:i([3,3,3,3,4])}),k({name:"6-demicube",params:i([[1,2,3,2,2,2],[2,1,3,2,2,2],[3,3,1,3,2,2],[2,2,3,1,3,2],[2,2,2,3,1,3],[2,2,2,2,3,1]])}),{name:r.jsxs(r.Fragment,{children:["2",r.jsx("sub",{children:"21"})]}),params:i([[1,3,2,2,2,2],[3,1,3,2,2,2],[2,3,1,3,3,2],[2,2,3,1,2,2],[2,2,3,2,1,3],[2,2,2,2,3,1]],[1,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["1",r.jsx("sub",{children:"22"})]}),params:i([[1,3,2,2,2,2],[3,1,3,2,2,2],[2,3,1,3,3,2],[2,2,3,1,2,2],[2,2,3,2,1,3],[2,2,2,2,3,1]],[0,0,0,1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:7})," Polyexa"]})},k({name:"7-simplex",params:i([3,3,3,3,3,3])}),k({name:"7-cube",params:i([4,3,3,3,3,3])}),k({name:"7-orthoplex",params:i([3,3,3,3,3,4])}),k({name:"7-demicube",params:i([[1,2,3,2,2,2,2],[2,1,3,2,2,2,2],[3,3,1,3,2,2,2],[2,2,3,1,3,2,2],[2,2,2,3,1,3,2],[2,2,2,2,3,1,3],[2,2,2,2,2,3,1]])}),{name:r.jsxs(r.Fragment,{children:["3",r.jsx("sub",{children:"21"})]}),params:i([[1,3,2,2,2,2,2],[3,1,3,2,2,2,2],[2,3,1,3,2,2,2],[2,2,3,1,3,3,2],[2,2,2,3,1,2,2],[2,2,2,3,2,1,3],[2,2,2,2,2,3,1]],[1,0,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["2",r.jsx("sub",{children:"31"})]}),params:i([[1,3,2,2,2,2,2],[3,1,3,2,2,2,2],[2,3,1,3,2,2,2],[2,2,3,1,3,3,2],[2,2,2,3,1,2,2],[2,2,2,3,2,1,3],[2,2,2,2,2,3,1]],[0,0,0,0,0,0,1])},{name:r.jsxs(r.Fragment,{children:["1",r.jsx("sub",{children:"32"})]}),params:i([[1,3,2,2,2,2,2],[3,1,3,2,2,2,2],[2,3,1,3,2,2,2],[2,2,3,1,3,3,2],[2,2,2,3,1,2,2],[2,2,2,3,2,1,3],[2,2,2,2,2,3,1]],[0,0,0,0,1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:8})," Polyzetta"]})},k({name:"8-simplex",params:i([3,3,3,3,3,3,3])}),k({name:"8-cube",params:i([4,3,3,3,3,3,3])}),k({name:"8-orthoplex",params:i([3,3,3,3,3,3,4])}),k({name:"8-demicube",params:i([[1,2,3,2,2,2,2,2],[2,1,3,2,2,2,2,2],[3,3,1,3,2,2,2,2],[2,2,3,1,3,2,2,2],[2,2,2,3,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]])}),{name:r.jsxs(r.Fragment,{children:["1",r.jsx("sub",{children:"42"})]}),params:i([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[0,0,1,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["2",r.jsx("sub",{children:"41"})]}),params:i([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[1,0,0,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["4",r.jsx("sub",{children:"21"})]}),params:i([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[0,0,0,0,0,0,0,1])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:9}),"Polyyotta"]})},k({name:"9-simplex",params:i([3,3,3,3,3,3,3,3])}),k({name:"9-cube",params:i([4,3,3,3,3,3,3,3])}),k({name:"9-orthoplex",params:i([3,3,3,3,3,3,3,4])}),k({name:"9-demicube",params:i([[1,2,3,2,2,2,2,2,2],[2,1,3,2,2,2,2,2,2],[3,3,1,3,2,2,2,2,2],[2,2,3,1,3,2,2,2,2],[2,2,2,3,1,3,2,2,2],[2,2,2,2,3,1,3,2,2],[2,2,2,2,2,3,1,3,2],[2,2,2,2,2,2,3,1,3],[2,2,2,2,2,2,2,3,1]])}),{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine"})," Euclidean space"]})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:3})," Tilings"]})},{name:"Triangle",params:i([[1,3,3],[3,1,3],[3,3,1]],[1,0,0])},{name:"Square",params:i([4,4],[1,0,0])},{name:"Hexagonal",params:i([6,3],[1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:4})," Honeycombs"]})},{name:"Cubic",params:y([4,3,4],[1,0,0,0])},{name:"Octet",params:y([[1,3,2,2],[3,1,3,4],[2,3,1,2],[2,4,2,1]],[1,0,0,0])},{name:"Quarter cubic",params:y([[1,3,2,3],[3,1,3,2],[2,3,1,3],[3,2,3,1]],[1,0,0,1])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:5})," 4-Honeycombs"]})},{name:"Tesseractic",params:y([4,3,3,4],[1,0,0,0,0])},{name:"16-cellic",params:y([3,3,4,3],[1,0,0,0,0],null,{grouper:"toddcoxeter"})},{name:"24-cellic",params:y([3,4,3,3],[1,0,0,0,0],null,{grouper:"toddcoxeter"})},{name:"4-simpletic",params:y([[1,3,2,2,3],[3,1,3,2,2],[2,3,1,3,2],[2,2,3,1,3],[3,2,2,3,1]],[1,0,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Quarter tesseractic",params:y([[1,2,3,2,2],[2,1,3,2,2],[3,3,1,3,3],[2,2,3,1,2],[2,2,3,2,1]],[1,0,0,1,0],null,{grouper:"toddcoxeter"})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:6})," 5-Honeycombs"]})},{name:"5-simplex",params:y([[1,3,2,2,2,3],[3,1,3,2,2,2],[2,3,1,3,2,2],[2,2,3,1,3,2],[2,2,2,3,1,3],[3,2,2,2,3,1]],[1,0,0,0,0,0])},{name:"5-cubic",params:y([4,3,3,3,4],[1,0,0,0,0,0])},{name:"5-demicubic",params:y([[1,2,3,2,2,2],[2,1,3,2,2,2],[3,3,1,3,2,2],[2,2,3,1,3,2],[2,2,2,3,1,4],[2,2,2,2,4,1]],[1,0,0,0,0,0])},{name:"Quarter 5-cubic",params:y([[1,2,3,2,2,2],[2,1,3,2,2,2],[3,3,1,3,2,2],[2,2,3,1,3,3],[2,2,2,3,1,2],[2,2,2,3,2,1]],[1,0,0,0,0,1])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:7})," 6-Honeycombs"]})},{name:"6-simplex",params:y([[1,3,2,2,2,2,3],[3,1,3,2,2,2,2],[2,3,1,3,2,2,2],[2,2,3,1,3,2,2],[2,2,2,3,1,3,2],[2,2,2,2,3,1,3],[3,2,2,2,2,3,1]],[1,0,0,0,0,0,0])},{name:"6-cubic",params:y([4,3,3,3,3,4],[1,0,0,0,0,0,0])},{name:"6-demicubic",params:y([[1,2,3,2,2,2,2],[2,1,3,2,2,2,2],[3,3,1,3,2,2,2],[2,2,3,1,3,2,2],[2,2,2,3,1,3,2],[2,2,2,2,3,1,4],[2,2,2,2,2,4,1]],[1,0,0,0,0,0,0])},{name:"Quarter 6-cubic",params:y([[1,2,3,2,2,2,2],[2,1,3,2,2,2,2],[3,3,1,3,2,2,2],[2,2,3,1,3,2,2],[2,2,2,3,1,3,3],[2,2,2,2,3,1,2],[2,2,2,2,3,2,1]],[1,0,0,0,0,0,1])},{name:r.jsxs(r.Fragment,{children:["2",r.jsx("sub",{children:"22"})]}),params:y([[1,3,2,2,2,2,2],[3,1,3,2,2,2,2],[2,3,1,3,2,3,2],[2,2,3,1,3,2,2],[2,2,2,3,1,2,2],[2,2,3,2,2,1,3],[2,2,2,2,2,3,1]],[0,0,0,0,1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:8})," 7-Honeycombs"]})},{name:"7-simplex",params:y([[1,3,2,2,2,2,2,3],[3,1,3,2,2,2,2,2],[2,3,1,3,2,2,2,2],[2,2,3,1,3,2,2,2],[2,2,2,3,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[3,2,2,2,2,2,3,1]],[1,0,0,0,0,0,0,0])},{name:"7-cubic",params:y([4,3,3,3,3,3,4],[1,0,0,0,0,0,0,0])},{name:"7-demicubic",params:y([[1,2,3,2,2,2,2,2],[2,1,3,2,2,2,2,2],[3,3,1,3,2,2,2,2],[2,2,3,1,3,2,2,2],[2,2,2,3,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,4],[2,2,2,2,2,2,4,1]],[1,0,0,0,0,0,0,0])},{name:"Quarter 7-cubic",params:y([[1,2,3,2,2,2,2,2],[2,1,3,2,2,2,2,2],[3,3,1,3,2,2,2,2],[2,2,3,1,3,2,2,2],[2,2,3,3,1,3,2,2],[2,2,2,2,3,1,3,3],[2,2,2,2,2,3,1,2],[2,2,2,2,2,3,2,1]],[1,0,0,0,0,0,0,1])},{name:r.jsxs(r.Fragment,{children:["1",r.jsx("sub",{children:"33"})]}),params:y([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,2,2,2,2],[2,2,3,1,3,3,2,2],[2,2,2,3,1,2,2,2],[2,2,2,3,2,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[0,0,0,0,1,0,0,0])},{name:r.jsxs(r.Fragment,{children:["3",r.jsx("sub",{children:"31"})]}),params:y([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,2,2,2,2],[2,2,3,1,3,3,2,2],[2,2,2,3,1,2,2,2],[2,2,2,3,2,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[1,0,0,0,0,0,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:9})," 8-Honeycombs"]})},{name:"8-simplex",params:y([[1,3,2,2,2,2,2,2,3],[3,1,3,2,2,2,2,2,2],[2,3,1,3,2,2,2,2,2],[2,2,3,1,3,2,2,2,2],[2,2,2,3,1,3,2,2,2],[2,2,2,2,3,1,3,2,2],[2,2,2,2,2,3,1,3,2],[2,2,2,2,2,2,3,1,3],[3,2,2,2,2,2,2,3,1]],[1,0,0,0,0,0,0,0,0])},{name:"8-cubic",params:y([4,3,3,3,3,3,3,4],[1,0,0,0,0,0,0,0,0])},{name:"8-demicubic",params:y([[1,2,3,2,2,2,2,2,2],[2,1,3,2,2,2,2,2,2],[3,3,1,3,2,2,2,2,2],[2,2,3,1,3,2,2,2,2],[2,2,2,3,1,3,2,2,2],[2,2,2,2,3,1,3,2,2],[2,2,2,2,2,3,1,3,2],[2,2,2,2,2,2,3,1,4],[2,2,2,2,2,2,2,4,1]],[1,0,0,0,0,0,0,0,0])},{name:"Quarter 8-cubic",params:y([[1,2,3,2,2,2,2,2,2],[2,1,3,2,2,2,2,2,2],[3,3,1,3,2,2,2,2,2],[2,2,3,1,3,2,2,2,2],[2,2,2,3,1,3,2,2,2],[2,2,2,2,3,1,3,2,2],[2,2,2,2,2,3,1,3,3],[2,2,2,2,2,2,3,1,2],[2,2,2,2,2,2,3,2,1]],[1,0,0,0,0,0,0,0,1])},{name:r.jsxs(r.Fragment,{children:["1",r.jsx("sub",{children:"52"})]}),params:y([[1,3,2,2,2,2,2,2,2],[3,1,3,2,2,2,2,2,2],[2,3,1,3,3,2,2,2,2],[2,2,3,1,2,2,2,2,2],[2,2,3,2,1,3,2,2,2],[2,2,2,2,3,1,3,2,2],[2,2,2,2,2,3,1,3,2],[2,2,2,2,2,2,3,1,3],[2,2,2,2,2,2,2,3,1]],[0,0,0,1,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["2",r.jsx("sub",{children:"51"})]}),params:y([[1,3,2,2,2,2,2,2,2],[3,1,3,2,2,2,2,2,2],[2,3,1,3,3,2,2,2,2],[2,2,3,1,2,2,2,2,2],[2,2,3,2,1,3,2,2,2],[2,2,2,2,3,1,3,2,2],[2,2,2,2,2,3,1,3,2],[2,2,2,2,2,2,3,1,3],[2,2,2,2,2,2,2,3,1]],[1,0,0,0,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["5",r.jsx("sub",{children:"21"})]}),params:y([[1,3,2,2,2,2,2,2,2],[3,1,3,2,2,2,2,2,2],[2,3,1,3,3,2,2,2,2],[2,2,3,1,2,2,2,2,2],[2,2,3,2,1,3,2,2,2],[2,2,2,2,3,1,3,2,2],[2,2,2,2,2,3,1,3,2],[2,2,2,2,2,2,3,1,3],[2,2,2,2,2,2,2,3,1]],[0,0,0,0,0,0,0,0,1])},{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic"})," Hyperbolic space"]})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",dimensions:3})," Tilings"]})},{name:"Order-7 triangular",params:x([3,7],[1,0,0])},{name:"Order-8 triangular",params:x([3,8],[1,0,0])},{name:"Infinite Order triangular",params:x([3,0],[1,0,0])},{name:"Order-5 square",params:x([4,5],[1,0,0])},{name:"Order-6 square",params:x([4,6],[1,0,0])},{name:"Order-7 square",params:x([4,7],[1,0,0])},{name:"Order-8 square",params:x([4,8],[1,0,0])},{name:"Infinite Order square",params:x([4,0],[1,0,0])},{name:"Order-4 pentagonal",params:x([5,4],[1,0,0])},{name:"Order-5 pentagonal",params:x([5,5],[1,0,0])},{name:"Order-6 pentagonal",params:x([5,6],[1,0,0])},{name:"Order-7 pentagonal",params:x([5,7],[1,0,0])},{name:"Order-8 pentagonal",params:x([5,8],[1,0,0])},{name:"Infinite Order pentagonal",params:x([5,0],[1,0,0])},{name:"Order-4 hexagonal",params:x([6,4],[1,0,0])},{name:"Order-5 hexagonal",params:x([6,5],[1,0,0])},{name:"Order-6 hexagonal",params:x([6,6],[1,0,0])},{name:"Order-7 hexagonal",params:x([6,7],[1,0,0])},{name:"Order-8 hexagonal",params:x([6,8],[1,0,0])},{name:"Infinite Order hexagonal",params:x([6,0],[1,0,0])},{name:"Order-3 heptagonal",params:x([7,3],[1,0,0])},{name:"Order-4 heptagonal",params:x([7,4],[1,0,0])},{name:"Order-5 heptagonal",params:x([7,5],[1,0,0])},{name:"Order-6 heptagonal",params:x([7,6],[1,0,0])},{name:"Order-7 heptagonal",params:x([7,7],[1,0,0])},{name:"Order-8 heptagonal",params:x([7,8],[1,0,0])},{name:"Infinite Order heptagonal",params:x([7,0],[1,0,0])},{name:"Order-3 octagonal",params:x([8,3],[1,0,0])},{name:"Order-4 octagonal",params:x([8,4],[1,0,0])},{name:"Order-5 octagonal",params:x([8,5],[1,0,0])},{name:"Order-6 octagonal",params:x([8,6],[1,0,0])},{name:"Order-7 octagonal",params:x([8,7],[1,0,0])},{name:"Order-8 octagonal",params:x([8,8],[1,0,0])},{name:"Infinite Order octagonal",params:x([8,0],[1,0,0])},{name:"Order-3 apeirogonal",params:x([0,3],[1,0,0])},{name:"Order-4 apeirogonal",params:x([0,4],[1,0,0])},{name:"Order-5 apeirogonal",params:x([0,5],[1,0,0])},{name:"Order-6 apeirogonal",params:x([0,6],[1,0,0])},{name:"Order-7 apeirogonal",params:x([0,7],[1,0,0])},{name:"Order-8 apeirogonal",params:x([0,8],[1,0,0])},{name:"Infinite Order apeirogonal",params:x([0,0],[1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"compact",dimensions:4})," Compact Hyperbolic Honeycombs"]})},{name:"Icosahedral",params:h([3,5,3],[1,0,0,0])},{name:"Order-4 dodecahedral",params:h([5,3,4],[1,0,0,0])},{name:"Order-5 dodecahedral",params:h([5,3,5],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-5 cubic",params:h([[1,2,3,2],[2,1,3,2],[3,3,1,5],[2,2,5,1]],[1,0,0,0])},{name:"Tetrahedral cubic",params:h([[1,4,2,3],[4,1,3,2],[2,3,1,3],[3,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Tetrahedral dodecahedral",params:h([[1,3,2,5],[3,1,3,2],[2,3,1,3],[5,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Cubic octahedral",params:h([[1,3,2,4],[3,1,4,2],[2,4,1,3],[4,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Octahedral Dodcahedral",params:h([[1,3,2,5],[3,1,4,2],[2,4,1,3],[5,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Octahedral Icosahedral",params:h([[1,3,2,5],[3,1,5,2],[2,5,1,3],[5,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," ","Paracompact Hyperbolic Honeycombs"]})},{name:"Triangular",params:h([3,6,3],[1,0,0,0],null,{grouper:"toddcoxeter",easing:"quintic",segments:32})},{name:"Hexagonal",params:h([6,3,3],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Order-6 tetrahedral",params:h([3,3,6],[1,0,0,0],null,{grouper:"toddcoxeter",easing:"quintic",segments:32})},{name:"Alternated Order-6 cubic",params:h([[1,2,3,2],[2,1,3,2],[3,3,1,6],[2,2,6,1]],[1,0,0,0],null,{grouper:"toddcoxeter",easing:"quintic",segments:32})},{name:"Order-5 hexagonal",params:h([6,3,5],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-5 hexagonal",params:h([[1,2,3,2],[2,1,3,2],[3,3,1,5],[2,2,5,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Order-6 hexagonal",params:h([6,3,6],[0,0,0,1],null,{grouper:"toddcoxeter",easing:"quintic",segments:32})},{name:"Square",params:h([4,4,3],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated square",params:h([[1,2,4,2],[2,1,4,2],[4,4,1,3],[2,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Order-4 square",params:h([4,4,4],[0,1,0,0],null,{grouper:"toddcoxeter"})},{name:"Tetrahedral square",params:h([[1,4,2,4],[4,1,3,2],[2,3,1,3],[4,2,3,1]],[0,1,0,0],null,{grouper:"toddcoxeter"})},{name:"Cubic square",params:h([[1,4,2,4],[4,1,3,2],[2,3,1,4],[4,2,4,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Quarter order square",params:h([[1,4,2,4],[4,1,4,2],[2,4,1,4],[4,2,4,1]],[1,0,0,0],null,{grouper:"toddcoxeter",easing:"quintic",segments:32})},{name:"Tetrahedral Hexagonal",params:h([[1,3,2,6],[3,1,3,2],[2,3,1,3],[6,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Octahedral Hexagonal",params:h([[1,3,2,6],[3,1,4,2],[2,4,1,3],[6,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Icosahedral Hexagonal",params:h([[1,3,2,6],[3,1,5,2],[2,5,1,3],[6,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Hexagonal Triangular",params:h([[1,3,2,6],[3,1,6,2],[2,6,1,3],[6,2,3,1]],[0,0,0,1],null,{grouper:"toddcoxeter",easing:"quintic",segments:32})},{name:"Alternated Hexagonal",params:h([[1,3,3,2],[3,1,3,2],[3,3,1,3],[2,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-4 Hexagonal",params:h([[1,3,3,2],[3,1,3,2],[3,3,1,4],[2,2,4,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-5 Hexagonal",params:h([[1,3,3,2],[3,1,3,2],[3,3,1,5],[2,2,5,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Runcic Order-6 Hexagonal",params:h([[1,3,3,2],[3,1,3,2],[3,3,1,6],[2,2,6,1]],[1,0,0,1],null,{grouper:"toddcoxeter"})},{name:"Quarter Order-4 hexagonal",params:h([[1,3,3,2],[3,1,3,3],[3,3,1,3],[2,3,3,1]],[1,1,0,0],null,{grouper:"toddcoxeter"})},{name:"Hexagonal",params:h([[1,3,3,3],[3,1,3,3],[3,3,1,3],[3,3,3,1]],[1,1,1,1],null,{grouper:"toddcoxeter"})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"lorentzian",level:2,dimensions:4})," ","Level-2 Lorentzian Hyperbolic Honeycombs"]})},{name:"3-3-7",params:h([3,3,7],[1,0,0,0],null,{grouper:"toddcoxeter",segments:64})},{name:"3-4-7",params:h([3,3,7],[1,0,0,0],null,{grouper:"toddcoxeter",segments:64})},{name:"3-5-7",params:h([3,5,7],[1,0,0,0],null,{grouper:"toddcoxeter",segments:64})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",dimensions:5})," Compact Hyperbolic 4-Honeycombs"]})},{name:"Order-5 5-cell",params:h([3,3,3,5],[1,0,0,0,0])},{name:"120-cell",params:h([5,3,3,3],[1,0,0,0,0])},{name:"Order-5 tesseratic",params:h([4,3,3,5],[1,0,0,0,0])},{name:"Order-4 120-cell",params:h([4,3,3,5],[1,0,0,0,0])},{name:"Order-5 120-cell",params:h([5,3,3,5],[1,0,0,0,0])},{name:"Small stellated 120-cell",params:h([5,5,3,3],[1,0,0,0,0],[2,1,1,1])},{name:"Pentagrammic-order 600-cell",params:h([3,3,5,5],[1,0,0,0,0],[1,1,1,2])},{name:"Order-5 icosahedral 120-cell",params:h([3,5,5,5],[1,0,0,0,0],[1,1,2,1])},{name:"Great 120-cell",params:h([5,5,5,3],[1,0,0,0,0],[1,2,1,1])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:5})," ","Paracompact Hyperbolic 4-Honeycombs"]})},{name:"Order-4 24-cell",params:h([3,4,3,4],[1,0,0,0,0],null,{easing:"quintic",segments:32})},{name:"Cubic honeycomb",params:h([4,3,4,3],[1,0,0,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:6})," ","Paracompact Hyperbolic 5-Honeycombs"]})},{name:"5-orthoplex",params:h([3,3,3,4,3],[1,0,0,0,0,0],null,{easing:"quintic",segments:32})},{name:"24-cell honeycomb",params:h([3,4,3,3,3],[1,0,0,0,0,0])},{name:"16-cell honeycomb",params:h([3,3,4,3,3],[1,0,0,0,0,0],null,{easing:"quintic",segments:32})},{name:"Order-4 24-cell honeycomb",params:h([3,4,3,3,4],[1,0,0,0,0,0],null,{easing:"quintic",segments:32})},{name:"Tesseratic honeycomb",params:h([4,3,3,4,3],[1,0,0,0,0,0],null,{easing:"quintic",segments:32})}],R=e=>{if(["string","number"].includes(typeof e))return e;if(e instanceof Array)return e.map(R).join("");if(typeof e=="object"&&e)return R(e.props.children)},ae=(e,a)=>typeof e=="string"?R(e).toLowerCase().includes(a.toLowerCase()):!1,cr=p.memo(function e({name:a,params:s,search:o,subforms:c=[],sub:t=!1,onPreset:n}){const[d,f]=p.useState(!0),[u,l]=p.useState(!1);return p.useEffect(()=>{if(!o){f(!0),l(!1);return}if(ae(a,o)){f(!0);return}if(c.length&&c.some(({name:m})=>ae(m,o))){f(!0),l(!0);return}f(!1),l(!1)},[a,o,c]),d?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`preset${t?" sub":""}`,onClick:()=>n(s),children:[r.jsxs("div",{className:`preset-header preset-name-${c.length?"button":"only"}`,children:[c.length?r.jsx("button",{className:`preset-toggle ${u?"open":"closed"}`,onClick:m=>{m.stopPropagation(),l(!u)},children:u?"-":"+"}):null,r.jsx("span",{className:"preset-name",children:a})]}),r.jsx(we,{coxeter:s.coxeter,mirrors:s.mirrors,stellation:s.stellation})]}),u&&c.map((m,j)=>r.jsx(e,{...m,sub:!0,search:o,onPreset:n},j))]}):null}),lr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M7.95 19L3 12l4.95-7H21v14H7.95Zm3.45-3l2.6-2.6l2.6 2.6l1.4-1.4l-2.6-2.6L18 9.4L16.6 8L14 10.6L11.4 8L10 9.4l2.6 2.6l-2.6 2.6l1.4 1.4Z"})}),ir=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M6 17c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6m9-9a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3a3 3 0 0 1 3 3M3 5v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2Z"})}),dr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m-1 1.5L18.5 9H13m-4.07 3.22H16v7.07l-2.12-2.12L11.05 20l-2.83-2.83l2.83-2.82"})}),pr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6L6.4 19Z"})});function mr({open:e,onPreset:a,onExportImage:s,closePresets:o}){const[c,t]=p.useState(""),[n,d]=p.useState(""),f=p.useCallback(u=>{d(u.target.value),ke(t(u.target.value),50)},[]);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`presets-overlay ${e?"shown":"hidden"}`,onClick:o}),r.jsx("div",{className:`presets ${e?"shown":"hidden"}`,children:r.jsxs("div",{className:"presets-modal",children:[r.jsxs("div",{className:"presets-header",children:[r.jsxs("div",{className:"presets-search",children:[r.jsx("input",{type:"text",placeholder:"Search",value:n,onChange:f}),r.jsx("button",{className:"presets-clear",onClick:()=>{t(""),d("")},children:lr})]}),r.jsxs("div",{className:"presets-actions",children:[r.jsx("a",{className:"presets-action",href:"https://florian.mounier.dev/",children:ir}),r.jsx("button",{className:"presets-action",onClick:s,children:dr}),r.jsx("button",{className:"presets-action",onClick:o,children:pr})]})]}),r.jsx("div",{className:"presets-list",children:or.map(({type:u,content:l,name:m,params:j,subforms:O},C)=>r.jsx(p.Fragment,{children:u==="title"?r.jsx("h2",{children:l}):u==="group"?r.jsx("h4",{children:l}):r.jsx(cr,{name:m,params:j,search:c,subforms:O,onPreset:a})},C))})]})})]})}const se=p.memo(function({rotations:a,spaceType:s,axis:o}){if(!s)return null;const c=s.gram.length,t=a.shift*2+o;if(t>=a.combinations.length)return null;let n=a.combinations[t];const d=n.some(l=>l<0)?"parabolic":n.some(l=>s.eigens.values[l]<0)?"hyperbolic":n.some(l=>s.eigens.values[l]===0)?"translation":"spheric",f=Oe.slice(0,c).split(""),u=d==="parabolic"?n.map(l=>f[L(l)]).join("->"):f.filter((l,m)=>!n.includes(m));return r.jsxs("aside",{className:`${o?"y":"x"}-rotation`,children:[u,d==="parabolic"?r.jsx("sup",{children:"∞"}):d==="hyperbolic"?r.jsx("sup",{children:"†"}):d==="translation"?r.jsx("sup",{children:"0"}):""]})});function ur({runtime:e,params:a,rotations:s,updateParams:o,updateRotations:c}){const[t,n]=p.useState("simple"),[d,f]=p.useState(!1),u=p.useCallback(()=>{f(!1)},[]),l=p.useCallback(g=>{let{name:v,value:E}=g.target;o({[v]:E})},[o]),m=p.useCallback((g,v)=>{o({[g]:v})},[o]),j=p.useCallback(()=>n(g=>({simple:"advanced",advanced:"full",full:"empty",empty:"simple"})[g]),[]),O=p.useCallback(g=>{o(g,!0),u()},[o,u]),C=p.useCallback(()=>{const g=G(e.dimensions);g._reset=!0,o({matrix:g})},[o,e.dimensions]),A=p.useCallback(g=>{c("shift",(s.shift+1)%s.maxShift)},[s.maxShift,s.shift,c]),I=p.useCallback(g=>{c("lock",!s.lock)},[s.lock,c]),V=p.useCallback(g=>{c("auto",s.auto==="free"?"damp":"free")},[s.auto,c]),w=p.useCallback(async()=>{const g=window.prompt("Select image resolution","5000x5000");if(!g||!g.includes("x")){console.error("Invalid resolution");return}const[v,E]=g.split("x").map(F=>parseInt(F));if(isNaN(v)||isNaN(E)){console.error("Invalid resolution");return}const S=await(await Ze(()=>import("./export-902100eb.js"),[],import.meta.url)).makeBigPng(e,v,E);if(S){const F=document.createElement("a");document.body.appendChild(F),F.style.display="none";const T=window.URL.createObjectURL(S);F.href=T,F.download=`${document.title}-${v}x${E}`,F.click()}},[e]);return r.jsxs(r.Fragment,{children:[r.jsx(mr,{open:d,onPreset:O,onExportImage:w,closePresets:u}),r.jsxs("div",{className:e.error?"error":"",title:e.error,children:[e.currentOrder<e.order?r.jsxs("aside",{className:"processing-counter",children:[e.currentOrder,"/",e.order]}):null,["simple","advanced","full"].includes(t)?r.jsx("button",{className:"preset-button button",onClick:()=>f(g=>!g),title:"Presets",children:er}):null,["simple","advanced","full"].includes(t)?r.jsxs("aside",{className:"controls",children:[r.jsxs("button",{className:"rotation-button button",onClick:A,title:"Rotation Mode",children:[r.jsx("div",{className:"rotation",style:{transform:`rotate(${s.shift/s.maxShift*360}deg)`},children:Xe}),r.jsx("sup",{children:s.shift+1}),r.jsx(se,{rotations:s,spaceType:e.spaceType,axis:0}),r.jsx(se,{rotations:s,spaceType:e.spaceType,axis:1})]}),r.jsxs("div",{className:"subcontrols",children:[r.jsx("button",{className:"button",onClick:I,children:s.lock?rr:ar}),r.jsx("button",{className:"button anim-view",onClick:V,title:"Animate rotations",children:s.auto==="free"?Ye:s.auto==="damp"?Je:"?"}),!Ce(e.matrix)&&r.jsx("button",{className:"button reset-view",onClick:C,title:"Reset View",children:Qe})]})]}):null,r.jsx("button",{className:`space-button button${e.processing?" processing":""}${t==="empty"?" empty":""}`,onClick:j,children:r.jsx(b,{...e.spaceType||{},dimensions:e.dimensions})}),["advanced","full"].includes(t)&&r.jsxs("aside",{className:"parameters",children:[t==="full"&&r.jsxs("label",{className:"select-label",children:["Grouper",r.jsx("select",{name:"grouper",value:a.grouper,onChange:l,children:Ee.map(g=>r.jsx("option",{value:g,children:g.replace(/_/g," ").replace(/\b./g,v=>v.toUpperCase())},g))})]}),r.jsxs("label",{className:"boolean-label",children:["inCentered",r.jsx(re,{name:"centered",allowNull:!0,value:a.centered,onChange:m})]}),(t==="full"||e.spaceType.curvature<=0)&&r.jsx(z,{name:"order",label:"Precision",min:1,step:1,value:a.order,onChange:m}),r.jsx(z,{name:"segments",label:"Segments",min:1,step:1,value:a.segments,toggler:a.curve,togglerName:"curve",onChange:m}),r.jsxs("label",{className:"select-label",children:["Easing",r.jsx("select",{name:"easing",value:a.easing,onChange:l,children:Te.map(g=>r.jsx("option",{value:g,children:g.replace(/_/g," ").replace(/\b./g,v=>v.toUpperCase())},g))})]}),r.jsx(z,{name:"vertexThickness",label:"Vertices",min:0,step:1,value:a.vertexThickness,toggler:a.showVertices,togglerName:"showVertices",onChange:m}),r.jsx(z,{name:"edgeThickness",label:"Edges",min:0,step:1,value:a.edgeThickness,toggler:a.showEdges,togglerName:"showEdges",onChange:m}),["toddcoxeter","fundamental"].includes(e.grouper)&&r.jsxs("label",{className:"boolean-label",children:["Faces",r.jsx(re,{name:"showFaces",value:a.showFaces,onChange:m})]}),r.jsxs("label",{className:"select-label",children:["Ambiance",r.jsx("select",{name:"ambiance",value:a.ambiance,onChange:l,children:(t==="full"?Object.keys(Q):Object.entries(Q).filter(([g,{extended:v}])=>!v||g===a.ambiance).map(([g])=>g)).map(g=>r.jsx("option",{value:g,children:g.replace(/_/g," ").replace(/./,v=>v.toUpperCase())},g))})]})]}),["advanced","full"].includes(t)&&r.jsxs("aside",{className:"view",children:[r.jsx(z,{name:"msaaSamples",label:"MSAA",min:0,step:1,max:K.msaaSamples,value:a.msaaSamples,toggler:a.msaa,togglerName:"msaa",onChange:m}),t==="full"&&r.jsx(z,{name:"subsampling",label:"subsampling",min:.1,step:.1,value:a.subsampling,onChange:m}),a.dimensions>=3?le(3,a.dimensions+1).map(g=>r.jsxs("div",{className:"projection",children:[r.jsx(z,{label:`${g}D FOV`,name:`fov${g}`,step:1,value:a[`fov${g}`],onChange:m}),r.jsxs("label",{className:"number",children:[r.jsxs("span",{className:"number-label",children:[g,"D Projection"]}),r.jsx("select",{name:`projection${g}`,value:a[`projection${g}`],onChange:l,children:[...Fe.filter((v,E)=>g===3||E<8)].map(v=>r.jsx("option",{value:v,children:v.replace(/_/g," ").replace(/./,E=>E.toUpperCase())},v))})]})]},g)):null]}),["simple","advanced","full"].includes(t)&&r.jsx(Ae,{dimensions:a.dimensions,coxeter:a.coxeter,mirrors:a.mirrors,stellation:a.stellation,extended:a.extended,onChange:m})]})]})}function hr({params:e,updateParams:a}){const[s,o]=p.useState({...e,currentOrder:0,askedOrder:null,spaceType:null,rootNormals:null,rootVertices:null,vertex:[],edge:[],ranges:[],face:[],processing:!0,error:null,renderError:null});p.useEffect(()=>{o(d=>{try{return d.gl?d:Se(d)}catch(f){return console.error(f),{...d,error:f.message}}})},[s.gl]);const[c,t]=p.useState({shift:0,maxShift:0,combinations:[],auto:"damp",lock:!1});p.useEffect(()=>{o(d=>({...d,...U(e).params}))},[e]),p.useEffect(()=>{s.spaceType&&t(d=>({...d,shift:0,...ze(e.dimensions,s.spaceType)}))},[e.dimensions,s.spaceType]),p.useEffect(()=>{o(d=>e.grouper===""&&d.grouper.startsWith("auto-")?d:{...d,grouper:e.grouper})},[e.grouper]);const n=p.useCallback((d,f)=>{t(u=>({...u,[d]:f}))},[t]);return s.gl?r.jsxs("div",{className:s.error||s.renderError?"error":"",title:s.error||s.renderError,children:[r.jsx(ur,{runtime:s,params:e,rotations:c,updateRotations:n,updateParams:a}),r.jsx(We,{runtime:s,rotations:c,setRuntime:o,updateRotations:n,updateParams:a})]}):null}const ne=(e=null)=>{const{location:a}=window;if(a.hash)try{return JSON.parse(atob(a.hash.slice(1)))}catch(s){console.warn(s),a.hash=""}return e},gr=e=>{window.history.pushState(null,null,"#"+btoa(JSON.stringify(e)))},W=(e,a)=>e.length!==a.length?!1:e.every((s,o)=>Array.isArray(s)?W(s,a[o]):s===a[o]),fr=()=>{const[e,a]=p.useState(ne(U(K).params)),s=p.useCallback(c=>{const t=ne();t&&(Object.entries(t).forEach(([n,d])=>{Array.isArray(d)&&W(d,e[n])&&(t[n]=e[n])}),a(t))},[e]),o=p.useCallback((c,t=!1)=>{a(n=>{if(!Object.entries(c).filter(([u,l])=>Array.isArray(l)?!W(l,n[u]):n[u]!==l).length)return n;const{params:d,badParams:f}=U(t?c:{...n,...c},t?[]:Object.keys(c),n);return f.length||gr(d),d})},[]);return p.useEffect(()=>(window.addEventListener("popstate",s),()=>{window.removeEventListener("popstate",s)}),[s]),r.jsx(hr,{params:e,updateParams:o})};Le.createRoot(document.getElementById("root")).render(r.jsx(fr,{}));
