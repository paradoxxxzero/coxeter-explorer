import{r as l,d as z,c as ie,a as de,s as M,m as $,x as U,b as I,P as _,h as pe,u as he,e as ue,f as me,g as H,p as K,i as ge,j as fe,k as xe,l as je,n as ve,o as se,q as R,t as r,v as q,w as ne,C as be,y as we,z as ye,N as S,A as ke,B as Z,D as ae,E as Oe,F as Ce,G as Ee,H as oe,I as Te,J as Fe,K as Le,L as Se,M as Ae}from"./CoxeterDiagram-54367902.js";class Ne extends l.Component{componentDidCatch(s,n){this.props.onError(s,n)}render(){return this.props.error?null:this.props.children}}const G=.95,Q=25,T=(e,s,n,a,c,t,o)=>{M(c,$(U(e,n*2+1,a.combinations,t,o),c)),M(c,$(U(s,n*2,a.combinations,t,o),c))},Ie=(e,s,n,a,c,t)=>{const{code:o}=e,h=.01;if(!(e.altKey||e.ctrlKey||e.metaKey)){if(o==="ArrowLeft"||o==="KeyA")T(-h,0,0,s,n,a,c);else if(o==="ArrowRight"||o==="KeyD")T(h,0,0,s,n,a,c);else if(o==="ArrowUp"||o==="KeyW")T(0,-h,1,s,n,a,c);else if(o==="ArrowDown"||o==="KeyS")T(0,h,1,s,n,a,c);else if(o==="PageUp"||o==="KeyQ")T(-h,0,2,s,n,a,c);else if(o==="PageDown"||o==="KeyE")T(h,0,2,s,n,a,c);else if(o==="Digit1")T(0,-h,2,s,n,a,c);else if(o==="Digit3")T(0,h,2,s,n,a,c);else if(o==="KeyZ")T(-h,0,3,s,n,a,c);else if(o==="KeyC")T(h,0,3,s,n,a,c);else if(o==="ControlLeft")t("shift",(s.shift+1)%s.maxShift);else return;return!0}},Pe=(e,s,n,a)=>{const c=l.useCallback(z(d=>{d._update=!0,a({matrix:d})},100),[]),t=l.useCallback(d=>a({matrix:d}),[]),o=l.useCallback(z(d=>a({zoom:d}),100),[]),h=l.useRef(null),m=l.useRef({pause:new Set,speed:null}),p=l.useRef(e.matrix.map(d=>d.slice()));l.useEffect(()=>{p.current=e.matrix.map(d=>d.slice())},[e.matrix]);const x=l.useCallback(()=>{const d=["vertex","edge","face"];for(let v=0;v<d.length;v++)e.meshes[d[v]].uniforms.matrix.update(ie(p.current))},[e.ambiance,e.camera,e.centered,e.coxeter,e.curvature,e.curve,e.dimensions,e.easing,e.edgeThickness,e.error,e.fov3,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.grouper,e.msaa,e.msaaSamples,e.projection,e.renderError,e.segments,e.showEdges,e.showFaces,e.showVertices,e.spaceType,e.stellation,e.subsampling,e.vertexThickness,e.zoom]);l.useEffect(()=>{m.current.speed=new Array(s.combinations.length).fill(0)},[s.combinations]),l.useEffect(()=>{e.matrix._update||(m.current.speed=new Array(s.combinations.length).fill(0))},[s.combinations.length,e.matrix]),l.useEffect(()=>{const d=()=>{const{pause:v,speed:k}=m.current;let E=!1;for(let C=0;C<k.length;C++)k[C]!==0&&(E=!0,s.auto==="damp"&&(k[C]*=.96,de(k[C])<1e-4&&(k[C]=0,t(p.current))),(s.auto!=="damp"||!v.has(C))&&M(p.current,$(U(k[C],C,s.combinations,e.dimensions,e.curvature),p.current)));E&&(x(),I(e)),h.current!==null&&(h.current=requestAnimationFrame(d))};return s.auto&&(h.current=requestAnimationFrame(d)),()=>{h.current&&(cancelAnimationFrame(h.current),h.current=null),t(p.current)}},[s.auto,s.combinations,e.dimensions,e.curvature,t,x]),l.useEffect(()=>{e.camera.position[2]=-e.zoom,e.camera.update(),e.meshes.updateUniforms(e,!0)},[e.camera,e.zoom]),l.useEffect(()=>{const d=new Map;let v=null,k=null;const E=()=>{const y=d.values(),u=y.next().value,j=y.next().value;return pe(u[0]-j[0],u[1]-j[1])},C=y=>{y.button!==0||y.target.tagName!=="CANVAS"||(s.auto&&(k=performance.now(),m.current.pause.add(s.shift*2),m.current.pause.add(s.shift*2+1),m.current.speed[s.shift*2]=0,m.current.speed[s.shift*2+1]=0),d.set(y.pointerId,[y.clientX,y.clientY]))},P=y=>{if(!d.has(y.pointerId))return;let u=d.get(y.pointerId);const j=[-(y.clientX-u[0])/window.innerHeight,-(y.clientY-u[1])/window.innerHeight];if(s.auto){const A=performance.now(),N=A-k;k=A;const F=[Q*j[0]/N,Q*j[1]/N];m.current.speed[s.shift*2]=F[1],m.current.speed[s.shift*2+1]=F[0]}if(d.set(y.pointerId,[y.clientX,y.clientY]),d.size===2){if(v===null){v=E();return}const A=E();e.camera.position[2]*=v/A,e.camera.update(),e.meshes.updateUniforms(e,!0),v=A,I(e),o(-e.camera.position[2]);return}let O=s.shift;!O&&y.shiftKey?O=1:!O&&y.altKey?O=2:!O&&y.ctrKey?O=3:!O&&y.metaKey&&(O=4),d.size>2&&(O+=d.size-2),T(_*j[0],_*j[1],O,{combinations:s.combinations,auto:s.auto,shift:s.shift},p.current,e.dimensions,e.curvature),x(),c(p.current)},V=y=>{d.has(y.pointerId)&&(s.auto&&(performance.now()-k>100?(m.current.speed[s.shift*2]=0,m.current.speed[s.shift*2+1]=0):s.auto==="free"&&(m.current.speed[s.shift*2]*=.5,m.current.speed[s.shift*2+1]*=.5),m.current.pause.delete(s.shift*2),m.current.pause.delete(s.shift*2+1)),v=null,d.delete(y.pointerId))};return document.addEventListener("pointerdown",C),document.addEventListener("pointermove",P),document.addEventListener("pointerup",V),()=>{document.removeEventListener("pointerdown",C),document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",V)}},[s.auto,s.combinations,s.shift,e.dimensions,e.curvature,e.camera,x,c,o]),l.useEffect(()=>{const d=v=>{v.target===document.body&&Ie(v,s,p.current,e.dimensions,e.curvature,n)&&(x(),c(p.current))};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[x,s,e.curvature,e.dimensions,n,c]),l.useEffect(()=>{const d=v=>{v.target.tagName==="CANVAS"&&(e.camera.position[2]*=v.deltaY<0?G:1/G,e.camera.update(),e.meshes.updateUniforms(e,!0),I(e),o(-e.camera.position[2]))};return document.addEventListener("wheel",d),()=>{document.removeEventListener("wheel",d)}},[e,o]),l.useEffect(()=>{const d=v=>{if(v.button!==0||v.target.tagName!=="CANVAS")return;const k=-e.camera.position[2],E=k<.5?5:k<2?.25:1;e.camera.position[2]=-E,e.camera.update(),e.meshes.updateUniforms(e,!0),I(e),o(E)};return document.addEventListener("dblclick",d),()=>{document.removeEventListener("dblclick",d)}},[e,o])};function Ve({runtime:e,rotations:s,updateRotations:n,updateParams:a}){return Pe(e,s,n,a),null}const He=(e,s)=>{l.useEffect(()=>{s(n=>(he(n),n))},[e.fov3,e.camera,s]),l.useEffect(()=>{s(n=>(n.meshes.updateGeometries(n),n))},[e.curvature,e.curve,e.segments,s]),l.useEffect(()=>{s(n=>(n.meshes.changeArity(n.dimensions),n))},[e.dimensions,s]),l.useEffect(()=>{s(n=>(ue(n),n))},[e.ambiance,e.msaa,e.msaaSamples,s]),l.useEffect(()=>{s(n=>(me(n),n))},[e.ambiance,e.msaa,e.msaaSamples,s]),l.useEffect(()=>{s(n=>(H(n,"vertex"),H(n,"edge"),H(n,"face"),n))},[e.showVertices,e.showEdges,e.showFaces,s]),l.useEffect(()=>{s(n=>{if(!(n.currentOrder<0))try{return K(n,n.currentOrder-1),n}catch(a){return console.error(a),{...n,error:a.message}}})},[e.currentOrder,e.edge,e.face,e.ranges,e.showEdges,e.showFaces,e.showVertices,e.vertex,s]),l.useEffect(()=>{s(n=>(n.meshes.recompilePrograms(n),n))},[e.ambiance,e.dimensions,e.easing,e.projection3,e.projection4,e.projection5,e.projection6,e.projection7,e.projection8,e.projection9,e.spaceType,s]),l.useEffect(()=>{s(n=>{try{return K(n),n}catch(a){return console.error(a),{...n,error:a.message}}})},[e.ambiance,e.showEdges,e.showFaces,e.showVertices,s]),l.useEffect(()=>{s(n=>(n.meshes.updateUniforms(n),n))},[e.ambiance,e.ambiance,e.curvature,e.curve,e.dimensions,e.easing,e.edgeThickness,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.matrix,e.projection3,e.projection4,e.projection5,e.projection6,e.projection7,e.projection8,e.projection9,e.segments,e.spaceType,e.vertexThickness,s]),l.useEffect(()=>{const n=new ResizeObserver(()=>{I(e)});return n.observe(e.gl.canvas,{box:"content-box"}),()=>n.disconnect()},[e.ambiance,e.camera,e.centered,e.coxeter,e.currentOrder,e.curvature,e.curve,e.dimensions,e.easing,e.edge,e.edgeThickness,e.error,e.face,e.fov3,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.grouper,e.matrix,e.msaa,e.msaaSamples,e.projection3,e.projection4,e.projection5,e.projection6,e.projection7,e.projection8,e.projection9,e.ranges,e.renderError,e.segments,e.showEdges,e.showFaces,e.showVertices,e.spaceType,e.stellation,e.subsampling,e.vertexThickness,e.vertex,e.zoom])};function Be({runtime:e,setRuntime:s}){return He(e,s),null}function ze(){return new Worker(""+new URL("knuthbendix-tiling.worker-2e8c36e1.js",import.meta.url).href)}function Me(){return new Worker(""+new URL("toddcoxeter-tiling.worker-1f126888.js",import.meta.url).href)}function $e(){return new Worker(""+new URL("fundamental.worker-836ebbf7.js",import.meta.url).href)}let B=class te{constructor(s,n){this.workerClass=n,this.name=s,this.init(),this.times={}}static uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const n=Math.random()*16|0;return(s==="x"?n:n&3|8).toString(16)})}init(){this.processing=0,this.worker=new this.workerClass}kill(){this.processing>0&&(console.debug(`Killing worker ${this.name} (${this.processing})`),this.worker.terminate(),this.init())}process(s){return s.uuid=te.uuid4(),this.processing++,this.times[s.uuid]=performance.now(),this.worker.postMessage(s),new Promise((n,a)=>{const c=o=>{if(o.data.uuid!==s.uuid)return;const h=performance.now()-this.times[s.uuid];if(delete this.times[s.uuid],console.debug(`Worker ${this.name} took ${h}ms`),this.processing--,this.worker.removeEventListener("message",c),this.worker.removeEventListener("error",t),o.data.error){a(o.data.error);return}n(o.data)},t=o=>{this.worker.removeEventListener("message",c),this.worker.removeEventListener("error",t),!(this.processing<=0)&&(delete this.times[s.uuid],this.processing--,this.processing=ge(0,this.processing),console.error(`Can't call web worker ${this.name}`,o))};this.worker.addEventListener("message",c),this.worker.addEventListener("error",t)})}};const Ue=()=>Object.values(ce).filter(e=>e.processing>0).forEach(e=>e.kill()),ce={knuthbendix:new B("knuthbendix",ze),toddcoxeter:new B("toddcoxeter",Me),fundamental:new B("toddcoxeter",$e)},Y=async(e,s,n)=>{const a=ce[e.grouper.replace(/^auto-/,"")];if(e.currentOrder===0&&(Ue(),s.current=!1),s.current===e.currentOrder){console.log("already processing at ",e.currentOrder);return}try{s.current=e.currentOrder;const{vertices:c,edges:t,faces:o,partials:h,order:m}=await a.process({order:e.currentOrder,coxeter:e.coxeter,curvature:e.curvature,stellation:e.stellation,mirrors:e.mirrors,mirrorsPlanes:e.mirrorsPlanes,rootVertex:e.rootVertex,dimensions:e.dimensions});s.current=!1,n(p=>p.currentOrder!==m?(console.warn("Mismatched order, ignoring",p.currentOrder,m),{...p,currentOrder:0,vertex:[],edge:[],face:[],partial:[],ranges:[],renderError:null,processing:!0,error:"Mismatch Order"}):{...p,ranges:[...p.ranges,{vertex:[p.vertex.length,p.vertex.length+c.length],edge:[p.edge.length,p.edge.length+t.length],face:[p.face.length,p.face.length+o.length]}],vertex:p.vertex.concat(c),edge:p.edge.concat(t),face:p.face.concat(o),partial:h,currentOrder:m+1,processing:!1,error:null})}catch(c){s.current=!1,console.error(c);const t={...e,currentOrder:e.order,error:c.message,processing:!1};n(t)}},De=(e,s)=>{const n=l.useRef(!1);l.useEffect(()=>{s(a=>a.order<a.currentOrder?{...a,currentOrder:a.order}:a)},[e.order,e.currentOrder,s]),l.useEffect(()=>{s(a=>{const c=fe(a.coxeter,a.stellation),t=xe(c);if(!t)return{...a,spaceType:t};const o=t.curvature,h=a.centered==="coxeter";a.centered=h?null:a.centered;const m=a.grouper===""||a.grouper.startsWith("auto-")?"auto-toddcoxeter":a.grouper,p=je(c,o,a.centered===null?m.replace(/^auto-/,"")==="toddcoxeter"&&o<=0||c.some(v=>v.some(k=>k===-1)):a.centered),x=ve(a.mirrors,p,o),d={...a,currentOrder:0,grouper:m,vertex:[],edge:[],face:[],partial:[],ranges:[],spaceType:t,curvature:o,mirrorsPlanes:p,rootVertex:x,renderError:null,processing:!0,error:null};return h&&(d.matrix=se(t,p,a.dimensions),d.centered=null),Y(d,n,s),d})},[e.dimensions,e.coxeter,e.mirrors,e.stellation,e.centered,e.grouper,s]),l.useEffect(()=>{s(a=>{var c;return a.order<=a.currentOrder?a:(c=a.ranges)!=null&&c[a.order]?{...a,currentOrder:a.order,askedOrder:null}:(Y(a,n,s),{...a,error:null,processing:!0})})},[s,e.order,e.currentOrder])};function We({runtime:e,setRuntime:s}){return De(e,s),null}function Re({runtime:e,setRuntime:s,rotations:n,updateRotations:a,updateParams:c}){window.rt=e;const t=l.useCallback(o=>{s(h=>({...h,renderError:o.message}))},[s]);return l.useEffect(()=>()=>{e.curvature!==null&&c({matrix:R(e.dimensions)})},[e.curvature,e.dimensions]),r.jsx(r.Fragment,{children:r.jsxs(Ne,{error:e.renderError,onError:t,children:[r.jsx(We,{runtime:e,setRuntime:s}),r.jsx(Be,{runtime:e,setRuntime:s}),e.curvature!==null?r.jsx(Ve,{runtime:e,rotations:n,updateRotations:a,updateParams:c}):null]})})}const qe="modulepreload",_e=function(e,s){return new URL(e,s).href},J={},Ke=function(s,n,a){if(!n||n.length===0)return s();const c=document.getElementsByTagName("link");return Promise.all(n.map(t=>{if(t=_e(t,a),t in J)return;J[t]=!0;const o=t.endsWith(".css"),h=o?'[rel="stylesheet"]':"";if(!!a)for(let x=c.length-1;x>=0;x--){const d=c[x];if(d.href===t&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${t}"]${h}`))return;const p=document.createElement("link");if(p.rel=o?"stylesheet":qe,o||(p.as="script",p.crossOrigin=""),p.href=t,document.head.appendChild(p),o)return new Promise((x,d)=>{p.addEventListener("load",x),p.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>s()).catch(t=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=t,window.dispatchEvent(o),!o.defaultPrevented)throw t})};function X({allowNull:e,name:s,value:n,onChange:a,...c}){const t=l.useCallback(h=>{let{name:m,checked:p}=h.target,x;e?x=n===!1?!0:n?null:!1:x=p,a(m,x)},[e,a,n]),o=l.useRef(null);return l.useLayoutEffect(()=>{e&&o.current&&(n===null?o.current.indeterminate=!0:o.current.indeterminate=!1)},[n,e]),r.jsx("input",{type:"checkbox",ref:o,name:s,checked:n||!1,onChange:t})}function b({type:e,subtype:s,level:n,dimensions:a}){return r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"space",children:e===null||e==="indefinite"?"𝕏":e==="affine"?"𝔼":e==="finite"?"𝕊":"ℍ"}),a?r.jsx("sup",{children:a-1}):null,e==="hyperbolic"?r.jsxs("sub",{children:[{compact:" ",paracompact:"*",lorentzian:"L",superhyperbolic:"**"}[s],n]}):null]})}const Ze=(...e)=>{if(Array.isArray(e[0]))return{coxeter:e,dimensions:e.length,extended:!0};const s=e.length+1;return{coxeter:new Array(s).fill().map((a,c)=>new Array(s).fill().map((t,o)=>c===o?1:c===o+1||o===c+1?e[ne(c,o)]:2)),dimensions:s}},Ge=(...e)=>{const s=e.length+1;return{stellation:new Array(s).fill().map((a,c)=>new Array(s).fill().map((t,o)=>c===o?1:c===o+1||o===c+1?e[ne(c,o)]:1))}},i=(e,s,n,a)=>{const c=Ze(...e),{dimensions:t}=c,o={...q,...c,showVertices:t<=3,showFaces:t<=4,curve:t>3,grouper:"toddcoxeter",ambiance:"colorful",matrix:R(t),zoom:t<=3?2:t>4?3:5,...a||{}};return s?o.mirrors=s:o.mirrors=new Array(t).fill().map((h,m)=>m===0?1:0),n?o.stellation=Ge(...n).stellation:o.stellation=new Array(t).fill().map((h,m)=>new Array(t).fill(1)),o},w=e=>({...e,subforms:Object.entries(Qe(e.params.dimensions)).map(([s,n])=>({name:`${s} ${e.name}`,params:{...e.params,mirrors:n}}))}),g=(e,s,n,a)=>({...i(e,s,n),ambiance:"plain",showVertices:!1,curve:!0,zoom:1,...a}),L=(e,s,n,a)=>({...i(e,s,n),ambiance:"neon",showFaces:!1,showVertices:!1,grouper:"",edgeThickness:10,zoom:2,...a}),f=(e,s,n,a)=>({...i(e,s,n),ambiance:"neon",showFaces:!1,showVertices:!1,curve:!0,grouper:"",edgeThickness:10,zoom:1.5,...a}),Qe=e=>{if(e===4)return{Rectified:[0,1,0,0],Truncated:[1,1,0,0],Cantellated:[1,0,1,0],Cantitruncated:[1,1,1,0],Runcitruncated:[1,1,0,1],Runcinated:[1,0,0,1],Bitruncated:[0,1,1,0],Omnitruncated:[1,1,1,1]};if(e===5)return{Rectified:[0,1,0,0,0],Birectified:[0,0,1,0,0],Truncated:[1,1,0,0,0],Cantellated:[1,0,1,0,0],Runcinated:[1,0,0,1,0],Stericated:[1,0,0,0,1],Omnitruncated:[1,1,1,1,1]};if(e===6)return{Rectified:[0,1,0,0,0,0],Birectified:[0,0,1,0,0,0],Truncated:[1,1,0,0,0,0],Bitruncated:[0,1,1,0,0,0],Tritruncated:[0,0,1,1,0,0],Cantellated:[1,0,1,0,0,0],Bicantellated:[0,1,0,1,0,0],Runcinated:[1,0,0,1,0,0],Biruncinated:[0,1,0,0,1,0],Stericated:[1,0,0,0,1,0],Pentellated:[1,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1]};if(e===7)return{Rectified:[0,1,0,0,0,0,0],Birectified:[0,0,1,0,0,0,0],Truncated:[1,1,0,0,0,0,0],Bitruncated:[0,1,1,0,0,0,0],Tritruncated:[0,0,1,1,0,0,0],Cantellated:[1,0,1,0,0,0,0],Bicantellated:[0,1,0,1,0,0,0],Runcinated:[1,0,0,1,0,0,0],Biruncinated:[0,1,0,0,1,0,0],Stericated:[1,0,0,0,1,0,0],Pentellated:[1,0,0,0,0,1,0],Hexicated:[1,0,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1,1]};if(e===8)return{Rectified:[0,1,0,0,0,0,0,0],Birectified:[0,0,1,0,0,0,0,0],Truncated:[1,1,0,0,0,0,0,0],Bitruncated:[0,1,1,0,0,0,0,0],Tritruncated:[0,0,1,1,0,0,0,0],Quadritruncated:[0,0,0,1,1,0,0,0],Cantellated:[1,0,1,0,0,0,0,0],Bicantellated:[0,1,0,1,0,0,0,0],Tricantellated:[0,0,1,0,1,0,0,0],Runcinated:[1,0,0,1,0,0,0,0],Biruncinated:[0,1,0,0,1,0,0,0],Triruncinated:[0,0,1,0,0,1,0,0],Stericated:[1,0,0,0,1,0,0,0],Pentellated:[1,0,0,0,0,1,0,0],Hexicated:[1,0,0,0,0,0,1,0],Heptellated:[1,0,0,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1,1,1]};if(e===9)return{Rectified:[0,1,0,0,0,0,0,0,0],Birectified:[0,0,1,0,0,0,0,0,0],Truncated:[1,1,0,0,0,0,0,0,0],Bitruncated:[0,1,1,0,0,0,0,0,0],Tritruncated:[0,0,1,1,0,0,0,0,0],Quadritruncated:[0,0,0,1,1,0,0,0,0],Cantellated:[1,0,1,0,0,0,0,0,0],Bicantellated:[0,1,0,1,0,0,0,0,0],Tricantellated:[0,0,1,0,1,0,0,0,0],Runcinated:[1,0,0,1,0,0,0,0,0],Biruncinated:[0,1,0,0,1,0,0,0,0],Triruncinated:[0,0,1,0,0,1,0,0,0],Stericated:[1,0,0,0,1,0,0,0,0],Pentellated:[1,0,0,0,0,1,0,0,0],Hexicated:[1,0,0,0,0,0,1,0,0],Heptellated:[1,0,0,0,0,0,0,1,0],Octellated:[1,0,0,0,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1,1,1,1]}},Ye=[{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx("span",{style:{color:"orange"},children:"★"})," Highlights"]})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:4})," Tesseract"]}),params:i([4,3,3],[1,0,0,0],null,{showVertices:!0,vertexThickness:150,showFaces:!0,curve:!0,ambiance:"neon",centered:!1,zoom:4.2})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",dimensions:3})," 7-3-2 tiling"]}),params:g([7,3],[1,0,0],null,{showVertices:!1,showFaces:!0,curve:!0,ambiance:"neon"})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:3})," Ideal triangles"]}),params:g([[1,0,0],[0,1,0],[0,0,1]],[1,1,1],null,{grouper:"fundamental",showVertices:!1,showFaces:!0,curve:!0,segments:64,easing:"quartic",ambiance:"neon"})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:8})," E8 lattice (4",r.jsx("sub",{children:"21"}),")"]}),params:i([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[0,0,0,0,0,0,0,1],null,{edgeThickness:1,curve:!1,ambiance:"neon",projection3:"orthographic",projection4:"orthographic",projection5:"orthographic",projection6:"orthographic",projection7:"orthographic",projection8:"orthographic",order:20,zoom:1,centered:"coxeter"})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," Ideal tetrahedron"]}),params:g([3,3,6],[1,0,0,""],null,{showVertices:!1,showFaces:!0,curve:!0,order:1,centered:!1,segments:64,easing:"quartic",ambiance:"pure"})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," ","Horoball"]}),params:g([6,3,4],[1,0,0,""],null,{showVertices:!1,showFaces:!0,curve:!0,order:20,centered:!1,ambiance:"colorful"})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",dimensions:4})," 5-3-4 honeycomb"]}),params:f([5,3,4],[1,0,0,0],null,{zoom:1.5})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"lorentzian",level:2,dimensions:4})," ","7-3-3 paracompact honeycomb"]}),params:f([7,3,3],[1,0,0,0],null,{zoom:1.5,showFaces:!0,showVertices:!0,segments:16})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," Ideal Pentahedron"]}),params:g([5,3,6],[1,0,0,""],null,{showVertices:!1,showFaces:!0,curve:!0,order:1,centered:!1,segments:32,easing:"quartic",ambiance:"pure",zoom:1.5})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:4})," Flat Torus"]}),params:i([32,2,32],[1,0,0,1],null,{showVertices:!1,showFaces:!1,curve:!0,ambiance:"neon",zoom:3,edgeThickness:5})},{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite"})," Spherical space"]})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:3})," Polyedra"]})},{name:"Tetrahedron",params:i([3,3]),subforms:[{name:"Truncated Tetrahedron",params:i([3,3],[1,1,0])}]},{name:"Cube",params:i([4,3]),subforms:[{name:"Cuboctahedron",params:i([4,3],[0,1,0])},{name:"Truncated Cube",params:i([4,3],[1,1,0])},{name:"Rhombicuboctahedron",params:i([4,3],[1,0,1])},{name:"Truncated Octahedron",params:i([3,4],[1,1,0])},{name:"Truncated Cuboctahedron",params:i([4,3],[1,1,1])},{name:"Octahedron",params:i([3,4])}]},{name:"Dodecahedron",params:i([5,3]),subforms:[{name:"Icosidodecahedron",params:i([5,3],[0,1,0])},{name:"Truncate Dodecahedron",params:i([5,3],[1,1,0])},{name:"Rhombicosidodecahedron",params:i([5,3],[1,0,1])},{name:"Truncate Icosahedron",params:i([3,5],[1,1,0])},{name:"Truncated Icosidodecahedron",params:i([5,3],[1,1,1])},{name:"Icosahedron",params:i([3,5])}]},{name:"Snub Cube",params:i([4,3],["s","s","s"])},{name:"Snub Dodecahedron",params:i([5,3],["s","s","s"])},{name:"Great Dodecahedron",params:i([5,5],[1,0,0],[1,2])},{name:"Great Icosahedron",params:i([3,5],[1,0,0],[1,2])},{name:"Small Stellated Dodecahedron",params:i([5,5],[1,0,0],[2,1])},{name:"Great Stellated Dodecahedron",params:i([5,3],[1,0,0],[2,1])},{name:"Stellated Octahedron",params:i([2,2],["ß","ß","ß"])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:4})," Polychora"]})},w({name:"5-cell",params:i([3,3,3])}),w({name:"8-cell",params:i([4,3,3])}),w({name:"16-cell",params:i([3,3,4])}),w({name:"24-cell",params:i([3,4,3])}),w({name:"120-cell",params:i([5,3,3])}),w({name:"600-cell",params:i([3,3,5])}),{name:"Snub 24-cell",params:i([3,4,3],["s","s",0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:5})," Polytera"]})},w({name:"5-simplex",params:i([3,3,3,3])}),w({name:"5-cube",params:i([4,3,3,3])}),w({name:"5-orthoplex",params:i([3,3,3,4])}),w({name:"5-demicube",params:i([[1,2,3,2,2],[2,1,3,2,2],[3,3,1,3,2],[2,2,3,1,3],[2,2,2,3,1]])}),{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:6})," Polypeta"]})},w({name:"6-simplex",params:i([3,3,3,3,3])}),w({name:"6-cube",params:i([4,3,3,3,3])}),w({name:"6-orthoplex",params:i([3,3,3,3,4])}),w({name:"6-demicube",params:i([[1,2,3,2,2,2],[2,1,3,2,2,2],[3,3,1,3,2,2],[2,2,3,1,3,2],[2,2,2,3,1,3],[2,2,2,2,3,1]])}),{name:r.jsxs(r.Fragment,{children:["2",r.jsx("sub",{children:"21"})]}),params:i([[1,3,2,2,2,2],[3,1,3,2,2,2],[2,3,1,3,3,2],[2,2,3,1,2,2],[2,2,3,2,1,3],[2,2,2,2,3,1]],[1,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["1",r.jsx("sub",{children:"22"})]}),params:i([[1,3,2,2,2,2],[3,1,3,2,2,2],[2,3,1,3,3,2],[2,2,3,1,2,2],[2,2,3,2,1,3],[2,2,2,2,3,1]],[0,0,0,1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:7})," Polyexa"]})},w({name:"7-simplex",params:i([3,3,3,3,3,3])}),w({name:"7-cube",params:i([4,3,3,3,3,3])}),w({name:"7-orthoplex",params:i([3,3,3,3,3,4])}),w({name:"7-demicube",params:i([[1,2,3,2,2,2,2],[2,1,3,2,2,2,2],[3,3,1,3,2,2,2],[2,2,3,1,3,2,2],[2,2,2,3,1,3,2],[2,2,2,2,3,1,3],[2,2,2,2,2,3,1]])}),{name:r.jsxs(r.Fragment,{children:["3",r.jsx("sub",{children:"21"})]}),params:i([[1,3,2,2,2,2,2],[3,1,3,2,2,2,2],[2,3,1,3,2,2,2],[2,2,3,1,3,3,2],[2,2,2,3,1,2,2],[2,2,2,3,2,1,3],[2,2,2,2,2,3,1]],[1,0,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["2",r.jsx("sub",{children:"31"})]}),params:i([[1,3,2,2,2,2,2],[3,1,3,2,2,2,2],[2,3,1,3,2,2,2],[2,2,3,1,3,3,2],[2,2,2,3,1,2,2],[2,2,2,3,2,1,3],[2,2,2,2,2,3,1]],[0,0,0,0,0,0,1])},{name:r.jsxs(r.Fragment,{children:["1",r.jsx("sub",{children:"32"})]}),params:i([[1,3,2,2,2,2,2],[3,1,3,2,2,2,2],[2,3,1,3,2,2,2],[2,2,3,1,3,3,2],[2,2,2,3,1,2,2],[2,2,2,3,2,1,3],[2,2,2,2,2,3,1]],[0,0,0,0,1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:8})," Polyzetta"]})},w({name:"8-simplex",params:i([3,3,3,3,3,3,3])}),w({name:"8-cube",params:i([4,3,3,3,3,3,3])}),w({name:"8-orthoplex",params:i([3,3,3,3,3,3,4])}),w({name:"8-demicube",params:i([[1,2,3,2,2,2,2,2],[2,1,3,2,2,2,2,2],[3,3,1,3,2,2,2,2],[2,2,3,1,3,2,2,2],[2,2,2,3,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]])}),{name:r.jsxs(r.Fragment,{children:["1",r.jsx("sub",{children:"42"})]}),params:i([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[0,0,1,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["2",r.jsx("sub",{children:"41"})]}),params:i([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[1,0,0,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["4",r.jsx("sub",{children:"21"})]}),params:i([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[0,0,0,0,0,0,0,1])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:9}),"Polyyotta"]})},w({name:"9-simplex",params:i([3,3,3,3,3,3,3,3])}),w({name:"9-cube",params:i([4,3,3,3,3,3,3,3])}),w({name:"9-orthoplex",params:i([3,3,3,3,3,3,3,4])}),w({name:"9-demicube",params:i([[1,2,3,2,2,2,2,2,2],[2,1,3,2,2,2,2,2,2],[3,3,1,3,2,2,2,2,2],[2,2,3,1,3,2,2,2,2],[2,2,2,3,1,3,2,2,2],[2,2,2,2,3,1,3,2,2],[2,2,2,2,2,3,1,3,2],[2,2,2,2,2,2,3,1,3],[2,2,2,2,2,2,2,3,1]])}),{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine"})," Euclidean space"]})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:3})," Tilings"]})},{name:"Triangle",params:i([[1,3,3],[3,1,3],[3,3,1]],[1,0,0])},{name:"Square",params:i([4,4],[1,0,0])},{name:"Hexagonal",params:i([6,3],[1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:4})," Honeycombs"]})},{name:"Cubic",params:L([4,3,4],[1,0,0,0])},{name:"Octet",params:L([[1,3,2,2],[3,1,3,4],[2,3,1,2],[2,4,2,1]],[1,0,0,0])},{name:"Quarter cubic",params:L([[1,3,2,3],[3,1,3,2],[2,3,1,3],[3,2,3,1]],[1,0,0,1])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:5})," 4-Honeycombs"]})},{name:"Tesseractic",params:L([4,3,3,4],[1,0,0,0,0])},{name:"16-cellic",params:L([3,3,4,3],[1,0,0,0,0],null,{grouper:"toddcoxeter"})},{name:"24-cellic",params:L([3,4,3,3],[1,0,0,0,0],null,{grouper:"toddcoxeter"})},{name:"4-simpletic",params:L([[1,3,2,2,3],[3,1,3,2,2],[2,3,1,3,2],[2,2,3,1,3],[3,2,2,3,1]],[1,0,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Quarter tesseractic",params:L([[1,2,3,2,2],[2,1,3,2,2],[3,3,1,3,3],[2,2,3,1,2],[2,2,3,2,1]],[1,0,0,1,0],null,{grouper:"toddcoxeter"})},{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic"})," Hyperbolic space"]})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",dimensions:3})," Tilings"]})},{name:"Order-7 triangular",params:g([3,7],[1,0,0])},{name:"Order-8 triangular",params:g([3,8],[1,0,0])},{name:"Infinite Order triangular",params:g([3,0],[1,0,0])},{name:"Order-5 square",params:g([4,5],[1,0,0])},{name:"Order-6 square",params:g([4,6],[1,0,0])},{name:"Order-7 square",params:g([4,7],[1,0,0])},{name:"Order-8 square",params:g([4,8],[1,0,0])},{name:"Infinite Order square",params:g([4,0],[1,0,0])},{name:"Order-4 pentagonal",params:g([5,4],[1,0,0])},{name:"Order-5 pentagonal",params:g([5,5],[1,0,0])},{name:"Order-6 pentagonal",params:g([5,6],[1,0,0])},{name:"Order-7 pentagonal",params:g([5,7],[1,0,0])},{name:"Order-8 pentagonal",params:g([5,8],[1,0,0])},{name:"Infinite Order pentagonal",params:g([5,0],[1,0,0])},{name:"Order-4 hexagonal",params:g([6,4],[1,0,0])},{name:"Order-5 hexagonal",params:g([6,5],[1,0,0])},{name:"Order-6 hexagonal",params:g([6,6],[1,0,0])},{name:"Order-7 hexagonal",params:g([6,7],[1,0,0])},{name:"Order-8 hexagonal",params:g([6,8],[1,0,0])},{name:"Infinite Order hexagonal",params:g([6,0],[1,0,0])},{name:"Order-3 heptagonal",params:g([7,3],[1,0,0])},{name:"Order-4 heptagonal",params:g([7,4],[1,0,0])},{name:"Order-5 heptagonal",params:g([7,5],[1,0,0])},{name:"Order-6 heptagonal",params:g([7,6],[1,0,0])},{name:"Order-7 heptagonal",params:g([7,7],[1,0,0])},{name:"Order-8 heptagonal",params:g([7,8],[1,0,0])},{name:"Infinite Order heptagonal",params:g([7,0],[1,0,0])},{name:"Order-3 octagonal",params:g([8,3],[1,0,0])},{name:"Order-4 octagonal",params:g([8,4],[1,0,0])},{name:"Order-5 octagonal",params:g([8,5],[1,0,0])},{name:"Order-6 octagonal",params:g([8,6],[1,0,0])},{name:"Order-7 octagonal",params:g([8,7],[1,0,0])},{name:"Order-8 octagonal",params:g([8,8],[1,0,0])},{name:"Infinite Order octagonal",params:g([8,0],[1,0,0])},{name:"Order-3 apeirogonal",params:g([0,3],[1,0,0])},{name:"Order-4 apeirogonal",params:g([0,4],[1,0,0])},{name:"Order-5 apeirogonal",params:g([0,5],[1,0,0])},{name:"Order-6 apeirogonal",params:g([0,6],[1,0,0])},{name:"Order-7 apeirogonal",params:g([0,7],[1,0,0])},{name:"Order-8 apeirogonal",params:g([0,8],[1,0,0])},{name:"Infinite Order apeirogonal",params:g([0,0],[1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"compact",dimensions:4})," Honeycombs compacts"]})},{name:"Icosahedral",params:f([3,5,3],[1,0,0,0])},{name:"Order-4 dodecahedral",params:f([5,3,4],[1,0,0,0])},{name:"Order-5 dodecahedral",params:f([5,3,5],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-5 cubic",params:f([[1,2,3,2],[2,1,3,2],[3,3,1,5],[2,2,5,1]],[1,0,0,0])},{name:"Tetrahedral cubic",params:f([[1,4,2,3],[4,1,3,2],[2,3,1,3],[3,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Tetrahedral dodecahedral",params:f([[1,3,2,5],[3,1,3,2],[2,3,1,3],[5,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Cubic octahedral",params:f([[1,3,2,4],[3,1,4,2],[2,4,1,3],[4,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Octahedral Dodcahedral",params:f([[1,3,2,5],[3,1,4,2],[2,4,1,3],[5,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Octahedral Icosahedral",params:f([[1,3,2,5],[3,1,5,2],[2,5,1,3],[5,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," ","Honeycombs paracompacts"]})},{name:"Triangular",params:f([3,6,3],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Hexagonal",params:f([6,3,3],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Order-6 tetrahedral",params:f([3,3,6],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-6 cubic",params:f([[1,2,3,2],[2,1,3,2],[3,3,1,6],[2,2,6,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Order-5 hexagonal",params:f([6,3,5],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-5 hexagonal",params:f([[1,2,3,2],[2,1,3,2],[3,3,1,5],[2,2,5,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Order-6 hexagonal",params:f([6,3,6],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Square",params:f([4,4,3],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated square",params:f([[1,2,4,2],[2,1,4,2],[4,4,1,3],[2,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Order-4 square",params:f([4,4,4],[0,1,0,0],null,{grouper:"toddcoxeter"})},{name:"Tetrahedral square",params:f([[1,4,2,4],[4,1,3,2],[2,3,1,3],[4,2,3,1]],[0,1,0,0],null,{grouper:"toddcoxeter"})},{name:"Cubic square",params:f([[1,4,2,4],[4,1,3,2],[2,3,1,4],[4,2,4,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Quarter order square",params:f([[1,4,2,4],[4,1,4,2],[2,4,1,4],[4,2,4,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Tetrahedral Hexagonal",params:f([[1,3,2,6],[3,1,3,2],[2,3,1,3],[6,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Octahedral Hexagonal",params:f([[1,3,2,6],[3,1,4,2],[2,4,1,3],[6,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Icosahedral Hexagonal",params:f([[1,3,2,6],[3,1,5,2],[2,5,1,3],[6,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Hexagonal Triangular",params:f([[1,3,2,6],[3,1,6,2],[2,6,1,3],[6,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Hexagonal",params:f([[1,3,3,2],[3,1,3,2],[3,3,1,3],[2,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-4 Hexagonal",params:f([[1,3,3,2],[3,1,3,2],[3,3,1,4],[2,2,4,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-5 Hexagonal",params:f([[1,3,3,2],[3,1,3,2],[3,3,1,5],[2,2,5,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Runcic Order-6 Hexagonal",params:f([[1,3,3,2],[3,1,3,2],[3,3,1,6],[2,2,6,1]],[1,0,0,1],null,{grouper:"toddcoxeter"})},{name:"Quarter Order-4 hexagonal",params:f([[1,3,3,2],[3,1,3,3],[3,3,1,3],[2,3,3,1]],[1,1,0,0],null,{grouper:"toddcoxeter"})},{name:"Hexagonal",params:f([[1,3,3,3],[3,1,3,3],[3,3,1,3],[3,3,3,1]],[1,1,1,1],null,{grouper:"toddcoxeter"})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"lorentzian",level:2,dimensions:4})," ","Honeycombs lorentzians"]})},{name:"3-3-7",params:f([3,3,7],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"3-4-7",params:f([3,3,7],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"3-5-7",params:f([3,5,7],[1,0,0,0],null,{grouper:"toddcoxeter"})}],D=e=>{if(["string","number"].includes(typeof e))return e;if(e instanceof Array)return e.map(D).join("");if(typeof e=="object"&&e)return D(e.props.children)},ee=(e,s)=>typeof e=="string"?D(e).toLowerCase().includes(s.toLowerCase()):!1,Je=l.memo(function e({name:s,params:n,search:a,subforms:c=[],sub:t=!1,onPreset:o}){const[h,m]=l.useState(!0),[p,x]=l.useState(!1);return l.useEffect(()=>{if(!a){m(!0),x(!1);return}if(ee(s,a)){m(!0);return}if(c.length&&c.some(({name:d})=>ee(d,a))){m(!0),x(!0);return}m(!1),x(!1)},[s,a,c]),h?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`preset${t?" sub":""}`,onClick:()=>o(n),children:[r.jsxs("div",{className:`preset-header preset-name-${c.length?"button":"only"}`,children:[c.length?r.jsx("button",{className:`preset-toggle ${p?"open":"closed"}`,onClick:d=>{d.stopPropagation(),x(!p)},children:p?"-":"+"}):null,r.jsx("span",{className:"preset-name",children:s})]}),r.jsx(be,{coxeter:n.coxeter,mirrors:n.mirrors,stellation:n.stellation})]}),p&&c.map((d,v)=>r.jsx(e,{...d,sub:!0,search:a,onPreset:o},v))]}):null}),Xe=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M7.95 19L3 12l4.95-7H21v14H7.95Zm3.45-3l2.6-2.6l2.6 2.6l1.4-1.4l-2.6-2.6L18 9.4L16.6 8L14 10.6L11.4 8L10 9.4l2.6 2.6l-2.6 2.6l1.4 1.4Z"})}),er=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M6 17c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6m9-9a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3a3 3 0 0 1 3 3M3 5v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2Z"})}),rr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m-1 1.5L18.5 9H13m-4.07 3.22H16v7.07l-2.12-2.12L11.05 20l-2.83-2.83l2.83-2.82"})}),sr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6L6.4 19Z"})});function nr({open:e,onPreset:s,onExportImage:n,closePresets:a}){const[c,t]=l.useState(""),[o,h]=l.useState(""),m=l.useCallback(p=>{h(p.target.value),z(t(p.target.value),50)},[]);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`presets-overlay ${e?"shown":"hidden"}`,onClick:a}),r.jsx("div",{className:`presets ${e?"shown":"hidden"}`,children:r.jsxs("div",{className:"presets-modal",children:[r.jsxs("div",{className:"presets-header",children:[r.jsxs("div",{className:"presets-search",children:[r.jsx("input",{type:"text",placeholder:"Search",value:o,onChange:m}),r.jsx("button",{className:"presets-clear",onClick:()=>{t(""),h("")},children:Xe})]}),r.jsxs("div",{className:"presets-actions",children:[r.jsx("a",{className:"presets-action",href:"https://florian.mounier.dev/",children:er}),r.jsx("button",{className:"presets-action",onClick:n,children:rr}),r.jsx("button",{className:"presets-action",onClick:a,children:sr})]})]}),r.jsx("div",{className:"presets-list",children:Ye.map(({type:p,content:x,name:d,params:v,subforms:k},E)=>r.jsx(l.Fragment,{children:p==="title"?r.jsx("h2",{children:x}):p==="group"?r.jsx("h4",{children:x}):r.jsx(Je,{name:d,params:v,search:c,subforms:k,onPreset:s})},E))})]})})]})}const ar=r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",strokeWidth:"3",children:[r.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"m31.376 13.781l-2.673-7.659c-1.554-4.453-7.852-4.453-9.406 0l-4.56 13.067c-.922 2.644 1.04 5.408 3.841 5.408H24"}),r.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"m15.993 14.24l-8.11.175c-4.716.102-6.663 6.092-2.907 8.946l11.018 8.374c2.23 1.695 5.465.682 6.33-1.982L24 24.597"}),r.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"m11.675 29.012l-2.34 7.767c-1.36 4.517 3.736 8.219 7.611 5.53l11.369-7.892c2.3-1.597 2.337-4.987.071-6.633L24 24.597"}),r.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"m24.39 37.683l6.664 4.625c3.875 2.69 8.971-1.012 7.61-5.53l-3.992-13.25c-.807-2.681-4.02-3.764-6.286-2.118L24 24.597"}),r.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"m36.566 28.27l6.458-4.908c3.756-2.855 1.81-8.845-2.907-8.947l-13.836-.298c-2.8-.06-4.822 2.66-3.956 5.324L24 24.597"})]}),or=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("g",{id:"feTarget0",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:r.jsx("g",{id:"feTarget1",fill:"currentColor",fillRule:"nonzero",children:r.jsx("path",{id:"feTarget2",d:"M19.938 13A8.004 8.004 0 0 1 13 19.938V22h-2v-2.062A8.004 8.004 0 0 1 4.062 13H2v-2h2.062A8.004 8.004 0 0 1 11 4.062V2h2v2.062A8.004 8.004 0 0 1 19.938 11H22v2h-2.062ZM12 18a6 6 0 1 0 0-12a6 6 0 0 0 0 12Zm0-3a3 3 0 1 0 0-6a3 3 0 0 0 0 6Z"})})})}),tr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.56 3.69a9 9 0 0 0-2.92 1.95M3.69 8.56A9 9 0 0 0 3 12m.69 3.44a9 9 0 0 0 1.95 2.92m2.92 1.95A9 9 0 0 0 12 21m3.44-.69a9 9 0 0 0 2.92-1.95m1.95-2.92A9 9 0 0 0 21 12m-.69-3.44a9 9 0 0 0-1.95-2.92m-2.92-1.95A9 9 0 0 0 12 3"})}),cr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 20.777a8.942 8.942 0 0 1-2.48-.969M14 3.223a9.003 9.003 0 0 1 0 17.554m-9.421-3.684a8.961 8.961 0 0 1-1.227-2.592M3.124 10.5c.16-.95.468-1.85.9-2.675l.169-.305m2.714-2.941A8.954 8.954 0 0 1 10 3.223"})}),lr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:r.jsx("path",{fill:"currentColor",d:"M16 6h-6l2.243-2.243C11.11 2.624 9.603 2 8 2s-3.109.624-4.243 1.757C2.624 4.89 2 6.397 2 8s.624 3.109 1.757 4.243A5.961 5.961 0 0 0 8 14a5.963 5.963 0 0 0 4.516-2.049l1.505 1.317a8 8 0 1 1-.364-10.924L16 0v6z"})}),ir=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:r.jsx("path",{fill:"currentColor",d:"M8.065 2.016A.13.13 0 0 0 8.002 2v11.983l6.856.017a.12.12 0 0 0 .066-.017a.162.162 0 0 0 .054-.06a.176.176 0 0 0-.002-.183L8.12 2.073a.146.146 0 0 0-.054-.057zm-1.043-.45a1.13 1.13 0 0 1 1.96 0l6.856 11.667c.458.778-.091 1.767-.98 1.767H1.146c-.889 0-1.437-.99-.98-1.767L7.022 1.566z"})});function dr({runtime:e,params:s,rotations:n,updateParams:a,updateRotations:c}){const[t,o]=l.useState("simple"),[h,m]=l.useState(!1),p=l.useCallback(()=>{m(!1)},[]),x=l.useCallback(u=>{let{name:j,value:O}=u.target;a({[j]:O})},[a]),d=l.useCallback((u,j)=>{a({[u]:j})},[a]),v=l.useCallback(()=>o(u=>({simple:"advanced",advanced:"full",full:"empty",empty:"simple"})[u]),[]),k=l.useCallback(u=>{a(u),p()},[a,p]),E=l.useCallback(()=>{a({matrix:se(e.spaceType,e.mirrorsPlanes,e.dimensions)})},[a,e.spaceType,e.mirrorsPlanes,e.dimensions]),C=l.useCallback(()=>{a({matrix:R(e.dimensions)})},[a,e.dimensions]),P=l.useCallback(u=>{c("shift",(n.shift+1)%n.maxShift)},[n.maxShift,n.shift,c]),V=l.useCallback(u=>{c("auto",n.auto==="free"?"damp":"free")},[n.auto,c]),y=l.useCallback(async()=>{const u=window.prompt("Select image resolution","5000x5000");if(!u||!u.includes("x")){console.error("Invalid resolution");return}const[j,O]=u.split("x").map(F=>parseInt(F));if(isNaN(j)||isNaN(O)){console.error("Invalid resolution");return}const N=await(await Ke(()=>import("./export-902100eb.js"),[],import.meta.url)).makeBigPng(e,j,O);if(N){const F=document.createElement("a");document.body.appendChild(F),F.style.display="none";const le=window.URL.createObjectURL(N);F.href=le,F.download=`${document.title}-${j}x${O}`,F.click()}},[e]);return r.jsxs(r.Fragment,{children:[r.jsx(nr,{open:h,onPreset:k,onExportImage:y,closePresets:p}),r.jsxs("div",{className:e.error?"error":"",title:e.error,children:[e.currentOrder<e.order?r.jsxs("aside",{className:"processing-counter",children:[e.currentOrder,"/",e.order]}):null,["simple","advanced","full"].includes(t)?r.jsx("button",{className:"preset-button button",onClick:()=>m(u=>!u),title:"Presets",children:ir}):null,["simple","advanced","full"].includes(t)?r.jsxs("aside",{className:"controls",children:[r.jsxs("button",{className:"rotation-button button",onClick:P,title:"Rotation Mode",children:[r.jsx("div",{style:{transform:`rotate(${n.shift/n.maxShift*360}deg)`},children:lr}),r.jsx("sup",{children:n.shift+1})]}),r.jsxs("div",{className:"subcontrols",children:[r.jsx("button",{className:"button anim-view",onClick:V,title:"Animate rotations",children:n.auto==="free"?tr:n.auto==="damp"?cr:"?"}),!we(e.matrix)&&r.jsx("button",{className:"button reset-view",onClick:C,title:"Reset View",children:or}),e.curvature>0?r.jsx("button",{className:"button coxeter-plane",onClick:E,title:"CoxeterPlane",children:ar}):null]})]}):null,r.jsx("button",{className:`space-button button${e.processing?" processing":""}${t==="empty"?" empty":""}`,onClick:v,children:r.jsx(b,{...e.spaceType||{},dimensions:e.dimensions})}),["advanced","full"].includes(t)&&r.jsxs("aside",{className:"parameters",children:[(t==="full"||s.grouper!=="")&&r.jsxs("label",{className:"select-label",children:["Grouper",r.jsx("select",{name:"grouper",value:s.grouper,onChange:x,children:ye.map(u=>r.jsx("option",{value:u,children:u===""?s.grouper===""?`Auto [${e.grouper.replace(/^auto-/,"")}]`:"Auto":u.replace(/_/g," ").replace(/\b./g,j=>j.toUpperCase())},u))})]}),(t==="full"||s.grouper)&&r.jsxs("label",{className:"boolean-label",children:["inCentered",r.jsx(X,{name:"centered",allowNull:!0,value:s.centered,onChange:d})]}),(t==="full"||e.curvature<=0)&&r.jsx(S,{name:"order",label:"Precision",min:1,step:1,value:s.order,onChange:d}),r.jsx(S,{name:"segments",label:"Segments",min:1,step:1,value:s.segments,toggler:s.curve,togglerName:"curve",onChange:d}),r.jsxs("label",{className:"select-label",children:["Easing",r.jsx("select",{name:"easing",value:s.easing,onChange:x,children:ke.map(u=>r.jsx("option",{value:u,children:u.replace(/_/g," ").replace(/\b./g,j=>j.toUpperCase())},u))})]}),r.jsx(S,{name:"vertexThickness",label:"Vertices",min:0,step:1,value:s.vertexThickness,toggler:s.showVertices,togglerName:"showVertices",onChange:d}),r.jsx(S,{name:"edgeThickness",label:"Edges",min:0,step:1,value:s.edgeThickness,toggler:s.showEdges,togglerName:"showEdges",onChange:d}),(e.grouper.replace(/^auto-/,"")==="toddcoxeter"||e.grouper==="fundamental")&&r.jsxs("label",{className:"boolean-label",children:["Faces",r.jsx(X,{name:"showFaces",value:s.showFaces,onChange:d})]}),r.jsxs("label",{className:"select-label",children:["Ambiance",r.jsx("select",{name:"ambiance",value:s.ambiance,onChange:x,children:(t==="full"?Object.keys(Z):Object.entries(Z).filter(([u,{extended:j}])=>!j||u===s.ambiance).map(([u])=>u)).map(u=>r.jsx("option",{value:u,children:u.replace(/_/g," ").replace(/./,j=>j.toUpperCase())},u))})]})]}),["advanced","full"].includes(t)&&r.jsxs("aside",{className:"view",children:[r.jsx(S,{name:"msaaSamples",label:"MSAA",min:0,step:1,max:q.msaaSamples,value:s.msaaSamples,toggler:s.msaa,togglerName:"msaa",onChange:d}),t==="full"&&r.jsx(S,{name:"subsampling",label:"subsampling",min:.1,step:.1,value:s.subsampling,onChange:d}),s.dimensions>=3?ae(3,s.dimensions+1).map(u=>r.jsxs("div",{className:"projection",children:[r.jsx(S,{label:`${u}D FOV`,name:`fov${u}`,step:1,value:s[`fov${u}`],onChange:d}),r.jsxs("label",{className:"number",children:[r.jsxs("span",{className:"number-label",children:[u,"D Projection"]}),r.jsx("select",{name:`projection${u}`,value:s[`projection${u}`],onChange:x,children:[...Oe.filter((j,O)=>u===3||O<7)].map(j=>r.jsx("option",{value:j,children:j.replace(/_/g," ").replace(/./,O=>O.toUpperCase())},j))})]})]},u)):null]}),["simple","advanced","full"].includes(t)&&r.jsx(Ce,{dimensions:s.dimensions,coxeter:s.coxeter,mirrors:s.mirrors,stellation:s.stellation,extended:s.extended,onChange:d})]})]})}function pr({params:e,updateParams:s}){const[n,a]=l.useState({...e,currentOrder:0,askedOrder:null,spaceType:null,curvature:null,mirrorsPlanes:null,rootVertex:null,vertex:[],edge:[],ranges:[],face:[],processing:!0,error:null,renderError:null});l.useEffect(()=>{a(h=>{try{return h.gl?h:Ee(h)}catch(m){return console.error(m),{...h,error:m.message}}})},[n.gl]);const[c,t]=l.useState({shift:0,maxShift:0,combinations:[],auto:"damp"});l.useEffect(()=>{a(h=>({...h,...oe({order:e.order,ambiance:e.ambiance,showVertices:e.showVertices,showEdges:e.showEdges,showFaces:e.showFaces,vertexThickness:e.vertexThickness,edgeThickness:e.edgeThickness,projection3:e.projection3,projection4:e.projection4,projection5:e.projection5,projection6:e.projection6,projection7:e.projection7,projection8:e.projection8,projection9:e.projection9,msaa:e.msaa,msaaSamples:e.msaaSamples,subsampling:e.subsampling,matrix:e.matrix,fov3:e.fov3,fov4:e.fov4,fov5:e.fov5,fov6:e.fov6,fov7:e.fov7,fov8:e.fov8,fov9:e.fov9,zoom:e.zoom,curve:e.curve,segments:e.segments,easing:e.easing,dimensions:e.dimensions,coxeter:e.coxeter,mirrors:e.mirrors,stellation:e.stellation,centered:e.centered}).params}))},[e.order,e.ambiance,e.centered,e.coxeter,e.curve,e.dimensions,e.edgeThickness,e.fov3,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.matrix,e.mirrors,e.msaa,e.msaaSamples,e.projection3,e.projection4,e.projection5,e.projection6,e.projection7,e.projection8,e.projection9,e.segments,e.easing,e.showEdges,e.showFaces,e.showVertices,e.stellation,e.subsampling,e.vertexThickness,e.zoom]),l.useEffect(()=>{t(h=>({...h,shift:0,maxShift:~~Te(Fe(e.dimensions,2)/2),combinations:Le(Se(ae(e.dimensions),2)),auto:"damp"}))},[e.dimensions]),l.useEffect(()=>{a(h=>e.grouper===""&&h.grouper.startsWith("auto-")?h:{...h,grouper:e.grouper})},[e.grouper]);const o=l.useCallback((h,m)=>{t(p=>({...p,[h]:m}))},[t]);return n.gl?r.jsxs("div",{className:n.error||n.renderError?"error":"",title:n.error||n.renderError,children:[r.jsx(dr,{runtime:n,params:e,rotations:c,updateRotations:o,updateParams:s}),r.jsx(Re,{runtime:n,rotations:c,setRuntime:a,updateRotations:o,updateParams:s})]}):null}const re=(e=null)=>{const{location:s}=window;if(s.hash)try{return JSON.parse(atob(s.hash.slice(1)))}catch(n){console.warn(n),s.hash=""}return e},hr=e=>{window.history.pushState(null,null,"#"+btoa(JSON.stringify(e)))},W=(e,s)=>e.length!==s.length?!1:e.every((n,a)=>Array.isArray(n)?W(n,s[a]):n===s[a]),ur=()=>{const[e,s]=l.useState(re(q)),n=l.useCallback(c=>{const t=re();t&&(Object.entries(t).forEach(([o,h])=>{Array.isArray(h)&&W(h,e[o])&&(t[o]=e[o])}),s(t))},[e]),a=l.useCallback(c=>{s(t=>{if(!Object.entries(c).filter(([m,p])=>Array.isArray(p)?!W(p,t[m]):t[m]!==p).length)return t;const{params:o,badParams:h}=oe({...t,...c},Object.keys(c));return h.length||hr(o),o})},[]);return l.useEffect(()=>(window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)}),[n]),r.jsx(pr,{params:e,updateParams:a})};Ae.createRoot(document.getElementById("root")).render(r.jsx(ur,{}));
