import{r as p,c as he,u as D,a as L,s as te,m as oe,b as ce,l as B,p as ue,d as $,P,h as ge,e as fe,f as xe,g as _,i as Z,j as je,k as be,n as ve,o as we,q as K,t as r,v as G,w as le,x as ie,C as ye,y as ke,z as Oe,A as Ce,B as Ee,N as z,D as Te,E as Q,F as Fe,G as Ae,H as Se,I as U,J as ze,K as Le}from"./CoxeterDiagram-9c60f94f.js";class Ne extends p.Component{componentDidCatch(a,s){this.props.onError(a,s)}render(){return this.props.error?null:this.props.children}}const I=.95,Ie=.95,Y=10,J=10,de=(e,a,s,o,i,t)=>{const{combinations:n}=s,d=[[],[]],g=(c,m)=>{te(o,oe(ce(c,m,i,t),o))},h=2*a+1>n.length-1?[a*2]:[a*2+1,a*2];for(let c=0;c<h.length;c++){const m=h[c];if(d[c].push(m),s.lock&&n[m][0]>=0&&n[m][1]>=0)for(let j=0;j<n.length;j++)n[j][0]<0||n[j][1]<0||!n[m].some(k=>n[j].includes(k))&&(!(c>0)||j!==h[1-c])&&d[c].push(j)}for(let c=0;c<d.length;c++){const m=d[c];for(let j=0;j<m.length;j++){const k=m[j];g(e[c],n[k])}}return d},Ve=(e,a,s,o,i,t)=>{const{code:n}=e,d=.1;if(e.altKey||e.ctrlKey||e.metaKey)return;const g=(h,c,m)=>de([h,c],m,a,s,o,i);if(n==="ArrowLeft"||n==="KeyA")g(d,0,0);else if(n==="ArrowRight"||n==="KeyD")g(-d,0,0);else if(n==="ArrowUp"||n==="KeyW")g(0,d,0);else if(n==="ArrowDown"||n==="KeyS")g(0,-d,0);else if(n==="PageUp"||n==="KeyQ")g(d,0,1);else if(n==="PageDown"||n==="KeyE")g(-d,0,1);else if(n==="Digit1")g(0,d,1);else if(n==="Digit3")g(0,-d,1);else if(n==="KeyZ")g(d,0,2);else if(n==="KeyC")g(-d,0,2);else if(n==="ControlLeft")t("shift",(a.shift+1)%a.maxShift);else return;return!0},He=(e,a,s,o)=>{const i=p.useRef(null),t=p.useRef({pause:new Set,speed:null,zoom:null}),n=p.useRef({matrix:e.matrix.map(c=>c.slice()),zoom:e.zoom});p.useEffect(()=>{n.current.matrix=e.matrix.map(c=>c.slice())},[e.matrix]),p.useEffect(()=>{n.current.zoom=e.zoom},[e.zoom]);const d=p.useCallback(()=>{if(e.matrix._reset)return;const c=["vertex","edge","face"];for(let m=0;m<c.length;m++)e.meshes[c[m]].uniforms.matrix.update(he(n.current.matrix))},[e.ambiance,e.camera,e.centered,e.coxeter,e.curve,e.dimensions,e.easing,e.edgeThickness,e.error,e.fov3,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.grouper,e.msaa,e.msaaSamples,e.projection,e.renderError,e.segments,e.showEdges,e.showFaces,e.showVertices,e.spaceType,e.stellation,e.subsampling,e.vertexThickness,e.zoom]),g=p.useCallback(()=>{e.matrix._reset||D(e,n.current.zoom)},[e.ambiance,e.camera,e.centered,e.coxeter,e.curve,e.dimensions,e.easing,e.edgeThickness,e.error,e.fov3,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.grouper,e.msaa,e.msaaSamples,e.projection,e.renderError,e.segments,e.showEdges,e.showFaces,e.showVertices,e.spaceType,e.stellation,e.subsampling,e.vertexThickness,e.zoom]);p.useEffect(()=>{t.current.speed=new Array(a.combinations.length).fill(0)},[a.combinations.length]),p.useEffect(()=>{e.matrix._reset&&(delete e.matrix._reset,t.current.speed=new Array(a.combinations.length).fill(0))},[a.combinations.length,e.matrix]);const h=p.useCallback(()=>{const{pause:c,speed:m,zoom:j}=t.current;let k=!1;for(let O=0;O<m.length;O++)m[O]!==0&&(k=!0,a.auto==="damp"&&(m[O]*=Ie,L(m[O])<1e-4&&(m[O]=0)),c.has(O)||te(n.current.matrix,oe(ce(m[O],a.combinations[O],e.dimensions,e.spaceType.metric),n.current.matrix)));if(k&&d(),j){const O=B(n.current.zoom)/B(I),F=B(j)/B(I);n.current.zoom*=ue(I,(F-O)*.05),L(j-n.current.zoom)<j*.001&&(n.current.zoom=j,t.current.zoom=null),k=!0,g()}if(m.reduce((O,F)=>L(O)+L(F),0)===0&&t.current.zoom===null&&!e.matrix._reset){o({matrix:n.current.matrix,zoom:n.current.zoom}),i.current=null;return}k&&$(e),i.current=requestAnimationFrame(h)},[d,a.auto,a.combinations,e.dimensions,e.spaceType]);p.useEffect(()=>{t.current.speed.reduce((w,u)=>L(w)+L(u),0)>0&&(i.current=requestAnimationFrame(h));const c=new Map;let m=null,j=[],k=[];const O=()=>{const w=c.values(),u=w.next().value,v=w.next().value;return ge(u[0]-v[0],u[1]-v[1])},F=w=>{w.button!==0||w.target.tagName!=="CANVAS"||(a.auto&&(j.push(performance.now()),c.size===1?(t.current.pause.delete(a.shift*2),t.current.pause.delete(a.shift*2+1)):(t.current.pause.add(a.shift*2),t.current.pause.add(a.shift*2+1))),c.set(w.pointerId,[w.clientX,w.clientY]))},V=w=>{if(!c.has(w.pointerId))return;let u=c.get(w.pointerId);const v=[-(w.clientX-u[0])/window.innerHeight,-(w.clientY-u[1])/window.innerHeight];if(c.set(w.pointerId,[w.clientX,w.clientY]),c.size===2){if(m===null){m=O(),t.current.zoom=n.current.zoom;return}const S=O();n.current.zoom*=m/S,t.current.zoom=n.current.zoom,m=S,D(e,n.current.zoom),$(e);return}let C=a.shift;!C&&w.shiftKey?C=1:!C&&w.altKey?C=2:!C&&w.ctrKey?C=3:!C&&w.metaKey&&(C=4);const M=de([P*v[0],P*v[1]],C,a,n.current.matrix,e.dimensions,e.spaceType.metric);if(a.auto){j.push(performance.now()),j.length>J&&j.shift(),k.push([Y*P*v[0],Y*P*v[1]]),k.length>J&&k.shift();const S=j.slice(-1)[0]-j[0],T=k.reduce((E,N)=>[E[0]+N[0],E[1]+N[1]],[0,0]);for(let E=0;E<2;E++)for(let N=0;N<M[E].length;N++)t.current.speed[M[E][N]]=T[E]/S;i.current||(i.current=requestAnimationFrame(h))}d()},H=w=>{c.has(w.pointerId)&&(a.auto&&(c.size===1?(k=[],j=[],t.current.pause.delete(a.shift*2),t.current.pause.delete(a.shift*2+1)):(t.current.pause.add(a.shift*2),t.current.pause.add(a.shift*2+1))),m=null,c.delete(w.pointerId))};return document.addEventListener("pointerdown",F),document.addEventListener("pointermove",V),document.addEventListener("pointerup",H),()=>{document.removeEventListener("pointerdown",F),document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",H),i.current&&(cancelAnimationFrame(i.current),i.current=null)}},[a,e.dimensions,e.spaceType,e.camera,h,d]),p.useEffect(()=>{const c=m=>{m.target===document.body&&Ve(m,a,n.current.matrix,e.dimensions,e.spaceType.metric,s)&&(d(),$(e))};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[d,a,e.spaceType,e.dimensions,s]),p.useEffect(()=>{const c=m=>{if(m.target.tagName!=="CANVAS")return;const j=t.current.zoom===null?n.current.zoom:t.current.zoom;t.current.zoom=j*(m.deltaY<0?I:1/I),i.current||(i.current=requestAnimationFrame(h))};return document.addEventListener("wheel",c),()=>{document.removeEventListener("wheel",c)}},[h]),p.useEffect(()=>{const c=m=>{if(m.button!==0||m.target.tagName!=="CANVAS")return;const j=t.current.zoom===null?n.current.zoom:t.current.zoom,k=j<.5?5:j<2?.25:1;t.current.zoom=k,i.current||(i.current=requestAnimationFrame(h))};return document.addEventListener("dblclick",c),()=>{document.removeEventListener("dblclick",c)}},[h])};function Be({runtime:e,rotations:a,updateRotations:s,updateParams:o}){return He(e,a,s,o),null}const Pe=(e,a)=>{p.useEffect(()=>{a(s=>(D(s),s))},[e.fov3,e.camera,e.zoom,a]),p.useEffect(()=>{a(s=>(s.meshes.updateGeometries(s),s))},[e.spaceType,e.curve,e.segments,a]),p.useEffect(()=>{a(s=>(s.meshes.changeArity(s.dimensions),s))},[e.dimensions,a]),p.useEffect(()=>{a(s=>(fe(s),s))},[e.ambiance,e.msaa,e.msaaSamples,a]),p.useEffect(()=>{a(s=>(xe(s),s))},[e.ambiance,e.msaa,e.msaaSamples,a]),p.useEffect(()=>{a(s=>(_(s,"vertex"),_(s,"edge"),_(s,"face"),s))},[e.showVertices,e.showEdges,e.showFaces,a]),p.useEffect(()=>{a(s=>{if(!(s.currentOrder<0))try{return Z(s,s.currentOrder-1),s}catch(o){return console.error(o),{...s,error:o.message}}})},[e.currentOrder,e.edge,e.face,e.ranges,e.showEdges,e.showFaces,e.showVertices,e.vertex,a]),p.useEffect(()=>{a(s=>(s.meshes.recompilePrograms(s),s))},[e.ambiance,e.dimensions,e.easing,e.projection3,e.projection4,e.projection5,e.projection6,e.projection7,e.projection8,e.projection9,e.spaceType,a]),p.useEffect(()=>{a(s=>{try{return Z(s),s}catch(o){return console.error(o),{...s,error:o.message}}})},[e.ambiance,e.showEdges,e.showFaces,e.showVertices,a]),p.useEffect(()=>{a(s=>(s.meshes.updateUniforms(s),s))},[e.ambiance,e.ambiance,e.curve,e.dimensions,e.easing,e.edgeThickness,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.matrix,e.projection3,e.projection4,e.projection5,e.projection6,e.projection7,e.projection8,e.projection9,e.segments,e.spaceType,e.vertexThickness,a]),p.useEffect(()=>{const s=new ResizeObserver(()=>{$(e)});return s.observe(e.gl.canvas,{box:"content-box"}),()=>s.disconnect()},[e.ambiance,e.camera,e.centered,e.coxeter,e.currentOrder,e.curve,e.dimensions,e.easing,e.edge,e.edgeThickness,e.error,e.face,e.fov3,e.fov4,e.fov5,e.fov6,e.fov7,e.fov8,e.fov9,e.grouper,e.matrix,e.msaa,e.msaaSamples,e.projection3,e.projection4,e.projection5,e.projection6,e.projection7,e.projection8,e.projection9,e.ranges,e.renderError,e.segments,e.showEdges,e.showFaces,e.showVertices,e.spaceType,e.stellation,e.subsampling,e.vertexThickness,e.vertex,e.zoom])};function $e({runtime:e,setRuntime:a}){return Pe(e,a),null}function Me(){return new Worker(""+new URL("knuthbendix-tiling.worker-16eb0b1e.js",import.meta.url).href)}function _e(){return new Worker(""+new URL("toddcoxeter-tiling.worker-6a40176f.js",import.meta.url).href)}function qe(){return new Worker(""+new URL("fundamental.worker-12def406.js",import.meta.url).href)}let q=class pe{constructor(a,s){this.workerClass=s,this.name=a,this.init(),this.times={}}static uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const s=Math.random()*16|0;return(a==="x"?s:s&3|8).toString(16)})}init(){this.processing=0,this.worker=new this.workerClass}kill(){this.processing>0&&(console.debug(`Killing worker ${this.name} (${this.processing})`),this.worker.terminate(),this.init())}process(a){return a.uuid=pe.uuid4(),this.processing++,this.times[a.uuid]=performance.now(),this.worker.postMessage(a),new Promise((s,o)=>{const i=n=>{if(n.data.uuid!==a.uuid)return;const d=performance.now()-this.times[a.uuid];if(delete this.times[a.uuid],console.debug(`Worker ${this.name} took ${d}ms`),this.processing--,this.worker.removeEventListener("message",i),this.worker.removeEventListener("error",t),n.data.error){o(n.data.error);return}s(n.data)},t=n=>{this.worker.removeEventListener("message",i),this.worker.removeEventListener("error",t),!(this.processing<=0)&&(delete this.times[a.uuid],this.processing--,this.processing=je(0,this.processing),console.error(`Can't call web worker ${this.name}`,n))};this.worker.addEventListener("message",i),this.worker.addEventListener("error",t)})}};const De=()=>Object.values(me).filter(e=>e.processing>0).forEach(e=>e.kill()),me={knuthbendix:new q("knuthbendix",Me),toddcoxeter:new q("toddcoxeter",_e),fundamental:new q("fundamental",qe)},X=async(e,a,s)=>{const o=me[e.grouper.replace(/^auto-/,"")];if(e.currentOrder===0&&(De(),a.current=!1),a.current===e.currentOrder){console.log("already processing at ",e.currentOrder);return}try{a.current=e.currentOrder;const{vertices:i,edges:t,faces:n,partials:d,order:g}=await o.process({order:e.currentOrder,coxeter:e.coxeter,stellation:e.stellation,metric:e.spaceType.metric,curvature:e.spaceType.curvature,mirrors:e.mirrors,rootNormals:e.rootNormals,rootVertices:e.rootVertices,dimensions:e.dimensions});a.current=!1,s(h=>h.currentOrder!==g?(console.warn("Mismatched order, ignoring",h.currentOrder,g),{...h,currentOrder:0,vertex:[],edge:[],face:[],partial:[],ranges:[],renderError:null,processing:!0,error:"Mismatch Order"}):{...h,ranges:[...h.ranges,{vertex:[h.vertex.length,h.vertex.length+i.length],edge:[h.edge.length,h.edge.length+t.length],face:[h.face.length,h.face.length+n.length]}],vertex:h.vertex.concat(i),edge:h.edge.concat(t),face:h.face.concat(n),partial:d,currentOrder:g+1,processing:!1,error:null})}catch(i){a.current=!1,console.error(i);const t={...e,currentOrder:e.order,error:i.message,processing:!1};s(t)}},Ue=(e,a)=>{const s=p.useRef(!1);p.useEffect(()=>{a(o=>o.order<o.currentOrder?{...o,currentOrder:o.order}:o)},[e.order,e.currentOrder,a]),p.useEffect(()=>{a(o=>{const i=be(o.coxeter,o.stellation),t=ve(i);if(!t)return{...o,spaceType:t};const{vertices:n,normals:d}=we(t,o.centered),g={...o,currentOrder:0,vertex:[],edge:[],face:[],partial:[],ranges:[],spaceType:t,rootNormals:d,rootVertices:n,renderError:null,processing:!0,error:null};return X(g,s,a),g})},[e.dimensions,e.coxeter,e.mirrors,e.stellation,e.centered,e.grouper,a]),p.useEffect(()=>{a(o=>{var i;return o.order<=o.currentOrder?o:(i=o.ranges)!=null&&i[o.order]?{...o,currentOrder:o.order,askedOrder:null}:(X(o,s,a),{...o,error:null,processing:!0})})},[a,e.order,e.currentOrder])};function Re({runtime:e,setRuntime:a}){return Ue(e,a),null}function We({runtime:e,setRuntime:a,rotations:s,updateRotations:o,updateParams:i}){var n;window.rt=e,window.ro=s;const t=p.useCallback(d=>{a(g=>({...g,renderError:d.message}))},[a]);return p.useEffect(()=>()=>{if(e.spaceType&&e.spaceType.curvature!==null){const d=K(e.dimensions);d._reset=!0,i({matrix:d})}},[(n=e.spaceType)==null?void 0:n.curvature]),r.jsx(r.Fragment,{children:r.jsxs(Ne,{error:e.renderError,onError:t,children:[r.jsx(Re,{runtime:e,setRuntime:a}),e.spaceType?r.jsxs(r.Fragment,{children:[r.jsx($e,{runtime:e,setRuntime:a}),r.jsx(Be,{runtime:e,rotations:s,updateRotations:o,updateParams:i})]}):null]})})}const Ke="modulepreload",Ge=function(e,a){return new URL(e,a).href},ee={},Ze=function(a,s,o){if(!s||s.length===0)return a();const i=document.getElementsByTagName("link");return Promise.all(s.map(t=>{if(t=Ge(t,o),t in ee)return;ee[t]=!0;const n=t.endsWith(".css"),d=n?'[rel="stylesheet"]':"";if(!!o)for(let c=i.length-1;c>=0;c--){const m=i[c];if(m.href===t&&(!n||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${t}"]${d}`))return;const h=document.createElement("link");if(h.rel=n?"stylesheet":Ke,n||(h.as="script",h.crossOrigin=""),h.href=t,document.head.appendChild(h),n)return new Promise((c,m)=>{h.addEventListener("load",c),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>a()).catch(t=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=t,window.dispatchEvent(n),!n.defaultPrevented)throw t})},Qe=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("g",{id:"feTarget0",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:r.jsx("g",{id:"feTarget1",fill:"currentColor",fillRule:"nonzero",children:r.jsx("path",{id:"feTarget2",d:"M19.938 13A8.004 8.004 0 0 1 13 19.938V22h-2v-2.062A8.004 8.004 0 0 1 4.062 13H2v-2h2.062A8.004 8.004 0 0 1 11 4.062V2h2v2.062A8.004 8.004 0 0 1 19.938 11H22v2h-2.062ZM12 18a6 6 0 1 0 0-12a6 6 0 0 0 0 12Zm0-3a3 3 0 1 0 0-6a3 3 0 0 0 0 6Z"})})})}),Ye=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.56 3.69a9 9 0 0 0-2.92 1.95M3.69 8.56A9 9 0 0 0 3 12m.69 3.44a9 9 0 0 0 1.95 2.92m2.92 1.95A9 9 0 0 0 12 21m3.44-.69a9 9 0 0 0 2.92-1.95m1.95-2.92A9 9 0 0 0 21 12m-.69-3.44a9 9 0 0 0-1.95-2.92m-2.92-1.95A9 9 0 0 0 12 3"})}),Je=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 20.777a8.942 8.942 0 0 1-2.48-.969M14 3.223a9.003 9.003 0 0 1 0 17.554m-9.421-3.684a8.961 8.961 0 0 1-1.227-2.592M3.124 10.5c.16-.95.468-1.85.9-2.675l.169-.305m2.714-2.941A8.954 8.954 0 0 1 10 3.223"})}),Xe=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",children:r.jsxs("g",{fill:"none",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",d:"M13.326 8.5a6.5 6.5 0 1 1-.558-4.5"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 2v2.5H11"})]})}),er=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:r.jsx("path",{fill:"currentColor",d:"M8.065 2.016A.13.13 0 0 0 8.002 2v11.983l6.856.017a.12.12 0 0 0 .066-.017a.162.162 0 0 0 .054-.06a.176.176 0 0 0-.002-.183L8.12 2.073a.146.146 0 0 0-.054-.057zm-1.043-.45a1.13 1.13 0 0 1 1.96 0l6.856 11.667c.458.778-.091 1.767-.98 1.767H1.146c-.889 0-1.437-.99-.98-1.767L7.022 1.566z"})}),rr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M16 6v1h.75A3.25 3.25 0 0 1 20 10.25v7.5A3.25 3.25 0 0 1 16.75 21h-9.5A3.25 3.25 0 0 1 4 17.75v-7.5A3.25 3.25 0 0 1 7.25 7H8V6a4 4 0 1 1 8 0ZM9.5 6v1h5V6a2.5 2.5 0 0 0-5 0Zm2.5 9.5a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3Z"})}),ar=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M16 5a2.5 2.5 0 0 1 5 0v.25a.75.75 0 0 0 1.5 0V5a4 4 0 0 0-8 0v2H7.25A3.25 3.25 0 0 0 4 10.25v7.5A3.25 3.25 0 0 0 7.25 21h9.5A3.25 3.25 0 0 0 20 17.75v-7.5A3.25 3.25 0 0 0 16.75 7H16V5Zm-4 10.5a1.5 1.5 0 1 1 0-3a1.5 1.5 0 0 1 0 3Z"})});function re({allowNull:e,name:a,value:s,onChange:o,...i}){const t=p.useCallback(d=>{let{name:g,checked:h}=d.target,c;e?c=s===!1?!0:s?null:!1:c=h,o(g,c)},[e,o,s]),n=p.useRef(null);return p.useLayoutEffect(()=>{e&&n.current&&(s===null?n.current.indeterminate=!0:n.current.indeterminate=!1)},[s,e]),r.jsx("input",{type:"checkbox",ref:n,name:a,checked:s||!1,onChange:t})}function b({type:e,subtype:a,level:s,dimensions:o}){return r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"space",children:e===null||e==="indefinite"?"𝕏":e==="affine"?"𝔼":e==="finite"?"𝕊":"ℍ"}),o?r.jsx("sup",{children:o-1}):null,e==="hyperbolic"?r.jsxs("sub",{children:[{compact:" ",paracompact:"*",lorentzian:"L",superhyperbolic:"**"}[a],s]}):null]})}const sr=(...e)=>{if(Array.isArray(e[0]))return{coxeter:e,dimensions:e.length,extended:!0};const a=e.length+1;return{coxeter:new Array(a).fill().map((o,i)=>new Array(a).fill().map((t,n)=>i===n?1:i===n+1||n===i+1?e[ie(i,n)]:2)),dimensions:a}},nr=(...e)=>{const a=e.length+1;return{stellation:new Array(a).fill().map((o,i)=>new Array(a).fill().map((t,n)=>i===n?1:i===n+1||n===i+1?e[ie(i,n)]:1))}},l=(e,a,s,o)=>{const i=sr(...e),{dimensions:t}=i,n={...G,...i,showVertices:t<=3,showFaces:t<=4,curve:t>3,grouper:"toddcoxeter",ambiance:"colorful",matrix:K(t),zoom:t<=3?2:t>4?3:5,centered:!0,...Object.fromEntries(le(3,t+1).map(d=>[`projection${d}`,d===t?"stereographic":"perspective"])),...o||{}};return a?n.mirrors=a:n.mirrors=new Array(t).fill().map((d,g)=>g===0?1:0),s?n.stellation=nr(...s).stellation:n.stellation=new Array(t).fill().map((d,g)=>new Array(t).fill(1)),n},y=e=>({...e,subforms:Object.entries(tr(e.params.dimensions)).map(([a,s])=>({name:`${a} ${e.name}`,params:{...e.params,mirrors:s}}))}),f=(e,a,s,o)=>({...l(e,a,s),ambiance:"plain",showVertices:!1,curve:!0,zoom:1,...o}),A=(e,a,s,o)=>({...l(e,a,s),ambiance:"neon",showFaces:!1,showVertices:!1,grouper:"toddcoxeter",centered:!1,edgeThickness:10,zoom:2,...o}),x=(e,a,s,o)=>({...l(e,a,s),ambiance:"neon",showFaces:!1,showVertices:!1,curve:!0,grouper:"toddcoxeter",centered:!1,edgeThickness:10,zoom:1.5,...o}),tr=e=>{if(e===4)return{Rectified:[0,1,0,0],Truncated:[1,1,0,0],Cantellated:[1,0,1,0],Cantitruncated:[1,1,1,0],Runcitruncated:[1,1,0,1],Runcinated:[1,0,0,1],Bitruncated:[0,1,1,0],Omnitruncated:[1,1,1,1]};if(e===5)return{Rectified:[0,1,0,0,0],Birectified:[0,0,1,0,0],Truncated:[1,1,0,0,0],Cantellated:[1,0,1,0,0],Runcinated:[1,0,0,1,0],Stericated:[1,0,0,0,1],Omnitruncated:[1,1,1,1,1]};if(e===6)return{Rectified:[0,1,0,0,0,0],Birectified:[0,0,1,0,0,0],Truncated:[1,1,0,0,0,0],Bitruncated:[0,1,1,0,0,0],Tritruncated:[0,0,1,1,0,0],Cantellated:[1,0,1,0,0,0],Bicantellated:[0,1,0,1,0,0],Runcinated:[1,0,0,1,0,0],Biruncinated:[0,1,0,0,1,0],Stericated:[1,0,0,0,1,0],Pentellated:[1,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1]};if(e===7)return{Rectified:[0,1,0,0,0,0,0],Birectified:[0,0,1,0,0,0,0],Truncated:[1,1,0,0,0,0,0],Bitruncated:[0,1,1,0,0,0,0],Tritruncated:[0,0,1,1,0,0,0],Cantellated:[1,0,1,0,0,0,0],Bicantellated:[0,1,0,1,0,0,0],Runcinated:[1,0,0,1,0,0,0],Biruncinated:[0,1,0,0,1,0,0],Stericated:[1,0,0,0,1,0,0],Pentellated:[1,0,0,0,0,1,0],Hexicated:[1,0,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1,1]};if(e===8)return{Rectified:[0,1,0,0,0,0,0,0],Birectified:[0,0,1,0,0,0,0,0],Truncated:[1,1,0,0,0,0,0,0],Bitruncated:[0,1,1,0,0,0,0,0],Tritruncated:[0,0,1,1,0,0,0,0],Quadritruncated:[0,0,0,1,1,0,0,0],Cantellated:[1,0,1,0,0,0,0,0],Bicantellated:[0,1,0,1,0,0,0,0],Tricantellated:[0,0,1,0,1,0,0,0],Runcinated:[1,0,0,1,0,0,0,0],Biruncinated:[0,1,0,0,1,0,0,0],Triruncinated:[0,0,1,0,0,1,0,0],Stericated:[1,0,0,0,1,0,0,0],Pentellated:[1,0,0,0,0,1,0,0],Hexicated:[1,0,0,0,0,0,1,0],Heptellated:[1,0,0,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1,1,1]};if(e===9)return{Rectified:[0,1,0,0,0,0,0,0,0],Birectified:[0,0,1,0,0,0,0,0,0],Truncated:[1,1,0,0,0,0,0,0,0],Bitruncated:[0,1,1,0,0,0,0,0,0],Tritruncated:[0,0,1,1,0,0,0,0,0],Quadritruncated:[0,0,0,1,1,0,0,0,0],Cantellated:[1,0,1,0,0,0,0,0,0],Bicantellated:[0,1,0,1,0,0,0,0,0],Tricantellated:[0,0,1,0,1,0,0,0,0],Runcinated:[1,0,0,1,0,0,0,0,0],Biruncinated:[0,1,0,0,1,0,0,0,0],Triruncinated:[0,0,1,0,0,1,0,0,0],Stericated:[1,0,0,0,1,0,0,0,0],Pentellated:[1,0,0,0,0,1,0,0,0],Hexicated:[1,0,0,0,0,0,1,0,0],Heptellated:[1,0,0,0,0,0,0,1,0],Octellated:[1,0,0,0,0,0,0,0,1],Omnitruncated:[1,1,1,1,1,1,1,1,1]}},or=[{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx("span",{style:{color:"orange"},children:"★"})," Highlights"]})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:4})," Tesseract"]}),params:l([4,3,3],[1,0,0,0],null,{showVertices:!0,vertexThickness:150,showFaces:!0,curve:!0,ambiance:"neon",zoom:4.2})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",dimensions:3})," 7-3-2 tiling"]}),params:f([7,3],[1,0,0],null,{showVertices:!1,showFaces:!0,curve:!0,ambiance:"neon"})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:3})," Ideal triangles"]}),params:f([[1,0,0],[0,1,0],[0,0,1]],[1,1,1],null,{grouper:"fundamental",showVertices:!1,showFaces:!0,curve:!0,segments:64,easing:"quartic",ambiance:"neon",centered:!0})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:8})," E6 (1",r.jsx("sub",{children:"22"}),")"]}),params:l([[1,3,2,2,2,2],[3,1,3,2,2,2],[2,3,1,3,3,2],[2,2,3,1,2,2],[2,2,3,2,1,3],[2,2,2,2,3,1]],[0,0,0,1,0,0],null,{vertexThickness:40,edgeThickness:10,ambiance:"colorful",showVertices:!0,projection3:"orthographic",projection4:"orthographic",projection5:"orthographic",projection6:"orthographic",zoom:1,centered:!1})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:8})," E8 (4",r.jsx("sub",{children:"21"}),")"]}),params:l([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[0,0,0,0,0,0,0,1],null,{vertexThickness:30,edgeThickness:1,curve:!1,ambiance:"neon",showVertices:!0,projection3:"orthographic",projection4:"orthographic",projection5:"orthographic",projection6:"orthographic",projection7:"orthographic",projection8:"orthographic",order:14,zoom:1,centered:!1})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," Ideal tetrahedron"]}),params:f([3,3,6],[1,0,0,""],null,{showVertices:!1,showFaces:!0,curve:!0,order:1,centered:!0,segments:64,easing:"quartic",ambiance:"pure"})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," ","Horoball"]}),params:f([6,3,4],[1,0,0,""],null,{showVertices:!1,showFaces:!0,curve:!0,order:20,centered:!1,ambiance:"colorful"})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",dimensions:4})," 5-3-4 honeycomb"]}),params:x([5,3,4],[1,0,0,0],null,{zoom:1.5})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"lorentzian",level:2,dimensions:4})," ","7-3-3 paracompact honeycomb"]}),params:x([7,3,3],[1,0,0,0],null,{zoom:1.5,showFaces:!0,showVertices:!0,segments:16})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," Ideal Pentahedron"]}),params:f([5,3,6],[1,0,0,""],null,{showVertices:!1,showFaces:!0,curve:!0,order:1,centered:!0,segments:32,easing:"quartic",ambiance:"pure",zoom:1.5})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:4})," Flat Torus"]}),params:l([32,2,32],[1,0,0,1],null,{showVertices:!1,showFaces:!1,curve:!0,ambiance:"neon",zoom:3,edgeThickness:5})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:5})," Tesseract stack"]}),params:l([[1,2,2,2,0],[2,1,2,2,2],[2,2,1,2,2],[2,2,2,1,2],[0,2,2,2,1]],[1,1,1,1,0],null,{showVertices:!1,showFaces:!0,ambiance:"neon",edgeThickness:35})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"superhyperbolic",dimensions:4})," ","Ultrahyperbolic surface (Anti-de Sitter Ads3)"]}),params:l([-1,2,-1],[1,0,0,1],null,{showVertices:!1,showFaces:!1,curve:!0,ambiance:"neon",centered:!1,edgeThickness:10,zoom:1})},{name:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"superhyperbolic",dimensions:5})," ","Ultrahyperbolic honeycomb (Anti-de Sitter Ads4)"]}),params:l([-1,3,3,-1],[1,0,0,0,1],null,{showVertices:!1,showFaces:!1,curve:!0,ambiance:"neon",centered:!1,edgeThickness:10,zoom:2})},{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite"})," Spherical space"]})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:3})," Polyedra"]})},{name:"Tetrahedron",params:l([3,3]),subforms:[{name:"Truncated Tetrahedron",params:l([3,3],[1,1,0])}]},{name:"Cube",params:l([4,3]),subforms:[{name:"Cuboctahedron",params:l([4,3],[0,1,0])},{name:"Truncated Cube",params:l([4,3],[1,1,0])},{name:"Rhombicuboctahedron",params:l([4,3],[1,0,1])},{name:"Truncated Octahedron",params:l([3,4],[1,1,0])},{name:"Truncated Cuboctahedron",params:l([4,3],[1,1,1])},{name:"Octahedron",params:l([3,4])}]},{name:"Dodecahedron",params:l([5,3]),subforms:[{name:"Icosidodecahedron",params:l([5,3],[0,1,0])},{name:"Truncate Dodecahedron",params:l([5,3],[1,1,0])},{name:"Rhombicosidodecahedron",params:l([5,3],[1,0,1])},{name:"Truncate Icosahedron",params:l([3,5],[1,1,0])},{name:"Truncated Icosidodecahedron",params:l([5,3],[1,1,1])},{name:"Icosahedron",params:l([3,5])}]},{name:"Snub Cube",params:l([4,3],["s","s","s"])},{name:"Snub Dodecahedron",params:l([5,3],["s","s","s"])},{name:"Great Dodecahedron",params:l([5,5],[1,0,0],[1,2])},{name:"Great Icosahedron",params:l([3,5],[1,0,0],[1,2])},{name:"Small Stellated Dodecahedron",params:l([5,5],[1,0,0],[2,1])},{name:"Great Stellated Dodecahedron",params:l([5,3],[1,0,0],[2,1])},{name:"Stellated Octahedron",params:l([2,2],["ß","ß","ß"])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:4})," Polychora"]})},y({name:"5-cell",params:l([3,3,3])}),y({name:"8-cell",params:l([4,3,3])}),y({name:"16-cell",params:l([3,3,4])}),y({name:"24-cell",params:l([3,4,3])}),y({name:"120-cell",params:l([5,3,3])}),y({name:"600-cell",params:l([3,3,5])}),{name:"Snub 24-cell",params:l([3,4,3],["s","s",0,0])},{name:"Icosahedral 120-cell",params:l([3,5,5],[1,0,0,0],[1,1,2],{curve:!1}),subforms:[{name:"Small stellated 120-cell",params:l([3,5,5],[0,0,0,1],[1,1,2],{curve:!1})},{name:"Great 120-cell",params:l([5,5,5],[1,0,0,0],[1,2,1],{curve:!1})},{name:"Grand 120-cell",params:l([5,3,5],[1,0,0,0],[1,1,2],{curve:!1})},{name:"Great stellated 120-cell",params:l([5,3,5],[0,0,0,1],[1,1,2],{curve:!1})},{name:"Grand stellated 120-cell",params:l([5,5,5],[1,0,0,0],[2,1,2],{curve:!1})},{name:"Great grand 120-cell",params:l([5,5,3],[1,0,0,0],[1,2,1],{curve:!1})},{name:"Great icosahedral 120-cell",params:l([5,5,3],[0,0,0,1],[1,2,1],{curve:!1})},{name:"Great grand stellated 120-cell",params:l([5,3,3],[1,0,0,0],[2,1,1],{curve:!1})}]},{name:"Grand 600-cell",params:l([3,3,5],[1,0,0,0],[1,1,2],{curve:!1})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:5})," Polytera"]})},y({name:"5-simplex",params:l([3,3,3,3])}),y({name:"5-cube",params:l([4,3,3,3])}),y({name:"5-orthoplex",params:l([3,3,3,4])}),y({name:"5-demicube",params:l([[1,2,3,2,2],[2,1,3,2,2],[3,3,1,3,2],[2,2,3,1,3],[2,2,2,3,1]])}),{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:6})," Polypeta"]})},y({name:"6-simplex",params:l([3,3,3,3,3])}),y({name:"6-cube",params:l([4,3,3,3,3])}),y({name:"6-orthoplex",params:l([3,3,3,3,4])}),y({name:"6-demicube",params:l([[1,2,3,2,2,2],[2,1,3,2,2,2],[3,3,1,3,2,2],[2,2,3,1,3,2],[2,2,2,3,1,3],[2,2,2,2,3,1]])}),{name:r.jsxs(r.Fragment,{children:["2",r.jsx("sub",{children:"21"})]}),params:l([[1,3,2,2,2,2],[3,1,3,2,2,2],[2,3,1,3,3,2],[2,2,3,1,2,2],[2,2,3,2,1,3],[2,2,2,2,3,1]],[1,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["1",r.jsx("sub",{children:"22"})]}),params:l([[1,3,2,2,2,2],[3,1,3,2,2,2],[2,3,1,3,3,2],[2,2,3,1,2,2],[2,2,3,2,1,3],[2,2,2,2,3,1]],[0,0,0,1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:7})," Polyexa"]})},y({name:"7-simplex",params:l([3,3,3,3,3,3])}),y({name:"7-cube",params:l([4,3,3,3,3,3])}),y({name:"7-orthoplex",params:l([3,3,3,3,3,4])}),y({name:"7-demicube",params:l([[1,2,3,2,2,2,2],[2,1,3,2,2,2,2],[3,3,1,3,2,2,2],[2,2,3,1,3,2,2],[2,2,2,3,1,3,2],[2,2,2,2,3,1,3],[2,2,2,2,2,3,1]])}),{name:r.jsxs(r.Fragment,{children:["3",r.jsx("sub",{children:"21"})]}),params:l([[1,3,2,2,2,2,2],[3,1,3,2,2,2,2],[2,3,1,3,2,2,2],[2,2,3,1,3,3,2],[2,2,2,3,1,2,2],[2,2,2,3,2,1,3],[2,2,2,2,2,3,1]],[1,0,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["2",r.jsx("sub",{children:"31"})]}),params:l([[1,3,2,2,2,2,2],[3,1,3,2,2,2,2],[2,3,1,3,2,2,2],[2,2,3,1,3,3,2],[2,2,2,3,1,2,2],[2,2,2,3,2,1,3],[2,2,2,2,2,3,1]],[0,0,0,0,0,0,1])},{name:r.jsxs(r.Fragment,{children:["1",r.jsx("sub",{children:"32"})]}),params:l([[1,3,2,2,2,2,2],[3,1,3,2,2,2,2],[2,3,1,3,2,2,2],[2,2,3,1,3,3,2],[2,2,2,3,1,2,2],[2,2,2,3,2,1,3],[2,2,2,2,2,3,1]],[0,0,0,0,1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:8})," Polyzetta"]})},y({name:"8-simplex",params:l([3,3,3,3,3,3,3])}),y({name:"8-cube",params:l([4,3,3,3,3,3,3])}),y({name:"8-orthoplex",params:l([3,3,3,3,3,3,4])}),y({name:"8-demicube",params:l([[1,2,3,2,2,2,2,2],[2,1,3,2,2,2,2,2],[3,3,1,3,2,2,2,2],[2,2,3,1,3,2,2,2],[2,2,2,3,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]])}),{name:r.jsxs(r.Fragment,{children:["1",r.jsx("sub",{children:"42"})]}),params:l([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[0,0,1,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["2",r.jsx("sub",{children:"41"})]}),params:l([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[1,0,0,0,0,0,0,0])},{name:r.jsxs(r.Fragment,{children:["4",r.jsx("sub",{children:"21"})]}),params:l([[1,3,2,2,2,2,2,2],[3,1,3,2,2,2,2,2],[2,3,1,3,3,2,2,2],[2,2,3,1,2,2,2,2],[2,2,3,2,1,3,2,2],[2,2,2,2,3,1,3,2],[2,2,2,2,2,3,1,3],[2,2,2,2,2,2,3,1]],[0,0,0,0,0,0,0,1])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"finite",dimensions:9}),"Polyyotta"]})},y({name:"9-simplex",params:l([3,3,3,3,3,3,3,3])}),y({name:"9-cube",params:l([4,3,3,3,3,3,3,3])}),y({name:"9-orthoplex",params:l([3,3,3,3,3,3,3,4])}),y({name:"9-demicube",params:l([[1,2,3,2,2,2,2,2,2],[2,1,3,2,2,2,2,2,2],[3,3,1,3,2,2,2,2,2],[2,2,3,1,3,2,2,2,2],[2,2,2,3,1,3,2,2,2],[2,2,2,2,3,1,3,2,2],[2,2,2,2,2,3,1,3,2],[2,2,2,2,2,2,3,1,3],[2,2,2,2,2,2,2,3,1]])}),{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine"})," Euclidean space"]})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:3})," Tilings"]})},{name:"Triangle",params:l([[1,3,3],[3,1,3],[3,3,1]],[1,0,0])},{name:"Square",params:l([4,4],[1,0,0])},{name:"Hexagonal",params:l([6,3],[1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:4})," Honeycombs"]})},{name:"Cubic",params:A([4,3,4],[1,0,0,0])},{name:"Octet",params:A([[1,3,2,2],[3,1,3,4],[2,3,1,2],[2,4,2,1]],[1,0,0,0])},{name:"Quarter cubic",params:A([[1,3,2,3],[3,1,3,2],[2,3,1,3],[3,2,3,1]],[1,0,0,1])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"affine",dimensions:5})," 4-Honeycombs"]})},{name:"Tesseractic",params:A([4,3,3,4],[1,0,0,0,0])},{name:"16-cellic",params:A([3,3,4,3],[1,0,0,0,0],null,{grouper:"toddcoxeter"})},{name:"24-cellic",params:A([3,4,3,3],[1,0,0,0,0],null,{grouper:"toddcoxeter"})},{name:"4-simpletic",params:A([[1,3,2,2,3],[3,1,3,2,2],[2,3,1,3,2],[2,2,3,1,3],[3,2,2,3,1]],[1,0,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Quarter tesseractic",params:A([[1,2,3,2,2],[2,1,3,2,2],[3,3,1,3,3],[2,2,3,1,2],[2,2,3,2,1]],[1,0,0,1,0],null,{grouper:"toddcoxeter"})},{type:"title",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic"})," Hyperbolic space"]})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",dimensions:3})," Tilings"]})},{name:"Order-7 triangular",params:f([3,7],[1,0,0])},{name:"Order-8 triangular",params:f([3,8],[1,0,0])},{name:"Infinite Order triangular",params:f([3,0],[1,0,0])},{name:"Order-5 square",params:f([4,5],[1,0,0])},{name:"Order-6 square",params:f([4,6],[1,0,0])},{name:"Order-7 square",params:f([4,7],[1,0,0])},{name:"Order-8 square",params:f([4,8],[1,0,0])},{name:"Infinite Order square",params:f([4,0],[1,0,0])},{name:"Order-4 pentagonal",params:f([5,4],[1,0,0])},{name:"Order-5 pentagonal",params:f([5,5],[1,0,0])},{name:"Order-6 pentagonal",params:f([5,6],[1,0,0])},{name:"Order-7 pentagonal",params:f([5,7],[1,0,0])},{name:"Order-8 pentagonal",params:f([5,8],[1,0,0])},{name:"Infinite Order pentagonal",params:f([5,0],[1,0,0])},{name:"Order-4 hexagonal",params:f([6,4],[1,0,0])},{name:"Order-5 hexagonal",params:f([6,5],[1,0,0])},{name:"Order-6 hexagonal",params:f([6,6],[1,0,0])},{name:"Order-7 hexagonal",params:f([6,7],[1,0,0])},{name:"Order-8 hexagonal",params:f([6,8],[1,0,0])},{name:"Infinite Order hexagonal",params:f([6,0],[1,0,0])},{name:"Order-3 heptagonal",params:f([7,3],[1,0,0])},{name:"Order-4 heptagonal",params:f([7,4],[1,0,0])},{name:"Order-5 heptagonal",params:f([7,5],[1,0,0])},{name:"Order-6 heptagonal",params:f([7,6],[1,0,0])},{name:"Order-7 heptagonal",params:f([7,7],[1,0,0])},{name:"Order-8 heptagonal",params:f([7,8],[1,0,0])},{name:"Infinite Order heptagonal",params:f([7,0],[1,0,0])},{name:"Order-3 octagonal",params:f([8,3],[1,0,0])},{name:"Order-4 octagonal",params:f([8,4],[1,0,0])},{name:"Order-5 octagonal",params:f([8,5],[1,0,0])},{name:"Order-6 octagonal",params:f([8,6],[1,0,0])},{name:"Order-7 octagonal",params:f([8,7],[1,0,0])},{name:"Order-8 octagonal",params:f([8,8],[1,0,0])},{name:"Infinite Order octagonal",params:f([8,0],[1,0,0])},{name:"Order-3 apeirogonal",params:f([0,3],[1,0,0])},{name:"Order-4 apeirogonal",params:f([0,4],[1,0,0])},{name:"Order-5 apeirogonal",params:f([0,5],[1,0,0])},{name:"Order-6 apeirogonal",params:f([0,6],[1,0,0])},{name:"Order-7 apeirogonal",params:f([0,7],[1,0,0])},{name:"Order-8 apeirogonal",params:f([0,8],[1,0,0])},{name:"Infinite Order apeirogonal",params:f([0,0],[1,0,0])},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"compact",dimensions:4})," Honeycombs compacts"]})},{name:"Icosahedral",params:x([3,5,3],[1,0,0,0])},{name:"Order-4 dodecahedral",params:x([5,3,4],[1,0,0,0])},{name:"Order-5 dodecahedral",params:x([5,3,5],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-5 cubic",params:x([[1,2,3,2],[2,1,3,2],[3,3,1,5],[2,2,5,1]],[1,0,0,0])},{name:"Tetrahedral cubic",params:x([[1,4,2,3],[4,1,3,2],[2,3,1,3],[3,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Tetrahedral dodecahedral",params:x([[1,3,2,5],[3,1,3,2],[2,3,1,3],[5,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Cubic octahedral",params:x([[1,3,2,4],[3,1,4,2],[2,4,1,3],[4,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Octahedral Dodcahedral",params:x([[1,3,2,5],[3,1,4,2],[2,4,1,3],[5,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Octahedral Icosahedral",params:x([[1,3,2,5],[3,1,5,2],[2,5,1,3],[5,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"paracompact",dimensions:4})," ","Honeycombs paracompacts"]})},{name:"Triangular",params:x([3,6,3],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Hexagonal",params:x([6,3,3],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Order-6 tetrahedral",params:x([3,3,6],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-6 cubic",params:x([[1,2,3,2],[2,1,3,2],[3,3,1,6],[2,2,6,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Order-5 hexagonal",params:x([6,3,5],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-5 hexagonal",params:x([[1,2,3,2],[2,1,3,2],[3,3,1,5],[2,2,5,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Order-6 hexagonal",params:x([6,3,6],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Square",params:x([4,4,3],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated square",params:x([[1,2,4,2],[2,1,4,2],[4,4,1,3],[2,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Order-4 square",params:x([4,4,4],[0,1,0,0],null,{grouper:"toddcoxeter"})},{name:"Tetrahedral square",params:x([[1,4,2,4],[4,1,3,2],[2,3,1,3],[4,2,3,1]],[0,1,0,0],null,{grouper:"toddcoxeter"})},{name:"Cubic square",params:x([[1,4,2,4],[4,1,3,2],[2,3,1,4],[4,2,4,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Quarter order square",params:x([[1,4,2,4],[4,1,4,2],[2,4,1,4],[4,2,4,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Tetrahedral Hexagonal",params:x([[1,3,2,6],[3,1,3,2],[2,3,1,3],[6,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Octahedral Hexagonal",params:x([[1,3,2,6],[3,1,4,2],[2,4,1,3],[6,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Icosahedral Hexagonal",params:x([[1,3,2,6],[3,1,5,2],[2,5,1,3],[6,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Hexagonal Triangular",params:x([[1,3,2,6],[3,1,6,2],[2,6,1,3],[6,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Hexagonal",params:x([[1,3,3,2],[3,1,3,2],[3,3,1,3],[2,2,3,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-4 Hexagonal",params:x([[1,3,3,2],[3,1,3,2],[3,3,1,4],[2,2,4,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Alternated Order-5 Hexagonal",params:x([[1,3,3,2],[3,1,3,2],[3,3,1,5],[2,2,5,1]],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"Runcic Order-6 Hexagonal",params:x([[1,3,3,2],[3,1,3,2],[3,3,1,6],[2,2,6,1]],[1,0,0,1],null,{grouper:"toddcoxeter"})},{name:"Quarter Order-4 hexagonal",params:x([[1,3,3,2],[3,1,3,3],[3,3,1,3],[2,3,3,1]],[1,1,0,0],null,{grouper:"toddcoxeter"})},{name:"Hexagonal",params:x([[1,3,3,3],[3,1,3,3],[3,3,1,3],[3,3,3,1]],[1,1,1,1],null,{grouper:"toddcoxeter"})},{type:"group",content:r.jsxs(r.Fragment,{children:[r.jsx(b,{type:"hyperbolic",subtype:"lorentzian",level:2,dimensions:4})," ","Honeycombs lorentzians"]})},{name:"3-3-7",params:x([3,3,7],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"3-4-7",params:x([3,3,7],[1,0,0,0],null,{grouper:"toddcoxeter"})},{name:"3-5-7",params:x([3,5,7],[1,0,0,0],null,{grouper:"toddcoxeter"})}],R=e=>{if(["string","number"].includes(typeof e))return e;if(e instanceof Array)return e.map(R).join("");if(typeof e=="object"&&e)return R(e.props.children)},ae=(e,a)=>typeof e=="string"?R(e).toLowerCase().includes(a.toLowerCase()):!1,cr=p.memo(function e({name:a,params:s,search:o,subforms:i=[],sub:t=!1,onPreset:n}){const[d,g]=p.useState(!0),[h,c]=p.useState(!1);return p.useEffect(()=>{if(!o){g(!0),c(!1);return}if(ae(a,o)){g(!0);return}if(i.length&&i.some(({name:m})=>ae(m,o))){g(!0),c(!0);return}g(!1),c(!1)},[a,o,i]),d?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`preset${t?" sub":""}`,onClick:()=>n(s),children:[r.jsxs("div",{className:`preset-header preset-name-${i.length?"button":"only"}`,children:[i.length?r.jsx("button",{className:`preset-toggle ${h?"open":"closed"}`,onClick:m=>{m.stopPropagation(),c(!h)},children:h?"-":"+"}):null,r.jsx("span",{className:"preset-name",children:a})]}),r.jsx(ye,{coxeter:s.coxeter,mirrors:s.mirrors,stellation:s.stellation})]}),h&&i.map((m,j)=>r.jsx(e,{...m,sub:!0,search:o,onPreset:n},j))]}):null}),lr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M7.95 19L3 12l4.95-7H21v14H7.95Zm3.45-3l2.6-2.6l2.6 2.6l1.4-1.4l-2.6-2.6L18 9.4L16.6 8L14 10.6L11.4 8L10 9.4l2.6 2.6l-2.6 2.6l1.4 1.4Z"})}),ir=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M6 17c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6m9-9a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3a3 3 0 0 1 3 3M3 5v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2Z"})}),dr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m-1 1.5L18.5 9H13m-4.07 3.22H16v7.07l-2.12-2.12L11.05 20l-2.83-2.83l2.83-2.82"})}),pr=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{fill:"currentColor",d:"M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6L6.4 19Z"})});function mr({open:e,onPreset:a,onExportImage:s,closePresets:o}){const[i,t]=p.useState(""),[n,d]=p.useState(""),g=p.useCallback(h=>{d(h.target.value),ke(t(h.target.value),50)},[]);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`presets-overlay ${e?"shown":"hidden"}`,onClick:o}),r.jsx("div",{className:`presets ${e?"shown":"hidden"}`,children:r.jsxs("div",{className:"presets-modal",children:[r.jsxs("div",{className:"presets-header",children:[r.jsxs("div",{className:"presets-search",children:[r.jsx("input",{type:"text",placeholder:"Search",value:n,onChange:g}),r.jsx("button",{className:"presets-clear",onClick:()=>{t(""),d("")},children:lr})]}),r.jsxs("div",{className:"presets-actions",children:[r.jsx("a",{className:"presets-action",href:"https://florian.mounier.dev/",children:ir}),r.jsx("button",{className:"presets-action",onClick:s,children:dr}),r.jsx("button",{className:"presets-action",onClick:o,children:pr})]})]}),r.jsx("div",{className:"presets-list",children:or.map(({type:h,content:c,name:m,params:j,subforms:k},O)=>r.jsx(p.Fragment,{children:h==="title"?r.jsx("h2",{children:c}):h==="group"?r.jsx("h4",{children:c}):r.jsx(cr,{name:m,params:j,search:i,subforms:k,onPreset:a})},O))})]})})]})}const se=p.memo(function({rotations:a,spaceType:s,axis:o}){if(!s)return null;const i=s.gram.length,t=a.shift*2+o;if(t>=a.combinations.length)return null;let n=a.combinations[t];const d=n.some(c=>c<0)?"parabolic":n.some(c=>s.eigens.values[c]<0)?"hyperbolic":n.some(c=>s.eigens.values[c]===0)?"translation":"spheric",g=Oe.slice(0,i).split(""),h=d==="parabolic"?n.map(c=>g[L(c)]).join("->"):g.filter((c,m)=>!n.includes(m));return r.jsxs("aside",{className:`${o?"y":"x"}-rotation`,children:[h,d==="parabolic"?r.jsx("sup",{children:"∞"}):d==="hyperbolic"?r.jsx("sup",{children:"†"}):d==="translation"?r.jsx("sup",{children:"0"}):""]})});function hr({runtime:e,params:a,rotations:s,updateParams:o,updateRotations:i}){const[t,n]=p.useState("simple"),[d,g]=p.useState(!1),h=p.useCallback(()=>{g(!1)},[]),c=p.useCallback(u=>{let{name:v,value:C}=u.target;o({[v]:C})},[o]),m=p.useCallback((u,v)=>{o({[u]:v})},[o]),j=p.useCallback(()=>n(u=>({simple:"advanced",advanced:"full",full:"empty",empty:"simple"})[u]),[]),k=p.useCallback(u=>{o(u,!0),h()},[o,h]),O=p.useCallback(()=>{const u=K(e.dimensions);u._reset=!0,o({matrix:u})},[o,e.dimensions]),F=p.useCallback(u=>{i("shift",(s.shift+1)%s.maxShift)},[s.maxShift,s.shift,i]),V=p.useCallback(u=>{i("lock",!s.lock)},[s.lock,i]),H=p.useCallback(u=>{i("auto",s.auto==="free"?"damp":"free")},[s.auto,i]),w=p.useCallback(async()=>{const u=window.prompt("Select image resolution","5000x5000");if(!u||!u.includes("x")){console.error("Invalid resolution");return}const[v,C]=u.split("x").map(T=>parseInt(T));if(isNaN(v)||isNaN(C)){console.error("Invalid resolution");return}const S=await(await Ze(()=>import("./export-902100eb.js"),[],import.meta.url)).makeBigPng(e,v,C);if(S){const T=document.createElement("a");document.body.appendChild(T),T.style.display="none";const E=window.URL.createObjectURL(S);T.href=E,T.download=`${document.title}-${v}x${C}`,T.click()}},[e]);return r.jsxs(r.Fragment,{children:[r.jsx(mr,{open:d,onPreset:k,onExportImage:w,closePresets:h}),r.jsxs("div",{className:e.error?"error":"",title:e.error,children:[e.currentOrder<e.order?r.jsxs("aside",{className:"processing-counter",children:[e.currentOrder,"/",e.order]}):null,["simple","advanced","full"].includes(t)?r.jsx("button",{className:"preset-button button",onClick:()=>g(u=>!u),title:"Presets",children:er}):null,["simple","advanced","full"].includes(t)?r.jsxs("aside",{className:"controls",children:[r.jsxs("button",{className:"rotation-button button",onClick:F,title:"Rotation Mode",children:[r.jsx("div",{className:"rotation",style:{transform:`rotate(${s.shift/s.maxShift*360}deg)`},children:Xe}),r.jsx("sup",{children:s.shift+1}),r.jsx(se,{rotations:s,spaceType:e.spaceType,axis:0}),r.jsx(se,{rotations:s,spaceType:e.spaceType,axis:1})]}),r.jsxs("div",{className:"subcontrols",children:[r.jsx("button",{className:"button",onClick:V,children:s.lock?rr:ar}),r.jsx("button",{className:"button anim-view",onClick:H,title:"Animate rotations",children:s.auto==="free"?Ye:s.auto==="damp"?Je:"?"}),!Ce(e.matrix)&&r.jsx("button",{className:"button reset-view",onClick:O,title:"Reset View",children:Qe})]})]}):null,r.jsx("button",{className:`space-button button${e.processing?" processing":""}${t==="empty"?" empty":""}`,onClick:j,children:r.jsx(b,{...e.spaceType||{},dimensions:e.dimensions})}),["advanced","full"].includes(t)&&r.jsxs("aside",{className:"parameters",children:[t==="full"&&r.jsxs("label",{className:"select-label",children:["Grouper",r.jsx("select",{name:"grouper",value:a.grouper,onChange:c,children:Ee.map(u=>r.jsx("option",{value:u,children:u.replace(/_/g," ").replace(/\b./g,v=>v.toUpperCase())},u))})]}),r.jsxs("label",{className:"boolean-label",children:["inCentered",r.jsx(re,{name:"centered",allowNull:!0,value:a.centered,onChange:m})]}),(t==="full"||e.spaceType.curvature<=0)&&r.jsx(z,{name:"order",label:"Precision",min:1,step:1,value:a.order,onChange:m}),r.jsx(z,{name:"segments",label:"Segments",min:1,step:1,value:a.segments,toggler:a.curve,togglerName:"curve",onChange:m}),r.jsxs("label",{className:"select-label",children:["Easing",r.jsx("select",{name:"easing",value:a.easing,onChange:c,children:Te.map(u=>r.jsx("option",{value:u,children:u.replace(/_/g," ").replace(/\b./g,v=>v.toUpperCase())},u))})]}),r.jsx(z,{name:"vertexThickness",label:"Vertices",min:0,step:1,value:a.vertexThickness,toggler:a.showVertices,togglerName:"showVertices",onChange:m}),r.jsx(z,{name:"edgeThickness",label:"Edges",min:0,step:1,value:a.edgeThickness,toggler:a.showEdges,togglerName:"showEdges",onChange:m}),["toddcoxeter","fundamental"].includes(e.grouper)&&r.jsxs("label",{className:"boolean-label",children:["Faces",r.jsx(re,{name:"showFaces",value:a.showFaces,onChange:m})]}),r.jsxs("label",{className:"select-label",children:["Ambiance",r.jsx("select",{name:"ambiance",value:a.ambiance,onChange:c,children:(t==="full"?Object.keys(Q):Object.entries(Q).filter(([u,{extended:v}])=>!v||u===a.ambiance).map(([u])=>u)).map(u=>r.jsx("option",{value:u,children:u.replace(/_/g," ").replace(/./,v=>v.toUpperCase())},u))})]})]}),["advanced","full"].includes(t)&&r.jsxs("aside",{className:"view",children:[r.jsx(z,{name:"msaaSamples",label:"MSAA",min:0,step:1,max:G.msaaSamples,value:a.msaaSamples,toggler:a.msaa,togglerName:"msaa",onChange:m}),t==="full"&&r.jsx(z,{name:"subsampling",label:"subsampling",min:.1,step:.1,value:a.subsampling,onChange:m}),a.dimensions>=3?le(3,a.dimensions+1).map(u=>r.jsxs("div",{className:"projection",children:[r.jsx(z,{label:`${u}D FOV`,name:`fov${u}`,step:1,value:a[`fov${u}`],onChange:m}),r.jsxs("label",{className:"number",children:[r.jsxs("span",{className:"number-label",children:[u,"D Projection"]}),r.jsx("select",{name:`projection${u}`,value:a[`projection${u}`],onChange:c,children:[...Fe.filter((v,C)=>u===3||C<8)].map(v=>r.jsx("option",{value:v,children:v.replace(/_/g," ").replace(/./,C=>C.toUpperCase())},v))})]})]},u)):null]}),["simple","advanced","full"].includes(t)&&r.jsx(Ae,{dimensions:a.dimensions,coxeter:a.coxeter,mirrors:a.mirrors,stellation:a.stellation,extended:a.extended,onChange:m})]})]})}function ur({params:e,updateParams:a}){const[s,o]=p.useState({...e,currentOrder:0,askedOrder:null,spaceType:null,rootNormals:null,rootVertices:null,vertex:[],edge:[],ranges:[],face:[],processing:!0,error:null,renderError:null});p.useEffect(()=>{o(d=>{try{return d.gl?d:Se(d)}catch(g){return console.error(g),{...d,error:g.message}}})},[s.gl]);const[i,t]=p.useState({shift:0,maxShift:0,combinations:[],auto:"damp",lock:!1});p.useEffect(()=>{o(d=>({...d,...U(e).params}))},[e]),p.useEffect(()=>{s.spaceType&&t(d=>({...d,shift:0,...ze(e.dimensions,s.spaceType)}))},[e.dimensions,s.spaceType]),p.useEffect(()=>{o(d=>e.grouper===""&&d.grouper.startsWith("auto-")?d:{...d,grouper:e.grouper})},[e.grouper]);const n=p.useCallback((d,g)=>{t(h=>({...h,[d]:g}))},[t]);return s.gl?r.jsxs("div",{className:s.error||s.renderError?"error":"",title:s.error||s.renderError,children:[r.jsx(hr,{runtime:s,params:e,rotations:i,updateRotations:n,updateParams:a}),r.jsx(We,{runtime:s,rotations:i,setRuntime:o,updateRotations:n,updateParams:a})]}):null}const ne=(e=null)=>{const{location:a}=window;if(a.hash)try{return JSON.parse(atob(a.hash.slice(1)))}catch(s){console.warn(s),a.hash=""}return e},gr=e=>{window.history.pushState(null,null,"#"+btoa(JSON.stringify(e)))},W=(e,a)=>e.length!==a.length?!1:e.every((s,o)=>Array.isArray(s)?W(s,a[o]):s===a[o]),fr=()=>{const[e,a]=p.useState(ne(U(G).params)),s=p.useCallback(i=>{const t=ne();t&&(Object.entries(t).forEach(([n,d])=>{Array.isArray(d)&&W(d,e[n])&&(t[n]=e[n])}),a(t))},[e]),o=p.useCallback((i,t=!1)=>{a(n=>{if(!Object.entries(i).filter(([h,c])=>Array.isArray(c)?!W(c,n[h]):n[h]!==c).length)return n;const{params:d,badParams:g}=U(t?i:{...n,...i},t?[]:Object.keys(i),n);return g.length||gr(d),d})},[]);return p.useEffect(()=>(window.addEventListener("popstate",s),()=>{window.removeEventListener("popstate",s)}),[s]),r.jsx(ur,{params:e,updateParams:o})};Le.createRoot(document.getElementById("root")).render(r.jsx(fr,{}));
