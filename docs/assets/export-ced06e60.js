import{c as C,r as U}from"./main-0a8a7ffd.js";import{p as v}from"./CoxeterDiagram-0ab75ec6.js";var A={exports:{}};(function(w,p){(function(f,o){w.exports=o()})(C,function(){return function(b){var f={};function o(a){if(f[a])return f[a].exports;var r=f[a]={i:a,l:!1,exports:{}};return b[a].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=b,o.c=f,o.i=function(a){return a},o.d=function(a,r,n){o.o(a,r)||Object.defineProperty(a,r,{configurable:!1,enumerable:!0,get:n})},o.n=function(a){var r=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(r,"a",r),r},o.o=function(a,r){return Object.prototype.hasOwnProperty.call(a,r)},o.p="",o(o.s=7)}([function(b,f,o){Object.defineProperty(f,"__esModule",{value:!0});function a(r,n,c,x){var i=1,t=0,e=n+c,s=0;typeof x=="number"&&(i=x&65535,t=x>>>16&65535);for(var l=n;l<e;){for(s=Math.min(e-l,3850)+l;l<s;l++)i+=r[l]&255,t+=i;i=15*(i>>>16)+(i&65535),t=15*(t>>>16)+(t&65535)}return t%65521<<16|i%65521}f.adler32_buf=a},function(b,f,o){Object.defineProperty(f,"__esModule",{value:!0});var a=o(2),r=o(0);function n(i){return(i&255)<<8|i>>8&255}function c(i){return(i&255)<<24|(i&65280)<<8|i>>8&65280|i>>24&255}var x=function(){function i(t){this.bufferOrLength=t,this.offset=0,t instanceof ArrayBuffer?this.array=new Uint8Array(t):this.array=new Uint8Array(t)}return i.prototype.writeUint32=function(t,e){e===void 0&&(e=!1),e&&(t=c(t)),this.array[this.offset++]=t>>24&255,this.array[this.offset++]=t>>16&255,this.array[this.offset++]=t>>8&255,this.array[this.offset++]=t&255},i.prototype.writeUint16=function(t,e){e===void 0&&(e=!1),e&&(t=n(t)),this.array[this.offset++]=t>>8&255,this.array[this.offset++]=t&255},i.prototype.writeUint8=function(t){this.array[this.offset++]=t&255},i.prototype.writeString=function(t){for(var e=0,s=t.length;e<s;e++)this.array[this.offset++]=t.charCodeAt(e)},i.prototype.readUint32=function(t){t===void 0&&(t=!1);var e=this.array[this.offset++]<<24;return e+=this.array[this.offset++]<<16,e+=this.array[this.offset++]<<8,e+=this.array[this.offset++]&255,t?c(e):e},i.prototype.readUint16=function(t){t===void 0&&(t=!1);var e=this.array[this.offset++]<<8;return e+=this.array[this.offset++]&255,t?n(e):e},i.prototype.readUint8=function(){return this.array[this.offset++]&255},i.prototype.readString=function(t){for(var e="",s=this.offset+t;this.offset<s;)e+=String.fromCharCode(this.array[this.offset++]);return e},i.prototype.skip=function(t){this.offset+=t},i.prototype.rewindUint32=function(){this.offset-=4},i.prototype.rewindString=function(t){this.offset-=t},i.prototype.startCRC=function(){if(this.crcStartOffset)throw new Error("CRC already started");this.crcStartOffset=this.offset},i.prototype.writeCRC=function(){if(this.crcStartOffset===void 0)throw new Error("CRC has not been started, cannot write");var t=a.crc32(this.array,this.crcStartOffset,this.offset-this.crcStartOffset);this.crcStartOffset=void 0,this.writeUint32(t)},i.prototype.startAdler=function(){if(this.adlerStartOffset)throw new Error("Adler already started");this.adlerStartOffset=this.offset},i.prototype.pauseAdler=function(){if(this.adlerStartOffset===void 0)throw new Error("Adler has not been started, cannot pause");this.savedAdlerValue=r.adler32_buf(this.array,this.adlerStartOffset,this.offset-this.adlerStartOffset,this.savedAdlerValue),this.adlerStartOffset=void 0},i.prototype.writeAdler=function(t){if(this.adlerStartOffset===void 0&&this.savedAdlerValue===void 0)throw new Error("CRC has not been started, cannot write");if(this.adlerStartOffset===void 0){t.writeUint32(this.savedAdlerValue),this.savedAdlerValue=void 0;return}var e=r.adler32_buf(this.array,this.adlerStartOffset,this.offset-this.adlerStartOffset,this.savedAdlerValue);this.adlerStartOffset=void 0,t.writeUint32(e)},i}();f.ArrayBufferWalker=x},function(b,f,o){Object.defineProperty(f,"__esModule",{value:!0});var a=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function r(n,c,x,i){for(var t=i===0?0:~~i^-1,e=c;e<c+x;e++){var s=n[e];t=a[(t^s)&255]^t>>>8}return t^-1}f.crc32=r},function(b,f,o){var a=this&&this.__extends||function(){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var u in d)d.hasOwnProperty(u)&&(h[u]=d[u])};return function(h,d){_(h,d);function u(){this.constructor=h}h.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(f,"__esModule",{value:!0});var r=o(1),n=o(8),c=o(6),x=o(5),i=o(4),t=o(9),e=Math.pow(2,31)-1,s=function(_){a(h,_);function h(d,u){var y=_.call(this,0)||this;return y.walker=d,y.bytesLeft=u,y.startChunk(),y}return h.prototype.startChunk=function(){var d=Math.min(e,this.bytesLeft);this.bytesLeftInChunk=d,this.bytesLeft-=d,this.walker.writeUint32(d),this.walker.startCRC(),this.walker.writeString("IDAT")},h.prototype.endChunk=function(){this.walker.writeCRC()},h.prototype.isFinished=function(){return this.bytesLeft===0&&this.bytesLeftInChunk===0},h.prototype.writeUint8=function(d){this.walker.writeUint8(d),--this.bytesLeftInChunk,this.bytesLeftInChunk===0&&(this.endChunk(),this.bytesLeft&&this.startChunk())},h.prototype.writeUint16=function(d,u){u===void 0&&(u=!1),u?(this.writeUint8(d&255),this.writeUint8(d>>8&255)):(this.writeUint8(d>>8&255),this.writeUint8(d&255))},h.prototype.writeUint32=function(d,u){u===void 0&&(u=!1),u?(this.writeUint8(d&255),this.writeUint8(d>>8&255),this.writeUint8(d>>16&255),this.writeUint8(d>>24&255)):(this.writeUint8(d>>24&255),this.writeUint8(d>>16&255),this.writeUint8(d>>8&255),this.writeUint8(d&255))},h.prototype.startAdler=function(){this.walker.startAdler()},h.prototype.pauseAdler=function(){this.walker.pauseAdler()},h.prototype.writeAdler=function(d){this.walker.writeAdler(this)},h}(r.ArrayBufferWalker),l=function(){function _(h,d){this.xOffset=0;var u=new n.BlobWriter;c.writePreheader(u),x.writeIHDR(u,{width:h,height:d,colorType:x.PNGColorType.RGBA,bitDepth:8,compressionMethod:0,filter:0,interface:0});var y=h*d*4+d,O=new s(u,t.calculateZlibbedLength(y)),F=new t.ZlibWriter(O,y);this.chunker=O,this.zlibWriter=F,this.walker=u,this.rowsLeft=d,this.width=h}return _.prototype.addPixels=function(h,d,u){if(!this.rowsLeft)throw new Error("too many rows");for(var y=0;y<u;++y){this.xOffset===0&&this.zlibWriter.writeUint8(0);var O=d+y*4;this.zlibWriter.writeUint8(h[O+0]),this.zlibWriter.writeUint8(h[O+1]),this.zlibWriter.writeUint8(h[O+2]),this.zlibWriter.writeUint8(h[O+3]),++this.xOffset,this.xOffset===this.width&&(this.xOffset=0,--this.rowsLeft)}},_.prototype.addRow=function(h){this.addPixels(h,0,h.length/4)},_.prototype.finishAndGetBlob=function(){if(this.rowsLeft)throw new Error(this.rowsLeft+" rows left");if(this.zlibWriter.end(),!this.chunker.isFinished())throw new Error("bug!");return i.writeIEND(this.walker),this.walker.getBlob("image/png")},_}();f.PNGRGBAWriter=l},function(b,f,o){Object.defineProperty(f,"__esModule",{value:!0});var a="IEND";function r(n){n.writeUint32(0),n.startCRC(),n.writeString(a),n.writeCRC()}f.writeIEND=r,f.length=a.length+4+4},function(b,f,o){Object.defineProperty(f,"__esModule",{value:!0}),function(r){r[r.Grayscale=0]="Grayscale",r[r.RGB=2]="RGB",r[r.Palette=3]="Palette",r[r.GrayscaleWithAlpha=4]="GrayscaleWithAlpha",r[r.RGBA=6]="RGBA"}(f.PNGColorType||(f.PNGColorType={}));function a(r,n){r.writeUint32(13),r.startCRC(),r.writeString("IHDR"),r.writeUint32(n.width),r.writeUint32(n.height),r.writeUint8(n.bitDepth),r.writeUint8(n.colorType),r.writeUint8(n.compressionMethod),r.writeUint8(n.filter),r.writeUint8(n.interface),r.writeCRC()}f.writeIHDR=a,f.IHDRLength=4+4+13+4},function(b,f,o){Object.defineProperty(f,"__esModule",{value:!0});var a=`PNG\r

`;function r(n){n.writeString(a)}f.writePreheader=r,f.length=a.length},function(b,f,o){Object.defineProperty(f,"__esModule",{value:!0});var a=o(3);f.PNGRGBAWriter=a.PNGRGBAWriter},function(b,f,o){var a=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])};return function(t,e){i(t,e);function s(){this.constructor=t}t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}}();Object.defineProperty(f,"__esModule",{value:!0});var r=o(1),n=o(2),c=o(0),x=function(i){a(t,i);function t(e){e===void 0&&(e=1024*1024*16);var s=i.call(this,e)||this;return s.blobs=[],s}return t.prototype.writeUint32=function(e,s){s===void 0&&(s=!1),this.flushIfNoSpace(4),i.prototype.writeUint32.call(this,e,s)},t.prototype.writeUint16=function(e,s){s===void 0&&(s=!1),this.flushIfNoSpace(2),i.prototype.writeUint16.call(this,e,s)},t.prototype.writeUint8=function(e){this.flushIfNoSpace(1),i.prototype.writeUint8.call(this,e)},t.prototype.writeString=function(e){for(var s=0,l=e.length;s<l;s++)this.writeUint8(e.charCodeAt(s))},t.prototype.startCRC=function(){if(this.crcOffset!==void 0)throw new Error("CRC already started");this.crc=void 0,this.crcOffset=this.offset},t.prototype.writeCRC=function(){if(this.crcOffset===void 0)throw new Error("CRC has not been started, cannot write");var e=n.crc32(this.array,this.crcOffset,this.offset-this.crcOffset,this.crc);this.crcOffset=void 0,this.writeUint32(e)},t.prototype.startAdler=function(){if(this.adlerOffset!==void 0)throw new Error("Adler already started");this.adlerOffset=this.offset},t.prototype.pauseAdler=function(){if(this.adlerOffset===void 0)throw new Error("Adler has not been started, cannot pause");this.adler=c.adler32_buf(this.array,this.adlerOffset,this.offset-this.adlerOffset,this.adler),this.adlerOffset=void 0},t.prototype.writeAdler=function(e){if(this.adlerOffset===void 0&&this.adler===void 0)throw new Error("Adler has not been started, cannot pause");if(this.adlerOffset===void 0){e.writeUint32(this.adler),this.adler=void 0;return}var s=c.adler32_buf(this.array,this.adlerOffset,this.offset-this.adlerOffset,this.adler);this.adlerOffset=void 0,this.adler=void 0,e.writeUint32(s)},t.prototype.flushIfNoSpace=function(e){this.offset+e>this.array.length&&this.flush()},t.prototype.flush=function(){if(this.offset){this.crcOffset!==void 0&&(this.crc=n.crc32(this.array,this.crcOffset,this.offset-this.crcOffset,this.crc),this.crcOffset=0),this.adlerOffset!==void 0&&(this.adler=c.adler32_buf(this.array,this.adlerOffset,this.offset-this.adlerOffset,this.adler),this.adlerOffset=0);var e=new Uint8Array(this.array.buffer,0,this.offset),s=new Blob([e]);this.blobs.push(s),this.offset=0}},t.prototype.getBlob=function(e){return this.blob||(this.flush(),this.blob=new Blob(this.blobs,{type:e}),this.blobs=[],this.array=new Uint8Array(0)),this.blob},t}(r.ArrayBufferWalker);f.BlobWriter=x},function(b,f,o){Object.defineProperty(f,"__esModule",{value:!0}),f.ZLIB_WINDOW_SIZE=1024*32,f.BLOCK_SIZE=65535;function a(n){var c=Math.ceil(n/f.BLOCK_SIZE);return 1+1+5*c+4+n}f.calculateZlibbedLength=a;var r=function(){function n(c,x){this.walker=c,this.bytesLeftInWindow=0,this.bytesLeft=x,this.writeZlibHeader(),this.startBlock()}return n.prototype.writeZlibHeader=function(){var c=Math.LOG2E*Math.log(f.ZLIB_WINDOW_SIZE)-8,x=8,i=c<<4|x,t=0,e=0,s=e<<6|t<<5,l=31-(i*256+s)%31;s|=l,this.walker.writeUint8(i),this.walker.writeUint8(s)},n.prototype.startBlock=function(){var c=this.bytesLeft<f.BLOCK_SIZE?1:0,x=0,i=Math.min(this.bytesLeft,f.BLOCK_SIZE);this.walker.writeUint8(c|x<<1);var t=~i+65536&65535;this.walker.writeUint16(i,!0),this.walker.writeUint16(t,!0),this.bytesLeftInWindow=Math.min(this.bytesLeft,f.BLOCK_SIZE),this.walker.startAdler()},n.prototype.writeUint8=function(c){if(this.bytesLeft<=0)throw new Error("Ran out of space");this.bytesLeftInWindow===0&&this.bytesLeft>0&&(this.walker.pauseAdler(),this.startBlock()),this.walker.writeUint8(c),this.bytesLeftInWindow--,this.bytesLeft--},n.prototype.end=function(){this.walker.writeAdler(this.walker)},n}();f.ZlibWriter=r}])})})(A);var B=A.exports;function S(){return new Promise(w=>{setTimeout(w,100)})}const k=(w,p,b,f,o,a,r)=>{const{gl:n}=w;U(w,{height:r,width:a,x:f,y:o,fullWidth:p,fullHeight:b});const c=new Uint8Array(a*r*4);n.bindFramebuffer(n.FRAMEBUFFER,null),n.readPixels(0,0,a,r,n.RGBA,n.UNSIGNED_BYTE,c);const x=a*4,i=new Uint8Array(x),t=r/2|0;for(let e=0;e<t;++e){const s=x*e,l=x*(r-e-1);i.set(c.slice(s,s+x),0),c.set(c.slice(l,l+x),s),c.set(i,l)}return{width:a,height:r,data:c}},L=async(w,p,b,f,o,a,r)=>{for(let n=0;n<b;n+=o){const c=[],x=v(o,b-n);for(let i=0;i<p;i+=f){const t=v(f,p-i),e=k(w,p,b,i,n,t,x);if(!e)return;c.push(e),a.innerHTML=`${((n+o*(i/p))/b*100).toFixed(0)}%`,await S()}for(let i=0;i<x;++i)c.forEach(t=>{const s=t.width*4*i;r.addPixels(t.data,s,t.width)})}};async function m(w,p,b){const f=new B.PNGRGBAWriter(p,b),o=1e3,a=1e3,r=document.createElement("div");r.className="export-progress",document.body.appendChild(r);try{await L(w,p,b,o,a,r,f)}finally{document.body.removeChild(r)}return U(w),f.finishAndGetBlob()}export{L as iterateChunks,m as makeBigPng,k as renderChunk};
